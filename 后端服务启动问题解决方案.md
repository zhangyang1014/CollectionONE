# âš ï¸ åç«¯æœåŠ¡å¯åŠ¨é—®é¢˜è§£å†³æ–¹æ¡ˆ

## ğŸ” é—®é¢˜è¯Šæ–­

è™šæ‹Ÿç¯å¢ƒä¸­ç¼ºå°‘ `uvicorn` å’Œ `fastapi` ç­‰ä¾èµ–åŒ…ï¼Œä¸”ç”±äºç½‘ç»œä»£ç†é—®é¢˜æ— æ³•è‡ªåŠ¨å®‰è£…ã€‚

## âœ… è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šæ‰‹åŠ¨å®‰è£…ä¾èµ–ï¼ˆæ¨èï¼‰

**åœ¨æ–°ç»ˆç«¯çª—å£æ‰§è¡Œï¼š**

```bash
cd "/Users/zhangyang/Library/Mobile Documents/com~apple~CloudDocs/2. é¢†åŸŸï¼ˆAreasï¼‰/17 å­¦ä¹ AI ä¸ ç¼–ç¨‹/Code/CloudunCollectionONE/backend"

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate

# å¦‚æœç½‘ç»œä»£ç†æœ‰é—®é¢˜ï¼Œå…ˆé…ç½®pipä¸ä½¿ç”¨ä»£ç†
unset http_proxy
unset https_proxy
unset HTTP_PROXY
unset HTTPS_PROXY

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å¯åŠ¨æœåŠ¡
python -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

### æ–¹æ¡ˆ2ï¼šä½¿ç”¨ç³»ç»ŸPythonï¼ˆå¦‚æœè™šæ‹Ÿç¯å¢ƒæœ‰é—®é¢˜ï¼‰

```bash
cd "/Users/zhangyang/Library/Mobile Documents/com~apple~CloudDocs/2. é¢†åŸŸï¼ˆAreasï¼‰/17 å­¦ä¹ AI ä¸ ç¼–ç¨‹/Code/CloudunCollectionONE/backend"

# ä½¿ç”¨ç³»ç»ŸPythonï¼ˆéœ€è¦å…ˆå®‰è£…ä¾èµ–ï¼‰
pip3 install fastapi uvicorn sqlalchemy pydantic pydantic-settings

# å¯åŠ¨æœåŠ¡
python3 -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

### æ–¹æ¡ˆ3ï¼šæ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»–Pythonç¯å¢ƒ

å¦‚æœæ‚¨ä¹‹å‰æˆåŠŸè¿è¡Œè¿‡æœåŠ¡ï¼Œå¯èƒ½æ˜¯ä½¿ç”¨äº†å…¶ä»–Pythonç¯å¢ƒã€‚è¯·æ£€æŸ¥ï¼š

```bash
# æŸ¥æ‰¾æ‰€æœ‰Python
which -a python3

# æ£€æŸ¥å“ªä¸ªPythonæœ‰uvicorn
for py in $(which -a python3); do
    echo "æ£€æŸ¥: $py"
    $py -c "import uvicorn; print('âœ… æ‰¾åˆ°uvicorn')" 2>/dev/null && echo "ä½¿ç”¨è¿™ä¸ªPython: $py"
done
```

## ğŸ¯ å¯åŠ¨æˆåŠŸçš„æ ‡å¿—

çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºè¯´æ˜å¯åŠ¨æˆåŠŸï¼š
```
INFO:     Started server process [xxxxx]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000
```

## âœ… éªŒè¯æ­¥éª¤

1. **æ£€æŸ¥æœåŠ¡å¥åº·çŠ¶æ€**ï¼š
   ```bash
   curl http://localhost:8000/health
   ```
   åº”è¯¥è¿”å›ï¼š`{"status":"healthy"}`

2. **è®¿é—®APIæ–‡æ¡£**ï¼š
   æ‰“å¼€æµè§ˆå™¨ï¼š`http://localhost:8000/docs`
   
   åœ¨æœç´¢æ¡†è¾“å…¥ `performance`ï¼Œåº”è¯¥èƒ½çœ‹åˆ°ï¼š
   - `/api/v1/performance/collector/{collector_id}`

3. **æµ‹è¯•APIç«¯ç‚¹**ï¼š
   ```bash
   curl "http://localhost:8000/api/v1/performance/collector/1?start_date=2025-01-01&end_date=2025-01-12&period=daily"
   ```
   å¦‚æœè¿”å›JSONæ•°æ®ï¼ˆä¸æ˜¯404ï¼‰ï¼Œè¯´æ˜APIæ­£å¸¸ã€‚

4. **åˆ·æ–°å‰ç«¯é¡µé¢**ï¼š
   - æŒ‰ `Cmd + Shift + R` å¼ºåˆ¶åˆ·æ–°
   - ç‚¹å‡»"æ•°æ®çœ‹æ¿" â†’ "æˆ‘çš„ä¸šç»©çœ‹æ¿"

## ğŸ“ å¦‚æœè¿˜æ˜¯æœ‰é—®é¢˜

è¯·æä¾›ï¼š
1. æ‰§è¡Œ `pip list | grep -E "fastapi|uvicorn"` çš„è¾“å‡º
2. å¯åŠ¨æœåŠ¡æ—¶çš„å®Œæ•´é”™è¯¯ä¿¡æ¯
3. è®¿é—® `http://localhost:8000/docs` æ—¶çœ‹åˆ°çš„APIåˆ—è¡¨

---

**è¯·æŒ‰ç…§æ–¹æ¡ˆ1æ‰‹åŠ¨å®‰è£…ä¾èµ–å¹¶å¯åŠ¨æœåŠ¡ï¼Œç„¶åå‘Šè¯‰æˆ‘ç»“æœï¼**

