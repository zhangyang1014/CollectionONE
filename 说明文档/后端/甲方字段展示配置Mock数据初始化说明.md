# ç”²æ–¹å­—æ®µå±•ç¤ºé…ç½®Mockæ•°æ®åˆå§‹åŒ–è¯´æ˜Ž

## ðŸ“‹ ä»»åŠ¡æ¦‚è¿°

ä¸º"ç”²æ–¹å­—æ®µå±•ç¤ºé…ç½®"åŠŸèƒ½åˆ›å»ºå®Œæ•´çš„Mockæ•°æ®ï¼Œä¸ºæ‰€æœ‰ç”²æ–¹çš„3ä¸ªåœºæ™¯åˆ›å»ºé»˜è®¤å­—æ®µé…ç½®ã€‚

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. ä¿®å¤æ•°æ®æ¨¡åž‹

**é—®é¢˜**ï¼šSQLiteä¸æ”¯æŒBIGINTç±»åž‹çš„è‡ªåŠ¨é€’å¢žä¸»é”®

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä¿®æ”¹ `TenantFieldDisplayConfig` æ¨¡åž‹
- å°† `id` å­—æ®µä»Ž `BigInteger` æ”¹ä¸º `Integer`
- å°† `tenant_id` å­—æ®µä»Ž `BigInteger` æ”¹ä¸º `Integer`

**ä¿®æ”¹æ–‡ä»¶**ï¼š`backend/app/models/tenant_field_display_config.py`

### 2. ä¿®å¤Schemaå®šä¹‰

**é—®é¢˜**ï¼šSchemaä¸­tenant_idå®šä¹‰ä¸ºstringç±»åž‹ï¼Œä¸Žæ•°æ®åº“ä¸åŒ¹é…

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä¿®æ”¹ `FieldDisplayConfigBase.tenant_id` ä»Ž `str` æ”¹ä¸º `int`
- ä¿®æ”¹ `FieldDisplayConfigQuery.tenant_id` ä»Ž `Optional[str]` æ”¹ä¸º `Optional[int]`
- ä¿®æ”¹APIå‚æ•°ç±»åž‹

**ä¿®æ”¹æ–‡ä»¶**ï¼š
- `backend/app/schemas/field_display.py`
- `backend/app/api/field_display.py`

### 3. åˆ›å»ºåˆå§‹åŒ–è„šæœ¬

**æ–‡ä»¶**ï¼š`backend/init_field_display_configs.py`

**åŠŸèƒ½**ï¼š
- ä¸ºæ¯ä¸ªç”²æ–¹åˆ›å»º3ä¸ªåœºæ™¯çš„å­—æ®µå±•ç¤ºé…ç½®
- æ”¯æŒæ¸…ç©ºæ—§æ•°æ®
- è‡ªåŠ¨éªŒè¯æ•°æ®å®Œæ•´æ€§

## ðŸ“Š æ•°æ®ç»Ÿè®¡

### æ€»ä½“æ•°æ®
- **ç”²æ–¹æ•°é‡**ï¼š3ä¸ªï¼ˆç™¾è…¾ä¼ä¸šã€ç™¾è…¾æ•°ç§‘ã€æ˜Ÿè€€ä¼ä¸šï¼‰
- **é…ç½®æ€»æ•°**ï¼š123ä¸ª
- **åœºæ™¯æ•°é‡**ï¼š3ä¸ª

### å„åœºæ™¯å­—æ®µæ•°é‡

| åœºæ™¯ | å­—æ®µæ•° | è¯´æ˜Ž |
|------|--------|------|
| æŽ§å°æ¡ˆä»¶ç®¡ç†åˆ—è¡¨ | 15ä¸ª/ç”²æ–¹ | ç®¡ç†åŽå°ä½¿ç”¨ï¼Œå­—æ®µå®Œæ•´ |
| å‚¬å‘˜æ¡ˆä»¶åˆ—è¡¨ | 12ä¸ª/ç”²æ–¹ | å‚¬å‘˜ç«¯åˆ—è¡¨ï¼Œå­—æ®µç²¾ç®€ |
| å‚¬å‘˜æ¡ˆä»¶è¯¦æƒ… | 14ä¸ª/ç”²æ–¹ | å‚¬å‘˜ç«¯è¯¦æƒ…ï¼ŒåŒ…å«è¯¦ç»†ä¿¡æ¯ |

### æ•°æ®åˆ†å¸ƒ

```
æŽ§å°æ¡ˆä»¶ç®¡ç†åˆ—è¡¨: 45 ä¸ªé…ç½® (3ä¸ªç”²æ–¹ Ã— 15ä¸ªå­—æ®µ)
å‚¬å‘˜æ¡ˆä»¶åˆ—è¡¨: 36 ä¸ªé…ç½® (3ä¸ªç”²æ–¹ Ã— 12ä¸ªå­—æ®µ)
å‚¬å‘˜æ¡ˆä»¶è¯¦æƒ…: 42 ä¸ªé…ç½® (3ä¸ªç”²æ–¹ Ã— 14ä¸ªå­—æ®µ)
```

## ðŸŽ¨ é…ç½®ç‰¹æ€§

### 1. æŽ§å°æ¡ˆä»¶ç®¡ç†åˆ—è¡¨ï¼ˆ15ä¸ªå­—æ®µï¼‰

| åºå· | å­—æ®µ | å®½åº¦ | å›ºå®š | é¢œè‰²è§„åˆ™ | æ ¼å¼åŒ– |
|------|------|------|------|---------|--------|
| 1 | æ¡ˆä»¶ç¼–å· | 180px | âœ… | - | - |
| 2 | å®¢æˆ·å§“å | 120px | - | - | - |
| 3 | æ‰‹æœºå·ç  | 140px | - | - | - |
| 4 | è´·æ¬¾é‡‘é¢ | 120px | - | - | è´§å¸æ ¼å¼ |
| 5 | åº”è¿˜æœªè¿˜é‡‘é¢ | 130px | - | - | è´§å¸æ ¼å¼ |
| 6 | é€¾æœŸå¤©æ•° | 100px | - | åŠ¨æ€é¢œè‰² | - |
| 7 | æ¡ˆä»¶çŠ¶æ€ | 120px | - | - | - |
| 8 | æ‰€å±žé˜Ÿåˆ— | 100px | - | - | - |
| 9 | å‚¬æ”¶æœºæž„ | 150px | - | - | - |
| 10 | å‚¬æ”¶å°ç»„ | 120px | - | - | - |
| 11 | å‚¬å‘˜å§“å | 100px | - | - | - |
| 12 | åˆ†é…æ—¶é—´ | 160px | - | - | æ—¥æœŸæ ¼å¼ |
| 13 | åº”è¿˜æ—¥æœŸ | 120px | - | - | æ—¥æœŸæ ¼å¼ |
| 14 | æœ€åŽè”ç³»æ—¶é—´ | 160px | éšè— | - | - |
| 15 | è”ç³»æ¬¡æ•° | 100px | éšè— | - | - |

### 2. å‚¬å‘˜æ¡ˆä»¶åˆ—è¡¨ï¼ˆ12ä¸ªå­—æ®µï¼‰

æ›´ç²¾ç®€çš„å­—æ®µé…ç½®ï¼Œé€‚åˆå‚¬å‘˜ç«¯å¿«é€ŸæŸ¥çœ‹å’Œæ“ä½œã€‚

### 3. å‚¬å‘˜æ¡ˆä»¶è¯¦æƒ…ï¼ˆ14ä¸ªå­—æ®µï¼‰

åŒ…å«å®¢æˆ·è¯¦ç»†ä¿¡æ¯ï¼Œä¾›å‚¬å‘˜è¯¦ç»†æŸ¥çœ‹ã€‚

## ðŸŽ¨ ç‰¹æ®Šé…ç½®è¯´æ˜Ž

### 1. åŠ¨æ€é¢œè‰²è§„åˆ™ï¼ˆé€¾æœŸå¤©æ•°ï¼‰

```json
{
  "color_rule": [
    {"condition": "value > 30", "color": "red"},
    {"condition": "value > 15 && value <= 30", "color": "yellow"},
    {"condition": "value > 0 && value <= 15", "color": "green"}
  ]
}
```

- è¶…è¿‡30å¤©ï¼šçº¢è‰²ï¼ˆä¸¥é‡é€¾æœŸï¼‰
- 15-30å¤©ï¼šé»„è‰²ï¼ˆä¸­åº¦é€¾æœŸï¼‰
- 1-15å¤©ï¼šç»¿è‰²ï¼ˆè½»åº¦é€¾æœŸï¼‰

### 2. è´§å¸æ ¼å¼åŒ–

```json
{
  "format_rule": {
    "format_type": "currency",
    "format_pattern": "#,##0.00",
    "prefix": "Â¥",
    "suffix": ""
  }
}
```

æ˜¾ç¤ºæ•ˆæžœï¼šÂ¥12,345.67

### 3. æ—¥æœŸæ ¼å¼åŒ–

```json
{
  "format_rule": {
    "format_type": "date",
    "format_pattern": "YYYY-MM-DD HH:mm",
    "prefix": "",
    "suffix": ""
  }
}
```

æ˜¾ç¤ºæ•ˆæžœï¼š2025-11-20 14:30

### 4. å›ºå®šåˆ—

æ¡ˆä»¶ç¼–å·å­—æ®µè®¾ç½®ä¸ºå›ºå®šåˆ—ï¼ˆ`is_fixed: true`ï¼‰ï¼Œåœ¨æ¨ªå‘æ»šåŠ¨æ—¶ä¿æŒå¯è§ã€‚

### 5. éšè—è§„åˆ™æ”¯æŒ

å‚¬å‘˜ç«¯åœºæ™¯æ”¯æŒåŸºäºŽé˜Ÿåˆ—/æœºæž„/å°ç»„çš„éšè—è§„åˆ™ï¼ˆå­—æ®µå·²é¢„ç•™ï¼Œå¯æŒ‰éœ€é…ç½®ï¼‰ã€‚

## ðŸ”§ ä½¿ç”¨è¯´æ˜Ž

### åˆå§‹åŒ–æ•°æ®

```bash
cd /Users/zhangyang/Documents/GitHub/CollectionONE/backend
source venv/bin/activate
python init_field_display_configs.py
```

### éªŒè¯æ•°æ®

```bash
# æŸ¥è¯¢ç”²æ–¹1çš„æŽ§å°æ¡ˆä»¶åˆ—è¡¨é…ç½®
curl "http://localhost:8000/api/v1/field-display-configs?tenant_id=1&scene_type=admin_case_list"

# æŸ¥è¯¢ç”²æ–¹2çš„å‚¬å‘˜æ¡ˆä»¶åˆ—è¡¨é…ç½®
curl "http://localhost:8000/api/v1/field-display-configs?tenant_id=2&scene_type=collector_case_list"

# æŸ¥è¯¢ç”²æ–¹3çš„å‚¬å‘˜æ¡ˆä»¶è¯¦æƒ…é…ç½®
curl "http://localhost:8000/api/v1/field-display-configs?tenant_id=3&scene_type=collector_case_detail"
```

### æŸ¥è¯¢åœºæ™¯ç±»åž‹

```bash
curl "http://localhost:8000/api/v1/field-display-configs/scene-types"
```

## ðŸ“Š APIæµ‹è¯•ç»“æžœ

```bash
$ curl "http://localhost:8000/api/v1/field-display-configs?tenant_id=1&scene_type=admin_case_list"

å…±è¿”å›ž 15 ä¸ªé…ç½®

å‰3ä¸ªé…ç½®ï¼š
  1. æ¡ˆä»¶ç¼–å· (case_code) - æ˜¾ç¤º:True, æŽ’åº:1
  2. å®¢æˆ·å§“å (user_name) - æ˜¾ç¤º:True, æŽ’åº:2
  3. æ‰‹æœºå·ç  (mobile) - æ˜¾ç¤º:True, æŽ’åº:3
```

## ðŸ“ ç›¸å…³æ–‡ä»¶

### æ–°åˆ›å»ºçš„æ–‡ä»¶
- `backend/init_field_display_configs.py` - æ•°æ®åˆå§‹åŒ–è„šæœ¬

### ä¿®æ”¹çš„æ–‡ä»¶
- `backend/app/models/tenant_field_display_config.py` - ä¿®å¤IDç±»åž‹
- `backend/app/schemas/field_display.py` - ä¿®å¤tenant_idç±»åž‹
- `backend/app/api/field_display.py` - ä¿®å¤APIå‚æ•°ç±»åž‹

### ç›¸å…³åŠŸèƒ½æ–‡ä»¶ï¼ˆå·²å­˜åœ¨ï¼‰
- `backend/app/models/tenant_field_display_config.py` - æ•°æ®æ¨¡åž‹
- `backend/app/api/field_display.py` - APIæŽ¥å£
- `frontend/src/views/field-config/FieldDisplayConfig.vue` - å‰ç«¯é¡µé¢
- `frontend/src/api/fieldDisplay.ts` - å‰ç«¯APIæœåŠ¡

## ðŸŽ¯ ä¸‹ä¸€æ­¥

1. **å‰ç«¯é›†æˆ**ï¼šåœ¨å‰ç«¯é¡µé¢ä¸­ä½¿ç”¨è¿™äº›mockæ•°æ®
2. **æµ‹è¯•éªŒè¯**ï¼š
   - æµ‹è¯•åœºæ™¯åˆ‡æ¢
   - æµ‹è¯•å­—æ®µæ˜¾ç¤º/éšè—
   - æµ‹è¯•åŠ¨æ€é¢œè‰²è§„åˆ™
   - æµ‹è¯•æ ¼å¼åŒ–è§„åˆ™
3. **æ•°æ®æ‰©å±•**ï¼šæ ¹æ®å®žé™…éœ€æ±‚æ·»åŠ æ›´å¤šå­—æ®µé…ç½®
4. **éšè—è§„åˆ™**ï¼šæ ¹æ®å®žé™…ä¸šåŠ¡é…ç½®é˜Ÿåˆ—/æœºæž„/å°ç»„çš„éšè—è§„åˆ™

## âœ… å®ŒæˆçŠ¶æ€

- âœ… æ•°æ®æ¨¡åž‹ä¿®å¤
- âœ… Schemaå®šä¹‰ä¿®å¤
- âœ… åˆå§‹åŒ–è„šæœ¬åˆ›å»º
- âœ… Mockæ•°æ®ç”ŸæˆæˆåŠŸï¼ˆ123æ¡ï¼‰
- âœ… APIéªŒè¯é€šè¿‡
- âœ… æ‰€æœ‰ç”²æ–¹éƒ½æœ‰å®Œæ•´é…ç½®
- âœ… 3ä¸ªåœºæ™¯éƒ½æœ‰é»˜è®¤å­—æ®µ

**çŠ¶æ€**ï¼šâœ… å®Œæˆï¼Œæ•°æ®å·²å°±ç»ªï¼Œå¯ç”¨äºŽå‰ç«¯æµ‹è¯•

---

**å®Œæˆæ—¶é—´**ï¼š2025-11-20  
**æ•°æ®çŠ¶æ€**ï¼šå·²åˆå§‹åŒ–123æ¡é…ç½®æ•°æ®  
**APIçŠ¶æ€**ï¼šæ­£å¸¸å·¥ä½œ

