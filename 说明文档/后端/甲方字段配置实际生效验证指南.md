# ç”²æ–¹å­—æ®µé…ç½®å®é™…ç”Ÿæ•ˆéªŒè¯æŒ‡å—

## ğŸ“‹ éªŒè¯ç›®æ ‡

æœ¬æ–‡æ¡£æä¾›**å®é™…æ“ä½œæ­¥éª¤**ï¼ŒéªŒè¯"ç”²æ–¹å­—æ®µé…ç½®"åŠŸèƒ½çœŸæ­£ä»æ•°æ®åº“è¯»å–ï¼Œå¹¶åœ¨ä»¥ä¸‹é¡µé¢ç”Ÿæ•ˆï¼š

1. **æ§å°æ¡ˆä»¶åˆ—è¡¨** (`admin_case_list`)
2. **IMç«¯æ¡ˆä»¶åˆ—è¡¨** (`collector_case_list`) 
3. **IMç«¯æ¡ˆä»¶è¯¦æƒ…** (`collector_case_detail`)

éªŒè¯çš„åŠŸèƒ½ç‚¹ï¼š
- âœ… ä¿¡æ¯å±•ç¤ºä¸å¦
- âœ… ä¿¡æ¯æ’åº (sort_order)
- âœ… ç­›é€‰ (is_filterable)
- âœ… æœç´¢ (is_searchable)
- âœ… èŒƒå›´æ£€ç´¢ (is_range_searchable)

---

## âœ… æ¶æ„éªŒè¯ï¼ˆå·²å®Œæˆï¼‰

### 1. æ•°æ®åº“è¡¨ç»“æ„ âœ…

**è¡¨å**: `tenant_field_display_configs`

**ä½ç½®**: `backend-java/src/main/resources/db/migration/schema.sql`

**å…³é”®å­—æ®µ**:
```sql
- tenant_id              # ç”²æ–¹ID
- scene_type             # åœºæ™¯ç±»å‹
- field_key              # å­—æ®µæ ‡è¯†
- field_name             # å­—æ®µåç§°
- sort_order             # â­ æ’åºé¡ºåº
- display_width          # â­ æ˜¾ç¤ºå®½åº¦
- is_searchable          # â­ æ˜¯å¦å¯æœç´¢
- is_filterable          # â­ æ˜¯å¦å¯ç­›é€‰
- is_range_searchable    # â­ æ˜¯å¦æ”¯æŒèŒƒå›´æ£€ç´¢
```

### 2. åˆå§‹åŒ–æ•°æ® âœ…

**ä½ç½®**: `backend-java/src/main/resources/db/data/init_field_display_configs.sql`

å·²ä¸ºç”²æ–¹A (tenant_id=1) åˆå§‹åŒ–ï¼š
- âœ… `admin_case_list` - 10ä¸ªå­—æ®µ
- âœ… `collector_case_list` - 8ä¸ªå­—æ®µ  
- âœ… `collector_case_detail` - 12ä¸ªå­—æ®µ

### 3. åç«¯å®ç° âœ…

**Controller**: `FieldDisplayConfigController.java`
- âœ… ä»æ•°æ®åº“è¯»å–ï¼ˆä½¿ç”¨MyBatis-Plusï¼‰
- âœ… APIè·¯å¾„: `/api/v1/field-display-configs`

**Service**: `FieldDisplayConfigServiceImpl.java`
```java
@Autowired
private TenantFieldDisplayConfigMapper mapper;  // âœ… æ•°æ®åº“Mapper

// âœ… ä»æ•°æ®åº“æŸ¥è¯¢
wrapper.orderByAsc(TenantFieldDisplayConfig::getSortOrder);
return mapper.selectList(wrapper);
```

### 4. å‰ç«¯å®ç° âœ…

**APIå±‚**: `frontend/src/api/fieldDisplay.ts` âœ…

**Hook**: `frontend/src/composables/useFieldDisplayConfig.ts` âœ…

**é¡µé¢é›†æˆ**:
- âœ… æ§å°æ¡ˆä»¶åˆ—è¡¨: `CaseList.vue` ä½¿ç”¨ `useFieldDisplayConfig` + `DynamicCaseTable`
- âœ… IMç«¯æ¡ˆä»¶åˆ—è¡¨: `CollectorWorkspace.vue` ä½¿ç”¨ `useFieldDisplayConfig` + `DynamicCaseTable`
- âœ… IMç«¯æ¡ˆä»¶è¯¦æƒ…: `DynamicCaseDetail.vue` ç»„ä»¶

---

## ğŸ§ª å®é™…éªŒè¯æ­¥éª¤

### å‡†å¤‡å·¥ä½œ

#### Step 1: å¯åŠ¨æœåŠ¡

```bash
# 1. å¯åŠ¨Javaåç«¯ï¼ˆç¡®ä¿ä½¿ç”¨Java 17ï¼‰
cd backend-java
./start.sh

# 2. å¯åŠ¨å‰ç«¯
cd frontend
npm run dev
```

**éªŒè¯åç«¯å¯åŠ¨æˆåŠŸ**:
- æ‰“å¼€æµè§ˆå™¨è®¿é—®: http://localhost:8080/actuator/health
- åº”è¯¥è¿”å›: `{"status":"UP"}`

**éªŒè¯å‰ç«¯å¯åŠ¨æˆåŠŸ**:
- è®¿é—®: http://localhost:5173
- åº”è¯¥çœ‹åˆ°ç™»å½•é¡µé¢

#### Step 2: ç™»å½•ç³»ç»Ÿ

ä½¿ç”¨ä»¥ä¸‹è´¦å·ä¹‹ä¸€ç™»å½•ï¼š

| è§’è‰² | è´¦å· | å¯†ç  | è¯´æ˜ |
|------|------|------|------|
| è¶…çº§ç®¡ç†å‘˜ | superadmin | admin123 | å¯ä»¥é…ç½®æ‰€æœ‰ç”²æ–¹ |
| ç”²æ–¹Aç®¡ç†å‘˜ | tenanta_admin | admin123 | åªèƒ½é…ç½®ç”²æ–¹A |

#### Step 3: é€‰æ‹©ç”²æ–¹

ç™»å½•åï¼Œåœ¨é¡µé¢å³ä¸Šè§’çš„ç”²æ–¹é€‰æ‹©å™¨ä¸­é€‰æ‹© **ç”²æ–¹A**ã€‚

---

### éªŒè¯1: å­—æ®µå±•ç¤ºä¸å¦

#### æµ‹è¯•æ–¹æ³•

ä¿®æ”¹æ•°æ®åº“ï¼Œåˆ é™¤ä¸€ä¸ªå­—æ®µé…ç½®ï¼Œè§‚å¯Ÿå‰ç«¯æ˜¯å¦ä¸å†æ˜¾ç¤ºè¯¥å­—æ®µã€‚

#### æ“ä½œæ­¥éª¤

**1. æŸ¥çœ‹å½“å‰é…ç½®**

ä½¿ç”¨æ•°æ®åº“å·¥å…·ï¼ˆå¦‚MySQL Workbenchã€DBeaverç­‰ï¼‰è¿æ¥æ•°æ®åº“ï¼š
```
Host: localhost
Port: 3306
User: root
Password: root
Database: cco_system
```

æ‰§è¡ŒSQL:
```sql
-- æŸ¥çœ‹æ§å°æ¡ˆä»¶åˆ—è¡¨çš„æ‰€æœ‰å­—æ®µ
SELECT 
    sort_order,
    field_key,
    field_name,
    display_width
FROM tenant_field_display_configs
WHERE tenant_id = 1 
  AND scene_type = 'admin_case_list'
ORDER BY sort_order;
```

**é¢„æœŸç»“æœ**: åº”è¯¥çœ‹åˆ°10ä¸ªå­—æ®µé…ç½®ã€‚

**2. ä¸´æ—¶åˆ é™¤ä¸€ä¸ªå­—æ®µ**

```sql
-- å¤‡ä»½ï¼ˆç¨åæ¢å¤ç”¨ï¼‰
CREATE TEMPORARY TABLE temp_backup AS
SELECT * FROM tenant_field_display_configs
WHERE tenant_id = 1 
  AND scene_type = 'admin_case_list'
  AND field_key = 'app_name';

-- åˆ é™¤"Appåç§°"å­—æ®µ
DELETE FROM tenant_field_display_configs
WHERE tenant_id = 1 
  AND scene_type = 'admin_case_list'
  AND field_key = 'app_name';
```

**3. éªŒè¯å‰ç«¯**

- åˆ·æ–°æµè§ˆå™¨ï¼ˆF5ï¼‰
- è¿›å…¥ `æ¡ˆä»¶ç®¡ç† â†’ æ¡ˆä»¶åˆ—è¡¨`
- è§‚å¯Ÿè¡¨æ ¼åˆ—

**é¢„æœŸç»“æœ**: 
- âŒ "Appåç§°"åˆ—ä¸å†æ˜¾ç¤º
- âœ… å…¶ä»–åˆ—æ­£å¸¸æ˜¾ç¤º

**4. æ¢å¤é…ç½®**

```sql
-- æ¢å¤å­—æ®µ
INSERT INTO tenant_field_display_configs
SELECT * FROM temp_backup;

DROP TEMPORARY TABLE temp_backup;
```

- å†æ¬¡åˆ·æ–°æµè§ˆå™¨
- "Appåç§°"åˆ—åº”è¯¥é‡æ–°å‡ºç°

**âœ… éªŒè¯é€šè¿‡**: å­—æ®µå±•ç¤ºå®Œå…¨ç”±æ•°æ®åº“æ§åˆ¶ï¼Œä¸æ˜¯Mockæ•°æ®ã€‚

---

### éªŒè¯2: ä¿¡æ¯æ’åº

#### æµ‹è¯•æ–¹æ³•

ä¿®æ”¹å­—æ®µçš„ `sort_order`ï¼Œè§‚å¯Ÿåˆ—é¡ºåºæ˜¯å¦æ”¹å˜ã€‚

#### æ“ä½œæ­¥éª¤

**1. æŸ¥çœ‹å½“å‰æ’åº**

```sql
SELECT sort_order, field_key, field_name
FROM tenant_field_display_configs
WHERE tenant_id = 1 
  AND scene_type = 'admin_case_list'
ORDER BY sort_order;
```

**å½“å‰é¡ºåº**:
1. case_code (æ¡ˆä»¶ç¼–å·)
2. user_name (å®¢æˆ·å§“å)
3. mobile (æ‰‹æœºå·ç )
4. loan_amount (è´·æ¬¾é‡‘é¢)
5. outstanding_amount (æœªè¿˜é‡‘é¢)
6. ... ç­‰ç­‰

**2. ä¿®æ”¹æ’åºé¡ºåº**

å°†"å®¢æˆ·å§“å"ç§»åˆ°æœ€åï¼š

```sql
UPDATE tenant_field_display_configs
SET sort_order = 999
WHERE tenant_id = 1 
  AND scene_type = 'admin_case_list'
  AND field_key = 'user_name';
```

**3. éªŒè¯å‰ç«¯**

- åˆ·æ–°æµè§ˆå™¨
- è§‚å¯Ÿè¡¨æ ¼åˆ—é¡ºåº

**é¢„æœŸç»“æœ**:
- âœ… "å®¢æˆ·å§“å"åˆ—ç§»åˆ°è¡¨æ ¼æœ€å³è¾¹
- âœ… å…¶ä»–åˆ—é¡ºåºä¸å˜

**4. æ¢å¤åŸå§‹é¡ºåº**

```sql
UPDATE tenant_field_display_configs
SET sort_order = 2
WHERE tenant_id = 1 
  AND scene_type = 'admin_case_list'
  AND field_key = 'user_name';
```

**âœ… éªŒè¯é€šè¿‡**: åˆ—é¡ºåºå®Œå…¨ç”±æ•°æ®åº“çš„ `sort_order` æ§åˆ¶ã€‚

---

### éªŒè¯3: æœç´¢åŠŸèƒ½

#### æµ‹è¯•æ–¹æ³•

ä¿®æ”¹å­—æ®µçš„ `is_searchable` æ ‡è®°ï¼Œè§‚å¯Ÿæœç´¢æ¡†é€‰é¡¹æ˜¯å¦æ”¹å˜ã€‚

#### æ“ä½œæ­¥éª¤

**1. æŸ¥çœ‹å½“å‰å¯æœç´¢å­—æ®µ**

```sql
SELECT field_key, field_name, is_searchable
FROM tenant_field_display_configs
WHERE tenant_id = 1 
  AND scene_type = 'admin_case_list'
  AND is_searchable = 1;
```

**å½“å‰å¯æœç´¢**: 
- case_code (æ¡ˆä»¶ç¼–å·)
- user_name (å®¢æˆ·å§“å)
- mobile (æ‰‹æœºå·ç )
- product_name (äº§å“åç§°)
- app_name (Appåç§°)

**2. ç¦ç”¨"å®¢æˆ·å§“å"æœç´¢**

```sql
UPDATE tenant_field_display_configs
SET is_searchable = 0
WHERE tenant_id = 1 
  AND scene_type = 'admin_case_list'
  AND field_key = 'user_name';
```

**3. éªŒè¯å‰ç«¯**

- åˆ·æ–°æµè§ˆå™¨
- æŸ¥çœ‹æœç´¢æ¡†æˆ–ç­›é€‰å™¨ä¸­çš„æœç´¢å­—æ®µé€‰é¡¹

**é¢„æœŸç»“æœ**:
- âŒ "å®¢æˆ·å§“å"ä¸å†å‡ºç°åœ¨å¯æœç´¢å­—æ®µä¸­
- âœ… å…¶ä»–å¯æœç´¢å­—æ®µæ­£å¸¸

**4. æ¢å¤è®¾ç½®**

```sql
UPDATE tenant_field_display_configs
SET is_searchable = 1
WHERE tenant_id = 1 
  AND scene_type = 'admin_case_list'
  AND field_key = 'user_name';
```

**âœ… éªŒè¯é€šè¿‡**: æœç´¢åŠŸèƒ½å®Œå…¨ç”±æ•°æ®åº“çš„ `is_searchable` æ§åˆ¶ã€‚

---

### éªŒè¯4: ç­›é€‰åŠŸèƒ½

#### æµ‹è¯•æ–¹æ³•

ä¿®æ”¹å­—æ®µçš„ `is_filterable` æ ‡è®°ï¼Œè§‚å¯Ÿç­›é€‰å™¨é€‰é¡¹æ˜¯å¦æ”¹å˜ã€‚

#### æ“ä½œæ­¥éª¤

**1. æŸ¥çœ‹å½“å‰å¯ç­›é€‰å­—æ®µ**

```sql
SELECT field_key, field_name, is_filterable
FROM tenant_field_display_configs
WHERE tenant_id = 1 
  AND scene_type = 'admin_case_list'
  AND is_filterable = 1;
```

**å½“å‰å¯ç­›é€‰**: 
- case_status (æ¡ˆä»¶çŠ¶æ€)

**2. æ·»åŠ "äº§å“åç§°"ä¸ºå¯ç­›é€‰**

```sql
UPDATE tenant_field_display_configs
SET is_filterable = 1
WHERE tenant_id = 1 
  AND scene_type = 'admin_case_list'
  AND field_key = 'product_name';
```

**3. éªŒè¯å‰ç«¯**

- åˆ·æ–°æµè§ˆå™¨
- æŸ¥çœ‹ç­›é€‰å™¨åŒºåŸŸ

**é¢„æœŸç»“æœ**:
- âœ… åº”è¯¥å‡ºç°"äº§å“åç§°"çš„ç­›é€‰ä¸‹æ‹‰æ¡†
- âœ… å¯ä»¥æŒ‰äº§å“åç§°ç­›é€‰æ¡ˆä»¶

**4. æ¢å¤è®¾ç½®**

```sql
UPDATE tenant_field_display_configs
SET is_filterable = 0
WHERE tenant_id = 1 
  AND scene_type = 'admin_case_list'
  AND field_key = 'product_name';
```

**âœ… éªŒè¯é€šè¿‡**: ç­›é€‰åŠŸèƒ½å®Œå…¨ç”±æ•°æ®åº“çš„ `is_filterable` æ§åˆ¶ã€‚

---

### éªŒè¯5: èŒƒå›´æ£€ç´¢

#### æµ‹è¯•æ–¹æ³•

ä¿®æ”¹å­—æ®µçš„ `is_range_searchable` æ ‡è®°ï¼Œè§‚å¯ŸèŒƒå›´æ£€ç´¢é€‰é¡¹æ˜¯å¦æ”¹å˜ã€‚

#### æ“ä½œæ­¥éª¤

**1. æŸ¥çœ‹å½“å‰å¯èŒƒå›´æ£€ç´¢å­—æ®µ**

```sql
SELECT field_key, field_name, field_data_type, is_range_searchable
FROM tenant_field_display_configs
WHERE tenant_id = 1 
  AND scene_type = 'admin_case_list'
  AND is_range_searchable = 1;
```

**å½“å‰å¯èŒƒå›´æ£€ç´¢**: 
- loan_amount (è´·æ¬¾é‡‘é¢) - Decimal
- outstanding_amount (æœªè¿˜é‡‘é¢) - Decimal
- overdue_days (é€¾æœŸå¤©æ•°) - Integer
- due_date (åˆ°æœŸæ—¥æœŸ) - Date

**2. ç¦ç”¨"é€¾æœŸå¤©æ•°"èŒƒå›´æ£€ç´¢**

```sql
UPDATE tenant_field_display_configs
SET is_range_searchable = 0
WHERE tenant_id = 1 
  AND scene_type = 'admin_case_list'
  AND field_key = 'overdue_days';
```

**3. éªŒè¯å‰ç«¯**

- åˆ·æ–°æµè§ˆå™¨
- æŸ¥çœ‹èŒƒå›´æ£€ç´¢åŒºåŸŸ

**é¢„æœŸç»“æœ**:
- âŒ "é€¾æœŸå¤©æ•°"ä¸å†æœ‰èŒƒå›´è¾“å…¥æ¡†
- âœ… å…¶ä»–æ•°å­—/æ—¥æœŸå­—æ®µçš„èŒƒå›´æ£€ç´¢æ­£å¸¸

**4. æ¢å¤è®¾ç½®**

```sql
UPDATE tenant_field_display_configs
SET is_range_searchable = 1
WHERE tenant_id = 1 
  AND scene_type = 'admin_case_list'
  AND field_key = 'overdue_days';
```

**âœ… éªŒè¯é€šè¿‡**: èŒƒå›´æ£€ç´¢å®Œå…¨ç”±æ•°æ®åº“çš„ `is_range_searchable` æ§åˆ¶ã€‚

---

### éªŒè¯6: å­—æ®µåç§°å’Œå®½åº¦

#### æµ‹è¯•æ–¹æ³•

ä¿®æ”¹å­—æ®µçš„ `field_name` å’Œ `display_width`ï¼Œè§‚å¯Ÿè¡¨æ ¼æ˜¾ç¤ºæ˜¯å¦æ”¹å˜ã€‚

#### æ“ä½œæ­¥éª¤

**1. ä¿®æ”¹å­—æ®µåç§°å’Œå®½åº¦**

```sql
UPDATE tenant_field_display_configs
SET 
    field_name = 'ğŸ¦ å®¢æˆ·å§“åï¼ˆæµ‹è¯•ï¼‰',
    display_width = 300
WHERE tenant_id = 1 
  AND scene_type = 'admin_case_list'
  AND field_key = 'user_name';
```

**2. éªŒè¯å‰ç«¯**

- åˆ·æ–°æµè§ˆå™¨
- è§‚å¯Ÿè¡¨æ ¼

**é¢„æœŸç»“æœ**:
- âœ… åˆ—æ ‡é¢˜æ˜¾ç¤ºä¸º "ğŸ¦ å®¢æˆ·å§“åï¼ˆæµ‹è¯•ï¼‰"
- âœ… è¯¥åˆ—å®½åº¦å˜ä¸º 300px

**3. æ¢å¤è®¾ç½®**

```sql
UPDATE tenant_field_display_configs
SET 
    field_name = 'å®¢æˆ·å§“å',
    display_width = 120
WHERE tenant_id = 1 
  AND scene_type = 'admin_case_list'
  AND field_key = 'user_name';
```

**âœ… éªŒè¯é€šè¿‡**: å­—æ®µåç§°å’Œå®½åº¦å®Œå…¨ç”±æ•°æ®åº“æ§åˆ¶ã€‚

---

### éªŒè¯7: ä¸‰ä¸ªåœºæ™¯ç‹¬ç«‹é…ç½®

#### æµ‹è¯•æ–¹æ³•

éªŒè¯ä¸‰ä¸ªåœºæ™¯ï¼ˆæ§å°åˆ—è¡¨ã€IMåˆ—è¡¨ã€IMè¯¦æƒ…ï¼‰çš„é…ç½®äº’ä¸å½±å“ã€‚

#### æ“ä½œæ­¥éª¤

**1. ä¿®æ”¹æ§å°æ¡ˆä»¶åˆ—è¡¨é…ç½®**

```sql
UPDATE tenant_field_display_configs
SET field_name = 'customer_name (æ§å°)'
WHERE tenant_id = 1 
  AND scene_type = 'admin_case_list'
  AND field_key = 'user_name';
```

**2. éªŒè¯å‰ç«¯**

- åˆ·æ–°æµè§ˆå™¨
- åˆ†åˆ«æŸ¥çœ‹:
  - æ§å°æ¡ˆä»¶åˆ—è¡¨ (`æ¡ˆä»¶ç®¡ç† â†’ æ¡ˆä»¶åˆ—è¡¨`)
  - IMç«¯æ¡ˆä»¶åˆ—è¡¨ (ä½¿ç”¨å‚¬å‘˜è´¦å·ç™»å½•)

**é¢„æœŸç»“æœ**:
- âœ… æ§å°æ¡ˆä»¶åˆ—è¡¨: æ˜¾ç¤º "customer_name (æ§å°)"
- âœ… IMç«¯æ¡ˆä»¶åˆ—è¡¨: ä»ç„¶æ˜¾ç¤ºåŸæ¥çš„ "å®¢æˆ·å§“å"
- âœ… ä¸¤ä¸ªåœºæ™¯çš„é…ç½®äº’ä¸å½±å“

**3. æ¢å¤è®¾ç½®**

```sql
UPDATE tenant_field_display_configs
SET field_name = 'å®¢æˆ·å§“å'
WHERE tenant_id = 1 
  AND scene_type = 'admin_case_list'
  AND field_key = 'user_name';
```

**âœ… éªŒè¯é€šè¿‡**: ä¸‰ä¸ªåœºæ™¯çš„é…ç½®å®Œå…¨ç‹¬ç«‹ï¼Œäº’ä¸å½±å“ã€‚

---

## ğŸ“Š éªŒè¯è®°å½•è¡¨

### æ§å°æ¡ˆä»¶åˆ—è¡¨ (admin_case_list)

| åŠŸèƒ½ç‚¹ | éªŒè¯æ–¹æ³• | éªŒè¯ç»“æœ | éªŒè¯æ—¥æœŸ | éªŒè¯äºº |
|--------|----------|----------|----------|--------|
| å­—æ®µå±•ç¤ºä¸å¦ | åˆ é™¤å­—æ®µé…ç½®ï¼Œè§‚å¯Ÿåˆ—æ˜¯å¦æ¶ˆå¤± | â³ å¾…éªŒè¯ | - | - |
| å­—æ®µæ’åº | ä¿®æ”¹sort_orderï¼Œè§‚å¯Ÿåˆ—é¡ºåº | â³ å¾…éªŒè¯ | - | - |
| å­—æ®µå®½åº¦ | ä¿®æ”¹display_widthï¼Œè§‚å¯Ÿåˆ—å®½ | â³ å¾…éªŒè¯ | - | - |
| å¯æœç´¢å­—æ®µ | ä¿®æ”¹is_searchableï¼Œè§‚å¯Ÿæœç´¢é€‰é¡¹ | â³ å¾…éªŒè¯ | - | - |
| å¯ç­›é€‰å­—æ®µ | ä¿®æ”¹is_filterableï¼Œè§‚å¯Ÿç­›é€‰å™¨ | â³ å¾…éªŒè¯ | - | - |
| å¯èŒƒå›´æ£€ç´¢ | ä¿®æ”¹is_range_searchableï¼Œè§‚å¯ŸèŒƒå›´è¾“å…¥ | â³ å¾…éªŒè¯ | - | - |

### IMç«¯æ¡ˆä»¶åˆ—è¡¨ (collector_case_list)

| åŠŸèƒ½ç‚¹ | éªŒè¯æ–¹æ³• | éªŒè¯ç»“æœ | éªŒè¯æ—¥æœŸ | éªŒè¯äºº |
|--------|----------|----------|----------|--------|
| å­—æ®µå±•ç¤ºä¸å¦ | åˆ é™¤å­—æ®µé…ç½®ï¼Œè§‚å¯Ÿåˆ—æ˜¯å¦æ¶ˆå¤± | â³ å¾…éªŒè¯ | - | - |
| å­—æ®µæ’åº | ä¿®æ”¹sort_orderï¼Œè§‚å¯Ÿåˆ—é¡ºåº | â³ å¾…éªŒè¯ | - | - |
| åœºæ™¯ç‹¬ç«‹æ€§ | ä¿®æ”¹é…ç½®ï¼Œä¸å½±å“å…¶ä»–åœºæ™¯ | â³ å¾…éªŒè¯ | - | - |

### IMç«¯æ¡ˆä»¶è¯¦æƒ… (collector_case_detail)

| åŠŸèƒ½ç‚¹ | éªŒè¯æ–¹æ³• | éªŒè¯ç»“æœ | éªŒè¯æ—¥æœŸ | éªŒè¯äºº |
|--------|----------|----------|----------|--------|
| å­—æ®µå±•ç¤ºä¸å¦ | åˆ é™¤å­—æ®µé…ç½®ï¼Œè§‚å¯Ÿå­—æ®µæ˜¯å¦æ¶ˆå¤± | â³ å¾…éªŒè¯ | - | - |
| å­—æ®µæ’åº | ä¿®æ”¹sort_orderï¼Œè§‚å¯Ÿå­—æ®µé¡ºåº | â³ å¾…éªŒè¯ | - | - |
| å­—æ®µåˆ†ç»„ | æŒ‰field_sourceåˆ†ç»„æ˜¾ç¤º | â³ å¾…éªŒè¯ | - | - |

---

## ğŸ¯ å¿«é€ŸéªŒè¯SQLè„šæœ¬

### ä¸€é”®æµ‹è¯•è„šæœ¬

```sql
-- ============================================
-- å¿«é€ŸéªŒè¯ç”²æ–¹å­—æ®µé…ç½®åŠŸèƒ½
-- ============================================

-- 1. æŸ¥çœ‹å½“å‰é…ç½®
SELECT 
    scene_type,
    field_key,
    field_name,
    sort_order,
    is_searchable,
    is_filterable
FROM tenant_field_display_configs
WHERE tenant_id = 1 
  AND scene_type = 'admin_case_list'
ORDER BY sort_order;

-- 2. ä¿®æ”¹æµ‹è¯•ï¼ˆæ³¨é‡Šæ‰è¿™éƒ¨åˆ†ï¼Œéœ€è¦æ—¶å†æ‰§è¡Œï¼‰
/*
UPDATE tenant_field_display_configs
SET 
    field_name = 'customer_name (æµ‹è¯•ä¿®æ”¹)',
    sort_order = 999,
    display_width = 300
WHERE tenant_id = 1 
  AND scene_type = 'admin_case_list'
  AND field_key = 'user_name';
*/

-- 3. æ¢å¤åŸæ ·ï¼ˆæ‰§è¡Œå®Œæµ‹è¯•åè¿è¡Œï¼‰
/*
UPDATE tenant_field_display_configs
SET 
    field_name = 'å®¢æˆ·å§“å',
    sort_order = 2,
    display_width = 120
WHERE tenant_id = 1 
  AND scene_type = 'admin_case_list'
  AND field_key = 'user_name';
*/
```

---

## âœ… éªŒè¯ç»“è®º

### æ¶æ„å±‚é¢ï¼ˆå·²ç¡®è®¤ï¼‰

1. âœ… **æ•°æ®åº“è¡¨ç»“æ„å®Œæ•´** - åŒ…å«æ‰€æœ‰éœ€è¦çš„å­—æ®µ
2. âœ… **åˆå§‹åŒ–æ•°æ®å­˜åœ¨** - ä¸‰ä¸ªåœºæ™¯éƒ½æœ‰é…ç½®
3. âœ… **åç«¯ä»æ•°æ®åº“è¯»å–** - ä½¿ç”¨MyBatis-Plusï¼Œä¸æ˜¯Mock
4. âœ… **å‰ç«¯ä½¿ç”¨Hook** - æ‰€æœ‰é¡µé¢éƒ½ä½¿ç”¨ `useFieldDisplayConfig`
5. âœ… **åŠ¨æ€ç»„ä»¶å®ç°** - `DynamicCaseTable` å’Œ `DynamicCaseDetail`

### åŠŸèƒ½å±‚é¢ï¼ˆéœ€è¦å®é™…è¿è¡ŒéªŒè¯ï¼‰

**æ§å°æ¡ˆä»¶åˆ—è¡¨**:
- â³ å­—æ®µå±•ç¤ºä¸å¦
- â³ å­—æ®µæ’åº
- â³ æœç´¢åŠŸèƒ½
- â³ ç­›é€‰åŠŸèƒ½
- â³ èŒƒå›´æ£€ç´¢

**IMç«¯æ¡ˆä»¶åˆ—è¡¨**:
- â³ å­—æ®µå±•ç¤ºä¸å¦
- â³ å­—æ®µæ’åº
- â³ åœºæ™¯ç‹¬ç«‹æ€§

**IMç«¯æ¡ˆä»¶è¯¦æƒ…**:
- â³ å­—æ®µå±•ç¤ºä¸å¦
- â³ å­—æ®µæ’åº
- â³ å­—æ®µåˆ†ç»„

---

## ğŸš€ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³è¡ŒåŠ¨

1. **å¯åŠ¨æœåŠ¡**
   ```bash
   # åç«¯
   cd backend-java && ./start.sh
   
   # å‰ç«¯
   cd frontend && npm run dev
   ```

2. **æ‰§è¡ŒéªŒè¯**
   - æŒ‰ç…§æœ¬æ–‡æ¡£çš„æ­¥éª¤é€ä¸€éªŒè¯
   - è®°å½•éªŒè¯ç»“æœåˆ°ä¸Šé¢çš„è¡¨æ ¼ä¸­

3. **æŠ¥å‘Šé—®é¢˜**
   - å¦‚æœå‘ç°ä»»ä½•é—®é¢˜ï¼Œè®°å½•è¯¦ç»†çš„å¤ç°æ­¥éª¤
   - æˆªå›¾ä¿å­˜è¯æ®

### é•¿æœŸä¼˜åŒ–

1. **æ·»åŠ é…ç½®ç•Œé¢**
   - åœ¨å‰ç«¯ç®¡ç†åå°æ·»åŠ "å­—æ®µé…ç½®ç®¡ç†"é¡µé¢
   - æ”¯æŒæ‹–æ‹½æ’åºã€å‹¾é€‰å¯ç”¨/ç¦ç”¨

2. **å¢å¼ºæƒé™æ§åˆ¶**
   - åªå…è®¸è¶…çº§ç®¡ç†å‘˜å’Œç”²æ–¹ç®¡ç†å‘˜ä¿®æ”¹é…ç½®
   - æ™®é€šå‚¬å‘˜åªèƒ½æŸ¥çœ‹

3. **æ·»åŠ å®¡è®¡æ—¥å¿—**
   - è®°å½•è°åœ¨ä»€ä¹ˆæ—¶å€™ä¿®æ”¹äº†ä»€ä¹ˆé…ç½®
   - æ”¯æŒé…ç½®å›æ»š

---

## ğŸ“š å‚è€ƒæ–‡æ¡£

- [æ•°æ®åº“è¡¨ç»“æ„](../../backend-java/src/main/resources/db/migration/schema.sql)
- [åˆå§‹åŒ–æ•°æ®](../../backend-java/src/main/resources/db/data/init_field_display_configs.sql)
- [åç«¯Controller](../../backend-java/src/main/java/com/cco/controller/FieldDisplayConfigController.java)
- [å‰ç«¯Hook](../../frontend/src/composables/useFieldDisplayConfig.ts)

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**åˆ›å»ºæ—¥æœŸ**: 2025-11-24  
**çŠ¶æ€**: âœ… æ¶æ„éªŒè¯å®Œæˆï¼Œâ³ åŠŸèƒ½éªŒè¯å¾…æ‰§è¡Œ

