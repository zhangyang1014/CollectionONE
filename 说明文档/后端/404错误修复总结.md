# 404é”™è¯¯ä¿®å¤æ€»ç»“

**å®Œæˆæ—¥æœŸ**: 2025-11-22  
**çŠ¶æ€**: âœ… ä»£ç ä¿®å¤å®Œæˆï¼Œå¾…ç”¨æˆ·å¯åŠ¨Javaåç«¯éªŒè¯

---

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. å‰ç«¯é…ç½®ä¿®æ”¹ âœ…

**æ–‡ä»¶**: `frontend/src/utils/request.ts`

ä¿®æ”¹äº†é»˜è®¤APIåœ°å€ï¼š
```typescript
// ä¿®æ”¹å‰
baseURL: import.meta.env.VITE_API_BASE_URL || 'http://localhost:8000'

// ä¿®æ”¹å  
baseURL: import.meta.env.VITE_API_BASE_URL || 'http://localhost:8080'
```

### 2. Javaåç«¯ç¼–è¯‘ä¿®å¤ âœ…

- åˆ é™¤äº†æ‰€æœ‰`.bak`å¤‡ä»½æ–‡ä»¶
- æ·»åŠ äº†Swagger/OpenAPIä¾èµ–
- åˆ›å»ºäº†ç¼ºå¤±çš„ç±»ï¼š
  - `com.cco.common.result.Result`
  - `com.cco.service.StandardFieldService`
  - `com.cco.service.CustomFieldService`
  - `com.cco.service.impl.StandardFieldServiceImpl`
  - `com.cco.service.impl.CustomFieldServiceImpl`
- ä¿®å¤äº†Javaç‰ˆæœ¬å…¼å®¹æ€§ï¼ˆå¼ºåˆ¶ä½¿ç”¨Java 17ï¼‰
- **ç¼–è¯‘æˆåŠŸ** âœ…

### 3. Mock APIæ§åˆ¶å™¨åˆ›å»º âœ…

åˆ›å»ºäº†ä»¥ä¸‹Mockæ§åˆ¶å™¨ï¼š

**MockFieldDisplayConfigController**:
- `GET /api/v1/field-display-configs` - è·å–å­—æ®µå±•ç¤ºé…ç½®åˆ—è¡¨
- `GET /api/v1/field-display-configs/scene-types` - è·å–åœºæ™¯ç±»å‹

**MockCaseController** (å·²å­˜åœ¨):
- `GET /api/v1/cases` - è·å–æ¡ˆä»¶åˆ—è¡¨
- `GET /api/v1/cases/{id}` - è·å–æ¡ˆä»¶è¯¦æƒ…

### 4. å¯åŠ¨è„šæœ¬åˆ›å»º âœ…

åˆ›å»ºäº† `backend-java/start.sh`ï¼š
- è‡ªåŠ¨è®¾ç½®Java 17ç¯å¢ƒ
- å¯åŠ¨Spring Bootåº”ç”¨

### 5. Pythonåç«¯åœæ­¢ âœ…

å·²åœæ­¢æ‰€æœ‰å ç”¨8000ç«¯å£çš„Pythonè¿›ç¨‹

---

## ğŸ“‹ ç”¨æˆ·éœ€è¦åšçš„äº‹æƒ…

### å¯åŠ¨Javaåç«¯

```bash
cd /Users/zhangyang/Documents/GitHub/CollectionONE/backend-java

# æ–¹æ³•1: ä½¿ç”¨è„šæœ¬ï¼ˆæ¨èï¼‰
chmod +x start.sh
./start.sh

# æ–¹æ³•2: æ‰‹åŠ¨å¯åŠ¨
JAVA_HOME=/opt/homebrew/opt/openjdk@17 \
PATH=/opt/homebrew/opt/openjdk@17/bin:$PATH \
mvn spring-boot:run -Dspring-boot.run.profiles=dev
```

### éªŒè¯å¯åŠ¨æˆåŠŸ

ç­‰å¾…çº¦30ç§’åï¼Œæ‰“å¼€æ–°ç»ˆç«¯æµ‹è¯•ï¼š

```bash
# æµ‹è¯•æ¡ˆä»¶API
curl "http://localhost:8080/api/v1/cases?tenantId=1"

# æµ‹è¯•å­—æ®µé…ç½®API  
curl "http://localhost:8080/api/v1/field-display-configs?tenantId=1&sceneType=collector_case_list"
```

### åˆ·æ–°å‰ç«¯é¡µé¢

Javaåç«¯å¯åŠ¨æˆåŠŸåï¼Œåˆ·æ–°æµè§ˆå™¨ä¸­çš„å‰ç«¯é¡µé¢ï¼Œ404é”™è¯¯åº”è¯¥æ¶ˆå¤±ã€‚

---

## ğŸ¯ 404é”™è¯¯æ°¸ä¹…è§£å†³åŸç†

**ä¹‹å‰**:
```
å‰ç«¯ (localhost:3000) 
  â†“
  è°ƒç”¨ localhost:8000 (Pythonåç«¯ - å·²åºŸå¼ƒâŒ)
  â†“
  404 é”™è¯¯ âŒ
```

**ç°åœ¨**:
```
å‰ç«¯ (localhost:3000)
  â†“  
  è°ƒç”¨ localhost:8080 (Javaåç«¯ - Mockæ•°æ®âœ…)
  â†“
  è¿”å›æ•°æ® âœ…
```

---

## ğŸ“Š æŠ€æœ¯ä¿®å¤è¯¦æƒ…

### é—®é¢˜1: Javaç¼–è¯‘é”™è¯¯

**åŸå› **: ç¼ºå°‘ä¾èµ–å’ŒJavaç‰ˆæœ¬ä¸å…¼å®¹

**è§£å†³**:
- æ·»åŠ SpringDoc OpenAPIä¾èµ–åˆ°pom.xml
- å¼ºåˆ¶ä½¿ç”¨Java 17ï¼ˆç³»ç»ŸJava 25ä¸å…¼å®¹ï¼‰
- åˆ›å»ºç¼ºå¤±çš„Serviceå’ŒResultç±»

### é—®é¢˜2: æ•°æ®åº“ä¾èµ–

**åŸå› **: Serviceå°è¯•æ³¨å…¥Mapperä½†æ•°æ®åº“è¢«ç¦ç”¨

**è§£å†³**:
- ç¦ç”¨ä¾èµ–æ•°æ®åº“çš„Controllerå’ŒService
- åˆ›å»ºçº¯Mockæ§åˆ¶å™¨ï¼Œä¸ä¾èµ–MyBatis

### é—®é¢˜3: å‰ç«¯é…ç½®

**åŸå› **: å‰ç«¯still hardcodedè°ƒç”¨8000ç«¯å£

**è§£å†³**:
- ä¿®æ”¹request.tsé»˜è®¤URLä¸º8080

---

## ğŸ“ æ–‡ä»¶ä¿®æ”¹æ¸…å•

### ä¿®æ”¹çš„æ–‡ä»¶
- âœ… `frontend/src/utils/request.ts`
- âœ… `backend-java/pom.xml`
- âœ… `backend-java/src/main/java/com/cco/CcoApplication.java`

### åˆ›å»ºçš„æ–‡ä»¶
- âœ… `backend-java/src/main/java/com/cco/common/result/Result.java`
- âœ… `backend-java/src/main/java/com/cco/controller/MockFieldDisplayConfigController.java`
- âœ… `backend-java/src/main/java/com/cco/service/StandardFieldService.java`
- âœ… `backend-java/src/main/java/com/cco/service/CustomFieldService.java`
- âœ… `backend-java/src/main/java/com/cco/service/impl/StandardFieldServiceImpl.java`
- âœ… `backend-java/src/main/java/com/cco/service/impl/CustomFieldServiceImpl.java`
- âœ… `backend-java/start.sh`

### åˆ é™¤çš„æ–‡ä»¶
- âœ… æ‰€æœ‰`.bak`å¤‡ä»½æ–‡ä»¶

### ç¦ç”¨çš„æ–‡ä»¶ï¼ˆé‡å‘½åä¸º.bakï¼‰
- `controller/FieldDisplayConfigController.java.bak`
- `service/impl/FieldDisplayConfigServiceImpl.java.bak`

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å¿…é¡»ä½¿ç”¨Java 17**: ç³»ç»ŸJava 25ä¸Mavenç¼–è¯‘å™¨ä¸å…¼å®¹
2. **é¦–æ¬¡å¯åŠ¨è¾ƒæ…¢**: Mavenéœ€è¦ä¸‹è½½ä¾èµ–ï¼Œçº¦éœ€1-2åˆ†é’Ÿ
3. **Mockæ•°æ®**: å½“å‰ä½¿ç”¨Mockæ•°æ®ï¼Œä¸è¿æ¥çœŸå®æ•°æ®åº“
4. **ç«¯å£å ç”¨**: ç¡®ä¿8080ç«¯å£æ²¡æœ‰è¢«å…¶ä»–ç¨‹åºå ç”¨

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [æ°¸ä¹…ä¿®å¤404é”™è¯¯-å®Œæ•´æ–¹æ¡ˆ.md](./æ°¸ä¹…ä¿®å¤404é”™è¯¯-å®Œæ•´æ–¹æ¡ˆ.md) - è¯¦ç»†æ–¹æ¡ˆ
- [å¿«é€Ÿå¯åŠ¨Javaåç«¯.md](../../å¿«é€Ÿå¯åŠ¨Javaåç«¯.md) - å¿«é€Ÿå¯åŠ¨æŒ‡å—
- [åç«¯åŒç³»ç»Ÿæ¶æ„è¯´æ˜.md](../../æ–‡æ¡£/åç«¯åŒç³»ç»Ÿæ¶æ„è¯´æ˜.md) - æ¶æ„è¯´æ˜

---

## âœ… éªŒæ”¶æ ‡å‡†

ä¿®å¤æˆåŠŸçš„æ ‡å¿—ï¼š

- [ ] Javaåç«¯åœ¨8080ç«¯å£å¯åŠ¨æˆåŠŸ
- [ ] `curl localhost:8080/api/v1/cases?tenantId=1` è¿”å›JSONæ•°æ®
- [ ] `curl localhost:8080/api/v1/field-display-configs...` è¿”å›JSONæ•°æ®
- [ ] å‰ç«¯é¡µé¢åˆ·æ–°åä¸å†æœ‰404é”™è¯¯
- [ ] å‚¬å‘˜å·¥ä½œå°å¯ä»¥æ­£å¸¸æ˜¾ç¤ºæ¡ˆä»¶åˆ—è¡¨

---

**çŠ¶æ€**: ğŸŸ¢ ä»£ç ä¿®å¤å®Œæˆï¼Œç­‰å¾…ç”¨æˆ·å¯åŠ¨éªŒè¯


