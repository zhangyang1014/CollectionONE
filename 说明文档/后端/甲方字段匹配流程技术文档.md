# ç”²æ–¹å­—æ®µåŒ¹é…æµç¨‹æŠ€æœ¯æ–‡æ¡£

## ğŸ“‹ æ–‡æ¡£æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†æè¿°äº†CCOå‚¬æ”¶ç³»ç»Ÿä¸­ç”²æ–¹å­—æ®µåŒ¹é…çš„å®Œæ•´æŠ€æœ¯æµç¨‹ï¼ŒåŒ…æ‹¬æ ‡å‡†å­—æ®µé…ç½®ã€æ•°æ®åŒæ­¥æ¥å£ã€å­—æ®µæ˜ å°„æœºåˆ¶ä»¥åŠå¼‚å¸¸å¤„ç†æ–¹æ¡ˆã€‚

**ç‰ˆæœ¬ï¼š** v1.0.0  
**æ—¥æœŸï¼š** 2024-11-11  
**çŠ¶æ€ï¼š** âœ… æŠ€æœ¯è®¾è®¡å®Œæˆ

---

## ä¸€ã€ç³»ç»Ÿæ¶æ„æ¦‚è¿°

### 1.1 æ ¸å¿ƒæ¦‚å¿µ

| æ¦‚å¿µ | è¯´æ˜ | ç‰¹ç‚¹ |
|------|------|------|
| **æ ‡å‡†å­—æ®µ** | ç³»ç»Ÿå®˜æ–¹å®šä¹‰çš„åŸºç¡€å­—æ®µé›†åˆ | æ‰€æœ‰ç”²æ–¹è‡ªåŠ¨ç»§æ‰¿ï¼Œå¿…å¡«å­—æ®µå¿…é¡»æ˜ å°„ |
| **ç”²æ–¹å­—æ®µ** | ç”²æ–¹é€šè¿‡APIæ¨é€çš„å­—æ®µæ•°æ® | åŒ…å«å­—æ®µå®šä¹‰å’Œå­—æ®µå€¼ï¼Œå¸¦ç‰ˆæœ¬æ—¶é—´æˆ³ |
| **å­—æ®µæ˜ å°„** | ç”²æ–¹å­—æ®µä¸æ ‡å‡†å­—æ®µçš„å¯¹åº”å…³ç³» | æ”¯æŒè‡ªåŠ¨åŒ¹é…å’Œæ‰‹åŠ¨é…ç½® |
| **æ‹“å±•å­—æ®µ** | ç”²æ–¹ç‰¹æœ‰ã€ä¸æ˜ å°„æ ‡å‡†å­—æ®µçš„å­—æ®µ | ç‹¬ç«‹ç®¡ç†ï¼Œå¯é…ç½®åˆ†ç»„å’Œéšç§æ ‡ç­¾ |
| **æœªä½¿ç”¨å­—æ®µ** | ç”²æ–¹æ¨é€ä½†æœªæ˜ å°„çš„å­—æ®µ | éœ€è¦å¼ºåˆ¶æé†’å¤„ç† |

### 1.2 æ•°æ®æµè½¬å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é˜¶æ®µ1ï¼šæ ‡å‡†å­—æ®µé…ç½®ï¼ˆå®˜æ–¹ï¼‰                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ æ ‡å‡†å­—æ®µç®¡ç†                                          â”‚   â”‚
â”‚  â”‚ - å®šä¹‰å­—æ®µåç§°ã€æ ‡è¯†ã€ç±»å‹                            â”‚   â”‚
â”‚  â”‚ - é…ç½®å­—æ®µåˆ†ç»„ã€æ˜¯å¦å¿…å¡«                              â”‚   â”‚
â”‚  â”‚ - è®¾ç½®æšä¸¾å€¼ï¼ˆå¦‚é€‚ç”¨ï¼‰                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é˜¶æ®µ2ï¼šæä¾›åŒæ­¥æ¥å£å’ŒJSONæ¨¡æ¿ï¼ˆå®˜æ–¹ï¼‰                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ POST /api/v1/tenants/{tenant_code}/fields-sync       â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚ JSONæ¨¡æ¿æ ¼å¼ï¼š                                        â”‚   â”‚
â”‚  â”‚ {                                                     â”‚   â”‚
â”‚  â”‚   "version": "1.0",                                  â”‚   â”‚
â”‚  â”‚   "sync_time": "2024-11-11T10:30:00Z",               â”‚   â”‚
â”‚  â”‚   "fields": [                                         â”‚   â”‚
â”‚  â”‚     {                                                 â”‚   â”‚
â”‚  â”‚       "field_key": "USER_ID",                         â”‚   â”‚
â”‚  â”‚       "field_name": "ç”¨æˆ·ID",                         â”‚   â”‚
â”‚  â”‚       "field_type": "String",                         â”‚   â”‚
â”‚  â”‚       "updated_at": "2024-11-11T10:30:00Z"            â”‚   â”‚
â”‚  â”‚     }                                                 â”‚   â”‚
â”‚  â”‚   ]                                                   â”‚   â”‚
â”‚  â”‚ }                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é˜¶æ®µ3ï¼šç”²æ–¹å®šæœŸè°ƒç”¨æ¥å£ï¼ˆç”²æ–¹ï¼‰                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ç”²æ–¹ç³»ç»Ÿ                                              â”‚   â”‚
â”‚  â”‚ - å®šæœŸï¼ˆå¦‚æ¯å¤©/æ¯å°æ—¶ï¼‰è°ƒç”¨åŒæ­¥æ¥å£                  â”‚   â”‚
â”‚  â”‚ - å‘é€å­—æ®µå®šä¹‰JSON                                    â”‚   â”‚
â”‚  â”‚ - æ ‡è®°æ¯ä¸ªå­—æ®µçš„æ›´æ–°æ—¶é—´                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é˜¶æ®µ4ï¼šæ¥æ”¶å’Œå­˜å‚¨ï¼ˆç³»ç»Ÿï¼‰                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ç³»ç»Ÿå¤„ç†                                              â”‚   â”‚
â”‚  â”‚ - éªŒè¯JSONæ ¼å¼å’Œå¿…å¡«å­—æ®µ                              â”‚   â”‚
â”‚  â”‚ - å­˜å‚¨åˆ° tenant_fields_json è¡¨                       â”‚   â”‚
â”‚  â”‚ - è®°å½•ç‰ˆæœ¬æ—¶é—´ï¼ˆsync_timeï¼‰                           â”‚   â”‚
â”‚  â”‚ - è®°å½•å­—æ®µæ›´æ–°æ—¶é—´ï¼ˆupdated_atï¼‰                     â”‚   â”‚
â”‚  â”‚ - åœ¨"ç”²æ–¹å­—æ®µ"é¡µé¢æ˜¾ç¤º                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é˜¶æ®µ5ï¼šå­—æ®µæ˜ å°„é…ç½®ï¼ˆç³»ç»Ÿç®¡ç†å‘˜ï¼‰                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Tab 1: åŒ¹é…ç›®æ ‡å­—æ®µ                                   â”‚   â”‚
â”‚  â”‚ - æ˜¾ç¤ºæ‰€æœ‰æ ‡å‡†å­—æ®µ                                    â”‚   â”‚
â”‚  â”‚ - æ£€æŸ¥å¿…å¡«å­—æ®µæ˜¯å¦å·²æ˜ å°„                              â”‚   â”‚
â”‚  â”‚ - æ”¯æŒè‡ªåŠ¨åŒ¹é…å’Œæ‰‹åŠ¨é…ç½®                              â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚ Tab 2: æ‹“å±•å­—æ®µ                                       â”‚   â”‚
â”‚  â”‚ - ç”²æ–¹ç‰¹æœ‰å­—æ®µï¼Œä¸æ˜ å°„æ ‡å‡†å­—æ®µ                        â”‚   â”‚
â”‚  â”‚ - å¯é…ç½®åˆ†ç»„ã€éšç§æ ‡ç­¾ã€æ˜¯å¦å¿…å¡«                      â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚ Tab 3: æœªä½¿ç”¨çš„ç”²æ–¹å­—æ®µ                               â”‚   â”‚
â”‚  â”‚ - å¼ºæé†’ï¼šæœªæ˜ å°„ä¸”æœªåˆ›å»ºæ‹“å±•å­—æ®µ                      â”‚   â”‚
â”‚  â”‚ - éœ€è¦ç«‹å³å¤„ç†                                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## äºŒã€æ ‡å‡†å­—æ®µé…ç½®ï¼ˆé˜¶æ®µ1ï¼‰

### 2.1 æ ‡å‡†å­—æ®µå®šä¹‰

æ ‡å‡†å­—æ®µæ˜¯ç³»ç»Ÿå®˜æ–¹å®šä¹‰çš„åŸºç¡€å­—æ®µé›†åˆï¼Œæ‰€æœ‰ç”²æ–¹è‡ªåŠ¨ç»§æ‰¿ã€‚

**æ•°æ®è¡¨ï¼š** `standard_fields`

**æ ¸å¿ƒå­—æ®µï¼š**
- `field_key`: å­—æ®µå”¯ä¸€æ ‡è¯†ï¼ˆå¦‚ï¼š`user_id`ï¼‰
- `field_name`: å­—æ®µåç§°ï¼ˆå¦‚ï¼š`ç”¨æˆ·ID`ï¼‰
- `field_type`: å­—æ®µç±»å‹ï¼ˆString/Integer/Decimal/Date/Datetime/Boolean/Enumï¼‰
- `field_group_id`: æ‰€å±åˆ†ç»„ID
- `is_required`: æ˜¯å¦å¿…å¡«ï¼ˆtrue/falseï¼‰
- `enum_options`: æšä¸¾é€‰é¡¹ï¼ˆJSONæ ¼å¼ï¼Œä»…Enumç±»å‹ï¼‰

### 2.2 æ ‡å‡†å­—æ®µç®¡ç†è§„åˆ™

1. **å¿…å¡«å­—æ®µè§„åˆ™**
   - ç³»ç»Ÿç®¡ç†å‘˜åœ¨æ ‡å‡†å­—æ®µç®¡ç†ä¸­æ ‡è®°å¿…å¡«å­—æ®µ
   - å¿…å¡«å­—æ®µåœ¨"åŒ¹é…ç›®æ ‡å­—æ®µ"tabä¸­å¿…é¡»å®Œæˆæ˜ å°„
   - æœªæ˜ å°„çš„å¿…å¡«å­—æ®µä¼šæ˜¾ç¤ºè­¦å‘Šæç¤º

2. **å­—æ®µåˆ†ç»„è§„åˆ™**
   - æ ‡å‡†å­—æ®µæŒ‰ä¸šåŠ¡åˆ†ç»„ï¼ˆå¦‚ï¼šå®¢æˆ·åŸºç¡€ä¿¡æ¯ã€è´·æ¬¾è¯¦æƒ…ã€å€Ÿæ¬¾è®°å½•ç­‰ï¼‰
   - åˆ†ç»„æ”¯æŒå±‚çº§ç»“æ„ï¼ˆçˆ¶å­åˆ†ç»„ï¼‰
   - å­—æ®µæ˜ å°„é…ç½®é¡µé¢æŒ‰åˆ†ç»„å±•ç¤º

3. **å­—æ®µç±»å‹è§„åˆ™**
   - æ”¯æŒ7ç§åŸºç¡€ç±»å‹ï¼šStringã€Integerã€Decimalã€Dateã€Datetimeã€Booleanã€Enum
   - Enumç±»å‹éœ€è¦é…ç½®æšä¸¾å€¼æ˜ å°„ï¼ˆæ ‡å‡†å€¼ â†” ç”²æ–¹å€¼ï¼‰

---

## ä¸‰ã€æ•°æ®åŒæ­¥æ¥å£è®¾è®¡ï¼ˆé˜¶æ®µ2ï¼‰

### 3.1 å­—æ®µå®šä¹‰åŒæ­¥æ¥å£

**æ¥å£åœ°å€ï¼š** `POST /api/v1/tenants/{tenant_code}/fields-sync`

**æ¥å£è¯´æ˜ï¼š** ç”²æ–¹å®šæœŸè°ƒç”¨æ­¤æ¥å£ï¼ŒåŒæ­¥å­—æ®µå®šä¹‰æ•°æ®

**è¯·æ±‚å¤´ï¼š**
```http
Content-Type: application/json
Authorization: Bearer {token}
```

**è¯·æ±‚ä½“ï¼ˆJSONæ ¼å¼ï¼‰ï¼š**
```json
{
  "version": "1.0",
  "sync_time": "2024-11-11T10:30:00Z",
  "fields": [
    {
      "field_key": "USER_ID",
      "field_name": "ç”¨æˆ·ID",
      "field_type": "String",
      "field_group_id": 1,
      "is_required": true,
      "updated_at": "2024-11-11T10:30:00Z",
      "description": "ç”¨æˆ·çš„å”¯ä¸€æ ‡è¯†",
      "example_value": "12345678"
    },
    {
      "field_key": "USER_NAME",
      "field_name": "ç”¨æˆ·å§“å",
      "field_type": "String",
      "field_group_id": 1,
      "is_required": true,
      "updated_at": "2024-11-11T10:30:00Z"
    },
    {
      "field_key": "CASE_STATUS",
      "field_name": "æ¡ˆä»¶çŠ¶æ€",
      "field_type": "Enum",
      "field_group_id": 2,
      "is_required": true,
      "updated_at": "2024-11-11T10:30:00Z",
      "enum_values": [
        {
          "value": "PENDING",
          "label": "å¾…è¿˜æ¬¾"
        },
        {
          "value": "PARTIAL",
          "label": "éƒ¨åˆ†è¿˜æ¬¾"
        },
        {
          "value": "SETTLED",
          "label": "æ­£å¸¸ç»“æ¸…"
        }
      ]
    }
  ]
}
```

**å­—æ®µè¯´æ˜ï¼š**

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `version` | String | æ˜¯ | JSONæ ¼å¼ç‰ˆæœ¬å· |
| `sync_time` | String(ISO8601) | æ˜¯ | æœ¬æ¬¡åŒæ­¥çš„æ—¶é—´æˆ³ |
| `fields` | Array | æ˜¯ | å­—æ®µå®šä¹‰æ•°ç»„ |
| `fields[].field_key` | String | æ˜¯ | ç”²æ–¹å­—æ®µæ ‡è¯†ï¼ˆå”¯ä¸€ï¼‰ |
| `fields[].field_name` | String | æ˜¯ | ç”²æ–¹å­—æ®µåç§° |
| `fields[].field_type` | String | æ˜¯ | å­—æ®µç±»å‹ |
| `fields[].field_group_id` | Integer | å¦ | å­—æ®µåˆ†ç»„IDï¼ˆå¯é€‰ï¼‰ |
| `fields[].is_required` | Boolean | å¦ | æ˜¯å¦å¿…å¡«ï¼ˆé»˜è®¤falseï¼‰ |
| `fields[].updated_at` | String(ISO8601) | æ˜¯ | å­—æ®µæ›´æ–°æ—¶é—´ |
| `fields[].description` | String | å¦ | å­—æ®µè¯´æ˜ |
| `fields[].example_value` | String | å¦ | ç¤ºä¾‹å€¼ |
| `fields[].enum_values` | Array | å¦ | æšä¸¾å€¼åˆ—è¡¨ï¼ˆä»…Enumç±»å‹ï¼‰ |

**å“åº”æ ¼å¼ï¼š**
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "tenant_code": "TENANT001",
    "sync_time": "2024-11-11T10:30:00Z",
    "received_count": 50,
    "processed_count": 48,
    "skipped_count": 2,
    "errors": [
      {
        "field_key": "INVALID_FIELD",
        "error": "å­—æ®µç±»å‹æ— æ•ˆ"
      }
    ]
  }
}
```

### 3.2 JSONæ¨¡æ¿æ ¼å¼è§„èŒƒ

**æ¨¡æ¿æ–‡ä»¶ï¼š** `tenant_fields_template.json`

```json
{
  "version": "1.0",
  "description": "ç”²æ–¹å­—æ®µå®šä¹‰åŒæ­¥æ¨¡æ¿",
  "sync_time": "2024-11-11T10:30:00Z",
  "fields": [
    {
      "field_key": "USER_ID",
      "field_name": "ç”¨æˆ·ID",
      "field_type": "String",
      "is_required": true,
      "updated_at": "2024-11-11T10:30:00Z"
    }
  ]
}
```

**å­—æ®µç±»å‹æšä¸¾å€¼ï¼š**
- `String`: æ–‡æœ¬ç±»å‹
- `Integer`: æ•´æ•°ç±»å‹
- `Decimal`: å°æ•°ç±»å‹
- `Date`: æ—¥æœŸç±»å‹ï¼ˆæ ¼å¼ï¼šYYYY-MM-DDï¼‰
- `Datetime`: æ—¥æœŸæ—¶é—´ç±»å‹ï¼ˆæ ¼å¼ï¼šISO8601ï¼‰
- `Boolean`: å¸ƒå°”ç±»å‹ï¼ˆtrue/falseï¼‰
- `Enum`: æšä¸¾ç±»å‹ï¼ˆéœ€æä¾›enum_valuesï¼‰

---

## å››ã€æ•°æ®æ¥æ”¶å’Œå­˜å‚¨ï¼ˆé˜¶æ®µ4ï¼‰

### 4.1 æ•°æ®å­˜å‚¨è¡¨ç»“æ„

**è¡¨åï¼š** `tenant_fields_json`

**å­—æ®µè®¾è®¡ï¼š**
```sql
CREATE TABLE tenant_fields_json (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    tenant_id BIGINT NOT NULL COMMENT 'ç”²æ–¹ID',
    tenant_code VARCHAR(50) NOT NULL COMMENT 'ç”²æ–¹ä»£ç ',
    version VARCHAR(20) COMMENT 'JSONç‰ˆæœ¬å·',
    sync_time DATETIME NOT NULL COMMENT 'åŒæ­¥æ—¶é—´ï¼ˆç‰ˆæœ¬æ—¶é—´ï¼‰',
    fields_json JSON NOT NULL COMMENT 'å­—æ®µå®šä¹‰JSON',
    fetched_at DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'è·å–æ—¶é—´',
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX idx_tenant_code (tenant_code),
    INDEX idx_sync_time (sync_time)
) COMMENT='ç”²æ–¹å­—æ®µJSONæ•°æ®è¡¨';
```

**å­—æ®µè§£æè¡¨ï¼š** `tenant_fields_detail`

```sql
CREATE TABLE tenant_fields_detail (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    tenant_id BIGINT NOT NULL COMMENT 'ç”²æ–¹ID',
    tenant_code VARCHAR(50) NOT NULL COMMENT 'ç”²æ–¹ä»£ç ',
    field_key VARCHAR(100) NOT NULL COMMENT 'ç”²æ–¹å­—æ®µæ ‡è¯†',
    field_name VARCHAR(200) COMMENT 'ç”²æ–¹å­—æ®µåç§°',
    field_type VARCHAR(50) NOT NULL COMMENT 'å­—æ®µç±»å‹',
    field_group_id BIGINT COMMENT 'å­—æ®µåˆ†ç»„ID',
    is_required BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦å¿…å¡«',
    updated_at DATETIME NOT NULL COMMENT 'å­—æ®µæ›´æ–°æ—¶é—´',
    sync_time DATETIME NOT NULL COMMENT 'åŒæ­¥ç‰ˆæœ¬æ—¶é—´',
    description TEXT COMMENT 'å­—æ®µè¯´æ˜',
    example_value TEXT COMMENT 'ç¤ºä¾‹å€¼',
    enum_values JSON COMMENT 'æšä¸¾å€¼ï¼ˆJSONæ ¼å¼ï¼‰',
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_tenant_field (tenant_id, field_key),
    INDEX idx_updated_at (updated_at),
    INDEX idx_sync_time (sync_time)
) COMMENT='ç”²æ–¹å­—æ®µè¯¦æƒ…è¡¨';
```

### 4.2 æ•°æ®æ¥æ”¶å¤„ç†æµç¨‹

```python
def sync_tenant_fields(tenant_code: str, sync_data: dict):
    """
    æ¥æ”¶å¹¶å¤„ç†ç”²æ–¹å­—æ®µåŒæ­¥æ•°æ®
    """
    # 1. éªŒè¯ç”²æ–¹å­˜åœ¨
    tenant = get_tenant_by_code(tenant_code)
    if not tenant:
        raise HTTPException(404, "ç”²æ–¹ä¸å­˜åœ¨")
    
    # 2. éªŒè¯JSONæ ¼å¼
    validate_json_format(sync_data)
    
    # 3. æå–ç‰ˆæœ¬æ—¶é—´
    sync_time = parse_datetime(sync_data['sync_time'])
    
    # 4. å­˜å‚¨å®Œæ•´JSONï¼ˆç‰ˆæœ¬å¿«ç…§ï¼‰
    save_tenant_fields_json(
        tenant_id=tenant.id,
        tenant_code=tenant_code,
        version=sync_data.get('version', '1.0'),
        sync_time=sync_time,
        fields_json=sync_data['fields']
    )
    
    # 5. è§£æå¹¶å­˜å‚¨å­—æ®µè¯¦æƒ…
    processed_count = 0
    skipped_count = 0
    errors = []
    
    for field_data in sync_data['fields']:
        try:
            # éªŒè¯å­—æ®µæ•°æ®
            validate_field_data(field_data)
            
            # æå–å­—æ®µæ›´æ–°æ—¶é—´
            field_updated_at = parse_datetime(field_data['updated_at'])
            
            # å­˜å‚¨å­—æ®µè¯¦æƒ…
            save_or_update_field_detail(
                tenant_id=tenant.id,
                tenant_code=tenant_code,
                field_key=field_data['field_key'],
                field_name=field_data.get('field_name'),
                field_type=field_data['field_type'],
                field_group_id=field_data.get('field_group_id'),
                is_required=field_data.get('is_required', False),
                updated_at=field_updated_at,
                sync_time=sync_time,
                description=field_data.get('description'),
                example_value=field_data.get('example_value'),
                enum_values=field_data.get('enum_values')
            )
            
            processed_count += 1
            
        except ValidationError as e:
            skipped_count += 1
            errors.append({
                'field_key': field_data.get('field_key', 'UNKNOWN'),
                'error': str(e)
            })
    
    # 6. è¿”å›å¤„ç†ç»“æœ
    return {
        'tenant_code': tenant_code,
        'sync_time': sync_time.isoformat(),
        'received_count': len(sync_data['fields']),
        'processed_count': processed_count,
        'skipped_count': skipped_count,
        'errors': errors
    }
```

### 4.3 å­—æ®µæ›´æ–°æ—¶é—´ç®¡ç†

**å­—æ®µæ›´æ–°æ—¶é—´ï¼ˆ`updated_at`ï¼‰çš„ä½œç”¨ï¼š**
1. æ ‡è¯†å­—æ®µå®šä¹‰çš„æœ€åæ›´æ–°æ—¶é—´
2. ç”¨äºåˆ¤æ–­å­—æ®µæ˜¯å¦éœ€è¦é‡æ–°æ˜ å°„
3. åœ¨"åŒ¹é…ç›®æ ‡å­—æ®µ"tabä¸­æ˜¾ç¤ºï¼Œå¸®åŠ©ç®¡ç†å‘˜äº†è§£å­—æ®µå˜æ›´æƒ…å†µ

**ç‰ˆæœ¬æ—¶é—´ï¼ˆ`sync_time`ï¼‰çš„ä½œç”¨ï¼š**
1. æ ‡è¯†æœ¬æ¬¡åŒæ­¥çš„ç‰ˆæœ¬
2. ç”¨äºæ•°æ®è¿½æº¯å’Œç‰ˆæœ¬å›æ»š
3. åœ¨"ç”²æ–¹å­—æ®µ"é¡µé¢æ˜¾ç¤ºï¼Œå±•ç¤ºæ•°æ®ç‰ˆæœ¬ä¿¡æ¯

### 4.4 ç”²æ–¹å­—æ®µæŸ¥çœ‹æ¥å£

**æ¥å£åœ°å€ï¼š** `GET /api/v1/tenants/{tenant_id}/fields-json`

**å“åº”æ ¼å¼ï¼š**
```json
{
  "fetched_at": "2024-11-11T10:35:00Z",
  "sync_time": "2024-11-11T10:30:00Z",
  "version": "1.0",
  "fields": [
    {
      "field_key": "USER_ID",
      "field_name": "ç”¨æˆ·ID",
      "field_type": "String",
      "field_group_id": 1,
      "is_required": true,
      "updated_at": "2024-11-11T10:30:00Z",
      "description": "ç”¨æˆ·çš„å”¯ä¸€æ ‡è¯†",
      "example_value": "12345678"
    }
  ]
}
```

**é¡µé¢æ˜¾ç¤ºè¦æ±‚ï¼š**
- æ˜¾ç¤ºç‰ˆæœ¬æ—¶é—´ï¼ˆ`sync_time`ï¼‰ï¼š"æ•°æ®ç‰ˆæœ¬ï¼š2024-11-11 10:30:00"
- æ˜¾ç¤ºå­—æ®µæ›´æ–°æ—¶é—´ï¼ˆ`updated_at`ï¼‰ï¼šåœ¨å­—æ®µåˆ—è¡¨ä¸­æ˜¾ç¤ºæ¯ä¸ªå­—æ®µçš„æœ€åæ›´æ–°æ—¶é—´
- æ”¯æŒæŒ‰å­—æ®µæ›´æ–°æ—¶é—´æ’åºå’Œç­›é€‰

---

## äº”ã€å­—æ®µæ˜ å°„é…ç½®ï¼ˆé˜¶æ®µ5ï¼‰

### 5.1 å­—æ®µæ˜ å°„é…ç½®é¡µé¢ç»“æ„

å­—æ®µæ˜ å°„é…ç½®é¡µé¢åŒ…å«ä¸‰ä¸ªTabï¼š

#### Tab 1: åŒ¹é…ç›®æ ‡å­—æ®µ

**åŠŸèƒ½è¯´æ˜ï¼š**
- æ˜¾ç¤ºæ‰€æœ‰æ ‡å‡†å­—æ®µï¼ˆæŒ‰åˆ†ç»„å±•ç¤ºï¼‰
- æ£€æŸ¥å¿…å¡«å­—æ®µæ˜¯å¦å·²æ˜ å°„
- æ”¯æŒè‡ªåŠ¨åŒ¹é…å’Œæ‰‹åŠ¨é…ç½®æ˜ å°„å…³ç³»

**æ˜¾ç¤ºå†…å®¹ï¼š**
| åˆ—å | è¯´æ˜ |
|------|------|
| ç›®æ ‡å­—æ®µ | æ ‡å‡†å­—æ®µåç§°å’Œæ ‡è¯† |
| åŒ¹é…çŠ¶æ€ | æœªæ˜ å°„/å·²è‡ªåŠ¨æ˜ å°„/å·²æ‰‹åŠ¨æ˜ å°„ |
| ç”²æ–¹å­—æ®µ | ä¸‹æ‹‰é€‰æ‹©ç”²æ–¹å­—æ®µï¼ˆå¯æœç´¢ï¼‰ |
| æšä¸¾å€¼ | æšä¸¾å­—æ®µçš„æ˜ å°„å…³ç³» |
| æ¥æº | æ ‡å‡†/è‡ªå®šä¹‰ |
| ç”²æ–¹æ›´æ–°æ—¶é—´ | å­—æ®µæœ€åæ›´æ–°æ—¶é—´ |
| æ˜¯å¦å¿…å¡« | å¼€å…³ï¼ˆæ ‡å‡†å­—æ®µä¸å¯ç¼–è¾‘ï¼‰ |
| æ“ä½œ | ç¼–è¾‘/åˆ é™¤ |

**åŒ¹é…çŠ¶æ€è®¡ç®—é€»è¾‘ï¼š**
```python
def calculate_mapping_status(field):
    """
    è®¡ç®—å­—æ®µæ˜ å°„çŠ¶æ€
    """
    if not field.tenant_field_key and not field.tenant_field_id:
        return 'unmapped'  # æœªæ˜ å°„
    
    # åˆ¤æ–­æ˜¯è‡ªåŠ¨æ˜ å°„è¿˜æ˜¯æ‰‹åŠ¨æ˜ å°„
    if field.auto_mapped or field.tenant_field_key.lower() == field.field_key.lower():
        return 'auto_mapped'  # å·²è‡ªåŠ¨æ˜ å°„
    else:
        return 'manual_mapped'  # å·²æ‰‹åŠ¨æ˜ å°„
```

**å¿…å¡«å­—æ®µæ£€æŸ¥ï¼š**
- åœ¨é¡µé¢é¡¶éƒ¨æ˜¾ç¤ºè­¦å‘Šï¼š`è­¦å‘Šï¼šå‘ç° X ä¸ªå¿…å¡«å­—æ®µæœªæ˜ å°„ï¼Œè¯·å°½å¿«å¤„ç†ï¼`
- æœªæ˜ å°„çš„å¿…å¡«å­—æ®µåœ¨åˆ—è¡¨ä¸­é«˜äº®æ˜¾ç¤º
- æ”¯æŒç­›é€‰ï¼šä»…æ˜¾ç¤ºæœªæ˜ å°„çš„å¿…å¡«å­—æ®µ

#### Tab 2: æ‹“å±•å­—æ®µ

**åŠŸèƒ½è¯´æ˜ï¼š**
- ç®¡ç†ç”²æ–¹ç‰¹æœ‰å­—æ®µï¼Œä¸æ˜ å°„åˆ°æ ‡å‡†å­—æ®µ
- æ”¯æŒå­—æ®µåˆ†ç»„ã€éšç§æ ‡ç­¾ã€æ˜¯å¦å¿…å¡«é…ç½®
- ç‹¬ç«‹äºæ ‡å‡†å­—æ®µç®¡ç†

**æ˜¾ç¤ºå†…å®¹ï¼š**
| åˆ—å | è¯´æ˜ |
|------|------|
| æ‰©å±•å­—æ®µåˆ«å | å­—æ®µåˆ«åï¼ˆç³»ç»Ÿå†…éƒ¨ä½¿ç”¨ï¼‰ |
| ç”²æ–¹åŸå§‹å­—æ®µ | ç”²æ–¹å­—æ®µåç§°å’Œæ ‡è¯† |
| ç±»å‹ | å­—æ®µç±»å‹ |
| éšç§æ ‡ç­¾ | PII/æ•æ„Ÿ/å…¬å¼€ |
| æ˜¯å¦å¿…å¡« | å¼€å…³ |
| æ“ä½œ | ç¼–è¾‘/åˆ é™¤ |

**å­—æ®µåˆ†ç»„ï¼š**
- å·¦ä¾§æ˜¾ç¤ºå­—æ®µåˆ†ç»„æ ‘ï¼ˆä¸æ ‡å‡†å­—æ®µåˆ†ç»„ä¸€è‡´ï¼‰
- æ”¯æŒæŒ‰åˆ†ç»„ç­›é€‰æ‹“å±•å­—æ®µ
- åˆ›å»ºæ‹“å±•å­—æ®µæ—¶å¯é€‰æ‹©æ‰€å±åˆ†ç»„

**éšç§æ ‡ç­¾è¯´æ˜ï¼š**
- `PII`: ä¸ªäººèº«ä»½ä¿¡æ¯ï¼ˆå¦‚ï¼šèº«ä»½è¯å·ã€æ‰‹æœºå·ï¼‰
- `æ•æ„Ÿ`: æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚ï¼šæ”¶å…¥ã€åœ°å€ï¼‰
- `å…¬å¼€`: å…¬å¼€ä¿¡æ¯ï¼ˆå¦‚ï¼šå…¬å¸åç§°ï¼‰

#### Tab 3: æœªä½¿ç”¨çš„ç”²æ–¹å­—æ®µ

**åŠŸèƒ½è¯´æ˜ï¼š**
- æ˜¾ç¤ºç”²æ–¹æ¨é€ä½†æœªæ˜ å°„çš„å­—æ®µ
- å¼ºæé†’ï¼šéœ€è¦ç«‹å³å¤„ç†
- æ”¯æŒæ‰¹é‡æ“ä½œï¼šåŒ¹é…åˆ°ç›®æ ‡å­—æ®µæˆ–è®¾ä¸ºæ‹“å±•å­—æ®µ

**æ˜¾ç¤ºå†…å®¹ï¼š**
| åˆ—å | è¯´æ˜ |
|------|------|
| å­—æ®µå | ç”²æ–¹å­—æ®µåç§°å’Œæ ‡è¯† |
| ç±»å‹ | å­—æ®µç±»å‹ |
| ç”²æ–¹æ›´æ–°æ—¶é—´ | å­—æ®µæœ€åæ›´æ–°æ—¶é—´ |
| æ˜¯å¦å¿…å¡« | å¿…å¡«/éå¿…å¡« |
| æ“ä½œ | åŒ¹é…åˆ°ç›®æ ‡å­—æ®µ/è®¾ä¸ºæ‰©å±•å­—æ®µ |

**æœªä½¿ç”¨å­—æ®µåˆ¤æ–­é€»è¾‘ï¼š**
```python
def get_unmapped_tenant_fields(tenant_id):
    """
    è·å–æœªä½¿ç”¨çš„ç”²æ–¹å­—æ®µ
    """
    # 1. è·å–æ‰€æœ‰ç”²æ–¹å­—æ®µ
    tenant_fields = get_tenant_fields_detail(tenant_id)
    
    # 2. è·å–å·²æ˜ å°„çš„å­—æ®µï¼ˆåŒ¹é…åˆ°æ ‡å‡†å­—æ®µï¼‰
    mapped_field_keys = get_mapped_field_keys(tenant_id)
    
    # 3. è·å–å·²åˆ›å»ºæ‹“å±•å­—æ®µçš„å­—æ®µ
    extended_field_keys = get_extended_field_keys(tenant_id)
    
    # 4. è®¡ç®—æœªä½¿ç”¨çš„å­—æ®µ
    unmapped_fields = []
    for field in tenant_fields:
        field_key = field['field_key']
        if field_key not in mapped_field_keys and field_key not in extended_field_keys:
            unmapped_fields.append(field)
    
    return unmapped_fields
```

**å¼ºæé†’æœºåˆ¶ï¼š**
- é¡µé¢é¡¶éƒ¨æ˜¾ç¤ºçº¢è‰²è­¦å‘Šï¼š`è­¦å‘Šï¼šå‘ç° X ä¸ªæœªä½¿ç”¨çš„ç”²æ–¹å­—æ®µï¼Œè¯·å°½å¿«å¤„ç†ï¼`
- æœªä½¿ç”¨å­—æ®µå¯èƒ½å¯¼è‡´æ•°æ®ä¸¢å¤±
- æ”¯æŒä¸€é”®æ‰¹é‡å¤„ç†ï¼šæ‰¹é‡åŒ¹é…æˆ–æ‰¹é‡åˆ›å»ºæ‹“å±•å­—æ®µ

### 5.2 è‡ªåŠ¨åŒ¹é…åŠŸèƒ½

**ä¸€é”®å»ºè®®æ˜ å°„ï¼š**
- åŸºäºå­—æ®µåç§°ç›¸ä¼¼åº¦ç®—æ³•
- æ”¯æŒåŒä¹‰è¯åŒ¹é…
- æ”¯æŒå­—æ®µç±»å‹åŒ¹é…
- ç”Ÿæˆæ˜ å°„å»ºè®®ï¼Œç®¡ç†å‘˜ç¡®è®¤åç”Ÿæ•ˆ

**è‡ªåŠ¨åŒ¹é…ç®—æ³•ï¼š**
```python
def auto_suggest_mapping(tenant_id):
    """
    è‡ªåŠ¨å»ºè®®å­—æ®µæ˜ å°„
    """
    # 1. è·å–æœªæ˜ å°„çš„æ ‡å‡†å­—æ®µ
    unmapped_standard_fields = get_unmapped_standard_fields(tenant_id)
    
    # 2. è·å–æœªä½¿ç”¨çš„ç”²æ–¹å­—æ®µ
    unmapped_tenant_fields = get_unmapped_tenant_fields(tenant_id)
    
    # 3. è®¡ç®—ç›¸ä¼¼åº¦
    suggestions = []
    for std_field in unmapped_standard_fields:
        best_match = None
        best_score = 0
        
        for tenant_field in unmapped_tenant_fields:
            # è®¡ç®—åç§°ç›¸ä¼¼åº¦
            name_score = calculate_similarity(
                std_field.field_name,
                tenant_field.field_name
            )
            
            # è®¡ç®—æ ‡è¯†ç›¸ä¼¼åº¦
            key_score = calculate_similarity(
                std_field.field_key.lower(),
                tenant_field.field_key.lower()
            )
            
            # ç±»å‹åŒ¹é…åŠ åˆ†
            type_bonus = 0.2 if std_field.field_type == tenant_field.field_type else 0
            
            # ç»¼åˆå¾—åˆ†
            total_score = (name_score * 0.6 + key_score * 0.4) + type_bonus
            
            if total_score > best_score and total_score > 0.7:  # é˜ˆå€¼0.7
                best_score = total_score
                best_match = tenant_field
        
        if best_match:
            suggestions.append({
                'standard_field_id': std_field.id,
                'tenant_field_key': best_match.field_key,
                'confidence': best_score
            })
    
    # 4. ä¿å­˜å»ºè®®ï¼ˆå¾…ç¡®è®¤ï¼‰
    save_mapping_suggestions(tenant_id, suggestions)
    
    return len(suggestions)
```

---

## å…­ã€å¼‚å¸¸æƒ…å†µå¤„ç†

### 6.1 æ•°æ®åŒæ­¥å¼‚å¸¸

#### 6.1.1 JSONæ ¼å¼é”™è¯¯

**åœºæ™¯ï¼š** ç”²æ–¹æ¨é€çš„JSONæ ¼å¼ä¸ç¬¦åˆè§„èŒƒ

**å¤„ç†æ–¹æ¡ˆï¼š**
```python
def validate_json_format(data):
    """
    éªŒè¯JSONæ ¼å¼
    """
    required_fields = ['version', 'sync_time', 'fields']
    
    # æ£€æŸ¥å¿…å¡«å­—æ®µ
    for field in required_fields:
        if field not in data:
            raise ValidationError(f"ç¼ºå°‘å¿…å¡«å­—æ®µ: {field}")
    
    # æ£€æŸ¥å­—æ®µç±»å‹
    if not isinstance(data['fields'], list):
        raise ValidationError("fieldså¿…é¡»æ˜¯æ•°ç»„")
    
    # æ£€æŸ¥æ—¶é—´æ ¼å¼
    try:
        parse_datetime(data['sync_time'])
    except ValueError:
        raise ValidationError("sync_timeæ ¼å¼é”™è¯¯ï¼Œåº”ä¸ºISO8601æ ¼å¼")
```

**å“åº”å¤„ç†ï¼š**
- è¿”å›400é”™è¯¯ï¼Œæ˜ç¡®æç¤ºæ ¼å¼é”™è¯¯
- è®°å½•é”™è¯¯æ—¥å¿—ï¼Œä¾¿äºæ’æŸ¥
- ä¸æ›´æ–°ä»»ä½•æ•°æ®ï¼Œä¿è¯æ•°æ®ä¸€è‡´æ€§

#### 6.1.2 å­—æ®µæ•°æ®ç¼ºå¤±

**åœºæ™¯ï¼š** å­—æ®µå®šä¹‰ç¼ºå°‘å¿…å¡«å­—æ®µï¼ˆå¦‚field_keyã€field_typeï¼‰

**å¤„ç†æ–¹æ¡ˆï¼š**
```python
def validate_field_data(field_data):
    """
    éªŒè¯å­—æ®µæ•°æ®
    """
    required_fields = ['field_key', 'field_name', 'field_type', 'updated_at']
    
    for field in required_fields:
        if field not in field_data:
            raise ValidationError(f"å­—æ®µç¼ºå°‘å¿…å¡«å±æ€§: {field}")
    
    # éªŒè¯å­—æ®µç±»å‹
    valid_types = ['String', 'Integer', 'Decimal', 'Date', 'Datetime', 'Boolean', 'Enum']
    if field_data['field_type'] not in valid_types:
        raise ValidationError(f"æ— æ•ˆçš„å­—æ®µç±»å‹: {field_data['field_type']}")
    
    # éªŒè¯æšä¸¾ç±»å‹
    if field_data['field_type'] == 'Enum':
        if 'enum_values' not in field_data or not field_data['enum_values']:
            raise ValidationError("Enumç±»å‹å­—æ®µå¿…é¡»æä¾›enum_values")
```

**å“åº”å¤„ç†ï¼š**
- è·³è¿‡è¯¥å­—æ®µï¼Œè®°å½•åˆ°errorsæ•°ç»„
- ç»§ç»­å¤„ç†å…¶ä»–å­—æ®µ
- è¿”å›å¤„ç†ç»“æœï¼ŒåŒ…å«è·³è¿‡çš„å­—æ®µå’Œé”™è¯¯åŸå› 

#### 6.1.3 æ—¶é—´æ ¼å¼é”™è¯¯

**åœºæ™¯ï¼š** `sync_time`æˆ–`updated_at`æ ¼å¼ä¸æ­£ç¡®

**å¤„ç†æ–¹æ¡ˆï¼š**
```python
def parse_datetime(time_str):
    """
    è§£ææ—¶é—´å­—ç¬¦ä¸²
    """
    try:
        # æ”¯æŒå¤šç§æ ¼å¼
        formats = [
            '%Y-%m-%dT%H:%M:%S.%fZ',  # ISO8601 with microseconds
            '%Y-%m-%dT%H:%M:%SZ',      # ISO8601 without microseconds
            '%Y-%m-%d %H:%M:%S',       # æ ‡å‡†æ ¼å¼
        ]
        
        for fmt in formats:
            try:
                return datetime.strptime(time_str, fmt)
            except ValueError:
                continue
        
        raise ValueError(f"æ— æ³•è§£ææ—¶é—´æ ¼å¼: {time_str}")
    except Exception as e:
        raise ValidationError(f"æ—¶é—´æ ¼å¼é”™è¯¯: {str(e)}")
```

**å“åº”å¤„ç†ï¼š**
- å°è¯•å¤šç§æ—¶é—´æ ¼å¼è§£æ
- å¦‚æœå…¨éƒ¨å¤±è´¥ï¼Œè¿”å›æ ¼å¼é”™è¯¯æç¤º
- è®°å½•é”™è¯¯æ—¥å¿—

### 6.2 å­—æ®µæ˜ å°„å¼‚å¸¸

#### 6.2.1 å¿…å¡«å­—æ®µæœªæ˜ å°„

**åœºæ™¯ï¼š** æ ‡å‡†å­—æ®µä¸­æ ‡è®°ä¸ºå¿…å¡«çš„å­—æ®µï¼Œåœ¨ç”²æ–¹å­—æ®µä¸­æ‰¾ä¸åˆ°å¯¹åº”æ˜ å°„

**å¤„ç†æ–¹æ¡ˆï¼š**
```python
def check_required_fields_mapping(tenant_id):
    """
    æ£€æŸ¥å¿…å¡«å­—æ®µæ˜ å°„æƒ…å†µ
    """
    # è·å–æ‰€æœ‰å¿…å¡«çš„æ ‡å‡†å­—æ®µ
    required_fields = get_required_standard_fields()
    
    # è·å–å·²æ˜ å°„çš„å­—æ®µ
    mapped_fields = get_mapped_fields(tenant_id)
    
    # æ£€æŸ¥æœªæ˜ å°„çš„å¿…å¡«å­—æ®µ
    unmapped_required = []
    for field in required_fields:
        if field.id not in mapped_fields:
            unmapped_required.append(field)
    
    return unmapped_required
```

**å‰ç«¯æ˜¾ç¤ºï¼š**
- é¡µé¢é¡¶éƒ¨çº¢è‰²è­¦å‘Šï¼š`è­¦å‘Šï¼šå‘ç° X ä¸ªå¿…å¡«å­—æ®µæœªæ˜ å°„ï¼Œè¯·å°½å¿«å¤„ç†ï¼`
- æœªæ˜ å°„çš„å¿…å¡«å­—æ®µåœ¨åˆ—è¡¨ä¸­é«˜äº®æ˜¾ç¤ºï¼ˆçº¢è‰²èƒŒæ™¯ï¼‰
- æ”¯æŒç­›é€‰ï¼šä»…æ˜¾ç¤ºæœªæ˜ å°„çš„å¿…å¡«å­—æ®µ

#### 6.2.2 å­—æ®µç±»å‹ä¸åŒ¹é…

**åœºæ™¯ï¼š** æ ‡å‡†å­—æ®µç±»å‹ä¸ç”²æ–¹å­—æ®µç±»å‹ä¸ä¸€è‡´

**å¤„ç†æ–¹æ¡ˆï¼š**
```python
def validate_field_type_match(standard_field, tenant_field):
    """
    éªŒè¯å­—æ®µç±»å‹åŒ¹é…
    """
    # ç±»å‹å…¼å®¹æ€§æ˜ å°„
    type_compatibility = {
        'Integer': ['Integer', 'Decimal'],  # Integerå¯ä»¥æ˜ å°„åˆ°Decimal
        'Decimal': ['Decimal', 'Integer'],  # Decimalå¯ä»¥æ˜ å°„åˆ°Integer
        'Date': ['Date', 'Datetime'],       # Dateå¯ä»¥æ˜ å°„åˆ°Datetime
        'String': ['String'],                # Stringåªèƒ½æ˜ å°„åˆ°String
        'Enum': ['Enum'],                    # Enumåªèƒ½æ˜ å°„åˆ°Enum
        'Boolean': ['Boolean'],              # Booleanåªèƒ½æ˜ å°„åˆ°Boolean
    }
    
    standard_type = standard_field.field_type
    tenant_type = tenant_field.field_type
    
    compatible_types = type_compatibility.get(standard_type, [])
    
    if tenant_type not in compatible_types:
        return False, f"å­—æ®µç±»å‹ä¸åŒ¹é…: æ ‡å‡†å­—æ®µ({standard_type}) vs ç”²æ–¹å­—æ®µ({tenant_type})"
    
    return True, None
```

**å¤„ç†ç­–ç•¥ï¼š**
- ç±»å‹ä¸åŒ¹é…æ—¶ï¼Œæ˜¾ç¤ºè­¦å‘Šæç¤º
- å…è®¸å¼ºåˆ¶æ˜ å°„ï¼ˆç®¡ç†å‘˜ç¡®è®¤ï¼‰
- è®°å½•ç±»å‹è½¬æ¢è§„åˆ™ï¼Œæ•°æ®åŒæ­¥æ—¶è‡ªåŠ¨è½¬æ¢

#### 6.2.3 æšä¸¾å€¼æ˜ å°„ç¼ºå¤±

**åœºæ™¯ï¼š** Enumç±»å‹å­—æ®µçš„æšä¸¾å€¼æœªå®Œå…¨æ˜ å°„

**å¤„ç†æ–¹æ¡ˆï¼š**
```python
def check_enum_mapping(standard_field, tenant_field):
    """
    æ£€æŸ¥æšä¸¾å€¼æ˜ å°„å®Œæ•´æ€§
    """
    if standard_field.field_type != 'Enum':
        return True, None
    
    standard_enum_values = standard_field.enum_options or []
    tenant_enum_values = tenant_field.enum_values or []
    
    # æ£€æŸ¥æ ‡å‡†æšä¸¾å€¼æ˜¯å¦éƒ½æœ‰æ˜ å°„
    unmapped_enum = []
    for std_enum in standard_enum_values:
        std_id = std_enum.get('standard_id')
        # æŸ¥æ‰¾æ˜¯å¦æœ‰å¯¹åº”çš„ç”²æ–¹æ˜ å°„
        mapped = any(
            enum_map.get('standard_id') == std_id
            for enum_map in tenant_field.enum_mappings or []
        )
        if not mapped:
            unmapped_enum.append(std_enum)
    
    if unmapped_enum:
        return False, f"ä»¥ä¸‹æšä¸¾å€¼æœªæ˜ å°„: {[e.get('standard_name') for e in unmapped_enum]}"
    
    return True, None
```

**å¤„ç†ç­–ç•¥ï¼š**
- æ˜¾ç¤ºæœªæ˜ å°„çš„æšä¸¾å€¼åˆ—è¡¨
- æ”¯æŒæ‰¹é‡é…ç½®æšä¸¾å€¼æ˜ å°„
- æ•°æ®åŒæ­¥æ—¶ï¼Œæœªæ˜ å°„çš„æšä¸¾å€¼ä½¿ç”¨é»˜è®¤å€¼æˆ–è·³è¿‡

### 6.3 æ•°æ®ä¸€è‡´æ€§å¼‚å¸¸

#### 6.3.1 å­—æ®µé‡å¤å®šä¹‰

**åœºæ™¯ï¼š** ç”²æ–¹åœ¨åŒä¸€æ‰¹æ¬¡ä¸­æ¨é€äº†é‡å¤çš„`field_key`

**å¤„ç†æ–¹æ¡ˆï¼š**
```python
def handle_duplicate_fields(fields):
    """
    å¤„ç†é‡å¤å­—æ®µå®šä¹‰
    """
    field_keys = {}
    duplicates = []
    
    for field in fields:
        field_key = field['field_key']
        if field_key in field_keys:
            # ä¿ç•™æ›´æ–°æ—¶é—´æœ€æ–°çš„
            existing_field = field_keys[field_key]
            existing_time = parse_datetime(existing_field['updated_at'])
            new_time = parse_datetime(field['updated_at'])
            
            if new_time > existing_time:
                duplicates.append({
                    'field_key': field_key,
                    'action': 'replaced',
                    'old_data': existing_field,
                    'new_data': field
                })
                field_keys[field_key] = field
            else:
                duplicates.append({
                    'field_key': field_key,
                    'action': 'skipped',
                    'reason': 'å·²æœ‰æ›´æ–°çš„ç‰ˆæœ¬'
                })
        else:
            field_keys[field_key] = field
    
    return list(field_keys.values()), duplicates
```

**å¤„ç†ç­–ç•¥ï¼š**
- è‡ªåŠ¨å»é‡ï¼Œä¿ç•™æ›´æ–°æ—¶é—´æœ€æ–°çš„å­—æ®µå®šä¹‰
- è®°å½•é‡å¤å­—æ®µä¿¡æ¯åˆ°æ—¥å¿—
- è¿”å›å¤„ç†ç»“æœï¼ŒåŒ…å«å»é‡ä¿¡æ¯

#### 6.3.2 å­—æ®µåˆ é™¤å¤„ç†

**åœºæ™¯ï¼š** ç”²æ–¹ä¸å†æ¨é€æŸä¸ªå­—æ®µï¼ˆå­—æ®µä»JSONä¸­ç§»é™¤ï¼‰

**å¤„ç†æ–¹æ¡ˆï¼š**
```python
def handle_field_removal(tenant_id, current_fields, previous_fields):
    """
    å¤„ç†å­—æ®µåˆ é™¤
    """
    current_keys = {f['field_key'] for f in current_fields}
    previous_keys = {f['field_key'] for f in previous_fields}
    
    removed_keys = previous_keys - current_keys
    
    removed_fields = []
    for key in removed_keys:
        # æ£€æŸ¥å­—æ®µæ˜¯å¦å·²æ˜ å°„
        mapping = get_field_mapping(tenant_id, key)
        
        if mapping:
            # å·²æ˜ å°„çš„å­—æ®µï¼Œæ ‡è®°ä¸ºå·²åˆ é™¤ä½†ä¸ç§»é™¤æ˜ å°„å…³ç³»
            mark_field_as_removed(tenant_id, key)
            removed_fields.append({
                'field_key': key,
                'action': 'marked_as_removed',
                'mapping_preserved': True
            })
        else:
            # æœªæ˜ å°„çš„å­—æ®µï¼Œç›´æ¥åˆ é™¤
            delete_field_detail(tenant_id, key)
            removed_fields.append({
                'field_key': key,
                'action': 'deleted',
                'mapping_preserved': False
            })
    
    return removed_fields
```

**å¤„ç†ç­–ç•¥ï¼š**
- å·²æ˜ å°„çš„å­—æ®µï¼šæ ‡è®°ä¸ºå·²åˆ é™¤ï¼Œä¿ç•™æ˜ å°„å…³ç³»ï¼ˆé˜²æ­¢æ•°æ®ä¸¢å¤±ï¼‰
- æœªæ˜ å°„çš„å­—æ®µï¼šç›´æ¥åˆ é™¤
- è®°å½•åˆ é™¤æ“ä½œæ—¥å¿—

#### 6.3.3 ç‰ˆæœ¬å†²çªå¤„ç†

**åœºæ™¯ï¼š** ç”²æ–¹æ¨é€äº†æ—§ç‰ˆæœ¬çš„å­—æ®µæ•°æ®ï¼ˆ`sync_time`æ—©äºå½“å‰ç‰ˆæœ¬ï¼‰

**å¤„ç†æ–¹æ¡ˆï¼š**
```python
def handle_version_conflict(tenant_id, new_sync_time):
    """
    å¤„ç†ç‰ˆæœ¬å†²çª
    """
    current_sync_time = get_latest_sync_time(tenant_id)
    
    if current_sync_time and new_sync_time < current_sync_time:
        # ç‰ˆæœ¬å†²çªï¼šæ–°æ•°æ®çš„æ—¶é—´æ—©äºå½“å‰ç‰ˆæœ¬
        return {
            'conflict': True,
            'current_version': current_sync_time.isoformat(),
            'new_version': new_sync_time.isoformat(),
            'action': 'rejected',
            'message': 'æ–°æ•°æ®ç‰ˆæœ¬æ—©äºå½“å‰ç‰ˆæœ¬ï¼Œå·²æ‹’ç»'
        }
    
    # æ­£å¸¸æƒ…å†µï¼šæ›´æ–°ç‰ˆæœ¬æ—¶é—´
    update_sync_time(tenant_id, new_sync_time)
    return {
        'conflict': False,
        'action': 'accepted'
    }
```

**å¤„ç†ç­–ç•¥ï¼š**
- æ‹’ç»æ—§ç‰ˆæœ¬æ•°æ®ï¼Œè¿”å›ç‰ˆæœ¬å†²çªé”™è¯¯
- è®°å½•ç‰ˆæœ¬å†²çªæ—¥å¿—
- æä¾›ç‰ˆæœ¬å›æ»šåŠŸèƒ½ï¼ˆç®¡ç†å‘˜æ“ä½œï¼‰

### 6.4 æ€§èƒ½ä¼˜åŒ–

#### 6.4.1 å¤§æ‰¹é‡å­—æ®µå¤„ç†

**åœºæ™¯ï¼š** ç”²æ–¹ä¸€æ¬¡æ€§æ¨é€å¤§é‡å­—æ®µï¼ˆå¦‚1000+å­—æ®µï¼‰

**å¤„ç†æ–¹æ¡ˆï¼š**
```python
def batch_process_fields(tenant_id, fields, batch_size=100):
    """
    æ‰¹é‡å¤„ç†å­—æ®µ
    """
    total = len(fields)
    processed = 0
    
    for i in range(0, total, batch_size):
        batch = fields[i:i+batch_size]
        
        # æ‰¹é‡æ’å…¥æ•°æ®åº“
        batch_save_fields(tenant_id, batch)
        
        processed += len(batch)
        
        # æ›´æ–°è¿›åº¦ï¼ˆå¯é€‰ï¼‰
        update_progress(tenant_id, processed, total)
    
    return processed
```

**ä¼˜åŒ–ç­–ç•¥ï¼š**
- ä½¿ç”¨æ‰¹é‡æ’å…¥ï¼ˆbatch insertï¼‰å‡å°‘æ•°æ®åº“æ“ä½œ
- åˆ†æ‰¹å¤„ç†ï¼Œé¿å…å†…å­˜æº¢å‡º
- å¼‚æ­¥å¤„ç†ï¼ˆå¯é€‰ï¼‰ï¼Œæé«˜å“åº”é€Ÿåº¦

#### 6.4.2 å­—æ®µåŒ¹é…æ€§èƒ½ä¼˜åŒ–

**åœºæ™¯ï¼š** è‡ªåŠ¨åŒ¹é…åŠŸèƒ½åœ¨å¤„ç†å¤§é‡å­—æ®µæ—¶æ€§èƒ½è¾ƒæ…¢

**å¤„ç†æ–¹æ¡ˆï¼š**
```python
def optimized_auto_match(tenant_id):
    """
    ä¼˜åŒ–çš„è‡ªåŠ¨åŒ¹é…ç®—æ³•
    """
    # 1. ä½¿ç”¨ç¼“å­˜å­˜å‚¨æ ‡å‡†å­—æ®µä¿¡æ¯
    standard_fields_cache = get_standard_fields_cache()
    
    # 2. ä½¿ç”¨ç´¢å¼•åŠ é€ŸæŸ¥æ‰¾
    tenant_fields = get_tenant_fields_with_index(tenant_id)
    
    # 3. å¹¶è¡Œå¤„ç†ï¼ˆå¤šçº¿ç¨‹/å¤šè¿›ç¨‹ï¼‰
    from concurrent.futures import ThreadPoolExecutor
    
    with ThreadPoolExecutor(max_workers=4) as executor:
        futures = []
        for std_field in standard_fields_cache:
            future = executor.submit(
                find_best_match,
                std_field,
                tenant_fields
            )
            futures.append(future)
        
        results = [f.result() for f in futures]
    
    return results
```

**ä¼˜åŒ–ç­–ç•¥ï¼š**
- ä½¿ç”¨ç¼“å­˜å‡å°‘æ•°æ®åº“æŸ¥è¯¢
- å»ºç«‹ç´¢å¼•åŠ é€Ÿå­—æ®µæŸ¥æ‰¾
- å¹¶è¡Œå¤„ç†æé«˜åŒ¹é…é€Ÿåº¦
- ä½¿ç”¨ç›¸ä¼¼åº¦ç®—æ³•ä¼˜åŒ–ï¼ˆå¦‚ï¼šTF-IDFã€ç¼–è¾‘è·ç¦»ï¼‰

---

## ä¸ƒã€APIæ¥å£æ¸…å•

### 7.1 å­—æ®µåŒæ­¥æ¥å£

| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/v1/tenants/{tenant_code}/fields-sync` | POST | åŒæ­¥ç”²æ–¹å­—æ®µå®šä¹‰ |
| `/api/v1/tenants/{tenant_id}/fields-json` | GET | è·å–ç”²æ–¹å­—æ®µJSONæ•°æ® |
| `/api/v1/tenants/{tenant_id}/fields-json/history` | GET | è·å–å­—æ®µç‰ˆæœ¬å†å² |

### 7.2 å­—æ®µæ˜ å°„æ¥å£

| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/v1/tenants/{tenant_id}/fields` | GET | è·å–å­—æ®µæ˜ å°„é…ç½®åˆ—è¡¨ |
| `/api/v1/tenants/{tenant_id}/fields/{field_id}` | PUT | æ›´æ–°å­—æ®µæ˜ å°„é…ç½® |
| `/api/v1/tenants/{tenant_id}/fields/auto-suggest-mapping` | POST | ä¸€é”®å»ºè®®æ˜ å°„ |
| `/api/v1/tenants/{tenant_id}/fields/match` | POST | æ‰‹åŠ¨åŒ¹é…å­—æ®µ |

### 7.3 æ‹“å±•å­—æ®µæ¥å£

| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/v1/tenants/{tenant_id}/extended-fields` | GET | è·å–æ‹“å±•å­—æ®µåˆ—è¡¨ |
| `/api/v1/tenants/{tenant_id}/extended-fields` | POST | åˆ›å»ºæ‹“å±•å­—æ®µ |
| `/api/v1/tenants/{tenant_id}/extended-fields/{field_id}` | PUT | æ›´æ–°æ‹“å±•å­—æ®µ |
| `/api/v1/tenants/{tenant_id}/extended-fields/{field_id}` | DELETE | åˆ é™¤æ‹“å±•å­—æ®µ |

### 7.4 æœªä½¿ç”¨å­—æ®µæ¥å£

| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/v1/tenants/{tenant_id}/unmapped-fields` | GET | è·å–æœªä½¿ç”¨çš„ç”²æ–¹å­—æ®µ |
| `/api/v1/tenants/{tenant_id}/unmapped-fields/batch-match` | POST | æ‰¹é‡åŒ¹é…å­—æ®µ |
| `/api/v1/tenants/{tenant_id}/unmapped-fields/batch-extend` | POST | æ‰¹é‡åˆ›å»ºæ‹“å±•å­—æ®µ |

---

## å…«ã€æ•°æ®å®‰å…¨ä¸æƒé™

### 8.1 æ•°æ®å®‰å…¨

1. **æ¥å£è®¤è¯**
   - ä½¿ç”¨Bearer Tokenè®¤è¯
   - æ”¯æŒAPI Keyè®¤è¯ï¼ˆå¯é€‰ï¼‰
   - è®°å½•æ¥å£è°ƒç”¨æ—¥å¿—

2. **æ•°æ®åŠ å¯†**
   - æ•æ„Ÿå­—æ®µï¼ˆå¦‚PIIï¼‰åŠ å¯†å­˜å‚¨
   - ä¼ è¾“ä½¿ç”¨HTTPS
   - æ•°æ®åº“è¿æ¥åŠ å¯†

3. **æ•°æ®å¤‡ä»½**
   - å®šæœŸå¤‡ä»½å­—æ®µå®šä¹‰æ•°æ®
   - ä¿ç•™ç‰ˆæœ¬å†å²ï¼ˆæ”¯æŒå›æ»šï¼‰
   - å¼‚åœ°å¤‡ä»½ï¼ˆå¯é€‰ï¼‰

### 8.2 æƒé™æ§åˆ¶

| æ“ä½œ | æƒé™è¦æ±‚ |
|------|---------|
| æŸ¥çœ‹æ ‡å‡†å­—æ®µ | æ‰€æœ‰ç”¨æˆ· |
| ç¼–è¾‘æ ‡å‡†å­—æ®µ | ç³»ç»Ÿç®¡ç†å‘˜ |
| æŸ¥çœ‹ç”²æ–¹å­—æ®µ | ç”²æ–¹ç®¡ç†å‘˜/ç³»ç»Ÿç®¡ç†å‘˜ |
| é…ç½®å­—æ®µæ˜ å°„ | ç”²æ–¹ç®¡ç†å‘˜/ç³»ç»Ÿç®¡ç†å‘˜ |
| åˆ›å»ºæ‹“å±•å­—æ®µ | ç”²æ–¹ç®¡ç†å‘˜/ç³»ç»Ÿç®¡ç†å‘˜ |
| åˆ é™¤å­—æ®µ | ç³»ç»Ÿç®¡ç†å‘˜ |

---

## ä¹ã€ç›‘æ§ä¸å‘Šè­¦

### 9.1 ç›‘æ§æŒ‡æ ‡

1. **åŒæ­¥ç›‘æ§**
   - å­—æ®µåŒæ­¥æˆåŠŸç‡
   - åŒæ­¥å»¶è¿Ÿæ—¶é—´
   - åŒæ­¥é¢‘ç‡ç»Ÿè®¡

2. **æ˜ å°„ç›‘æ§**
   - å¿…å¡«å­—æ®µæ˜ å°„å®Œæˆç‡
   - æœªä½¿ç”¨å­—æ®µæ•°é‡
   - è‡ªåŠ¨åŒ¹é…æˆåŠŸç‡

3. **æ•°æ®è´¨é‡ç›‘æ§**
   - å­—æ®µç±»å‹é”™è¯¯ç‡
   - æšä¸¾å€¼æ˜ å°„å®Œæ•´ç‡
   - å­—æ®µæ›´æ–°æ—¶é—´åˆ†å¸ƒ

### 9.2 å‘Šè­¦è§„åˆ™

| å‘Šè­¦ç±»å‹ | è§¦å‘æ¡ä»¶ | å‘Šè­¦çº§åˆ« |
|---------|---------|---------|
| å¿…å¡«å­—æ®µæœªæ˜ å°„ | å¿…å¡«å­—æ®µæœªæ˜ å°„æ•°é‡ > 0 | ğŸ”´ é«˜ |
| æœªä½¿ç”¨å­—æ®µè¿‡å¤š | æœªä½¿ç”¨å­—æ®µæ•°é‡ > 10 | ğŸŸ¡ ä¸­ |
| åŒæ­¥å¤±è´¥ | è¿ç»­3æ¬¡åŒæ­¥å¤±è´¥ | ğŸ”´ é«˜ |
| ç‰ˆæœ¬å†²çª | æ£€æµ‹åˆ°ç‰ˆæœ¬å†²çª | ğŸŸ¡ ä¸­ |
| å­—æ®µç±»å‹é”™è¯¯ | å­—æ®µç±»å‹é”™è¯¯ç‡ > 5% | ğŸŸ¡ ä¸­ |

---

## åã€æœ€ä½³å®è·µ

### 10.1 ç”²æ–¹æ¥å…¥å»ºè®®

1. **å­—æ®µå‘½åè§„èŒƒ**
   - ä½¿ç”¨æœ‰æ„ä¹‰çš„å­—æ®µæ ‡è¯†ï¼ˆå¦‚ï¼š`USER_ID`è€Œé`FIELD_001`ï¼‰
   - ä¿æŒå­—æ®µåç§°ä¸€è‡´æ€§
   - é¿å…é¢‘ç¹å˜æ›´å­—æ®µæ ‡è¯†

2. **åŒæ­¥é¢‘ç‡å»ºè®®**
   - å»ºè®®æ¯å¤©åŒæ­¥ä¸€æ¬¡
   - å­—æ®µå®šä¹‰å˜æ›´æ—¶ç«‹å³åŒæ­¥
   - é¿å…è¿‡äºé¢‘ç¹çš„åŒæ­¥ï¼ˆå¦‚æ¯åˆ†é’Ÿï¼‰

3. **å­—æ®µç±»å‹é€‰æ‹©**
   - ä¸¥æ ¼æŒ‰ç…§å®é™…æ•°æ®ç±»å‹é€‰æ‹©
   - Enumç±»å‹æä¾›å®Œæ•´çš„æšä¸¾å€¼åˆ—è¡¨
   - æ—¥æœŸæ—¶é—´ä½¿ç”¨ISO8601æ ¼å¼

### 10.2 ç³»ç»Ÿç®¡ç†å‘˜å»ºè®®

1. **æ ‡å‡†å­—æ®µç®¡ç†**
   - æ–°å¢æ ‡å‡†å­—æ®µå‰å……åˆ†è¯„ä¼°
   - é¿å…é¢‘ç¹å˜æ›´å­—æ®µæ ‡è¯†
   - åŠæ—¶æ ‡è®°å¿…å¡«å­—æ®µ

2. **æ˜ å°„é…ç½®**
   - å®šæœŸæ£€æŸ¥å¿…å¡«å­—æ®µæ˜ å°„æƒ…å†µ
   - åŠæ—¶å¤„ç†æœªä½¿ç”¨çš„ç”²æ–¹å­—æ®µ
   - ä½¿ç”¨è‡ªåŠ¨åŒ¹é…åŠŸèƒ½æé«˜æ•ˆç‡

3. **æ•°æ®ç»´æŠ¤**
   - å®šæœŸæ¸…ç†å·²åˆ é™¤çš„å­—æ®µ
   - ä¿ç•™å­—æ®µç‰ˆæœ¬å†å²
   - ç›‘æ§æ•°æ®è´¨é‡æŒ‡æ ‡

---

## åä¸€ã€é™„å½•

### 11.1 å­—æ®µç±»å‹è¯´æ˜

| ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|------|------|--------|
| String | æ–‡æœ¬ç±»å‹ | "å¼ ä¸‰" |
| Integer | æ•´æ•°ç±»å‹ | 12345 |
| Decimal | å°æ•°ç±»å‹ | 123.45 |
| Date | æ—¥æœŸç±»å‹ | "2024-11-11" |
| Datetime | æ—¥æœŸæ—¶é—´ç±»å‹ | "2024-11-11T10:30:00Z" |
| Boolean | å¸ƒå°”ç±»å‹ | true/false |
| Enum | æšä¸¾ç±»å‹ | éœ€æä¾›enum_values |

### 11.2 é”™è¯¯ç è¯´æ˜

| é”™è¯¯ç  | è¯´æ˜ |
|--------|------|
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 401 | æœªæˆæƒ |
| 404 | èµ„æºä¸å­˜åœ¨ |
| 409 | ç‰ˆæœ¬å†²çª |
| 422 | æ•°æ®éªŒè¯å¤±è´¥ |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |

### 11.3 ç›¸å…³æ–‡æ¡£

- [CCOå­—æ®µé…ç½®ç³»ç»Ÿè®¾è®¡.md](./CCOå­—æ®µé…ç½®ç³»ç»Ÿè®¾è®¡.md)
- [ç”²æ–¹å­—æ®µç®¡ç†é‡æ„è¯´æ˜.md](./ç”²æ–¹å­—æ®µç®¡ç†é‡æ„è¯´æ˜.md)
- [æ ‡å‡†å­—æ®µæ›´æ–°å®ŒæˆæŠ¥å‘Š.md](./backend/æ ‡å‡†å­—æ®µæ›´æ–°å®ŒæˆæŠ¥å‘Š.md)

---

## åäºŒã€ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | è¯´æ˜ |
|------|------|------|
| v1.0.0 | 2024-11-11 | åˆå§‹ç‰ˆæœ¬ï¼Œå®Œæ•´æŠ€æœ¯æ–‡æ¡£ |

---

**æ–‡æ¡£ç»´æŠ¤ï¼š** æŠ€æœ¯å›¢é˜Ÿ  
**æœ€åæ›´æ–°ï¼š** 2024-11-11

