# å‰ç«¯ç¡¬ç¼–ç 8000ç«¯å£ä¿®å¤è¯´æ˜

**é—®é¢˜å‘ç°æ—¥æœŸ**: 2025-11-22  
**çŠ¶æ€**: ğŸ”§ éƒ¨åˆ†ä¿®å¤ï¼Œéœ€æ‰¹é‡æ›´æ–°

---

## ğŸ› é—®é¢˜æè¿°

è™½ç„¶ä¿®æ”¹äº† `utils/request.ts` çš„é»˜è®¤URLä¸º8080ï¼Œä½†å¾ˆå¤šVueç»„ä»¶ä¸­ä»ç„¶ç›´æ¥hardcodedäº† `http://localhost:8000`ã€‚

### å—å½±å“çš„æ–‡ä»¶

å…±34ä¸ªç¡¬ç¼–ç ä½ç½®éœ€è¦ä¿®æ”¹ï¼š

#### ç»„ç»‡ç®¡ç†ç›¸å…³
- `views/organization/AdminAccountManagement.vue` - 6å¤„
- `views/organization/AgencyManagement.vue` - 2å¤„  
- `views/organization/CollectorManagement.vue` - 7å¤„
- `views/organization/TeamManagement.vue` - 5å¤„
- `views/organization/TeamGroupManagement.vue` - 5å¤„

#### æ¡ˆä»¶ç®¡ç†ç›¸å…³
- `views/case-management/CaseList.vue` - 1å¤„

#### ç”²æ–¹ç®¡ç†ç›¸å…³
- `views/tenant-management/TenantList.vue` - 6å¤„
- `views/tenant-management/QueueManagement.vue` - 1å¤„

#### Composables
- `composables/useFieldDisplayConfig.ts` - 1å¤„ âœ… **å·²ä¿®å¤**

---

## âœ… å·²åˆ›å»ºçš„è§£å†³æ–¹æ¡ˆ

### 1. åˆ›å»ºç»Ÿä¸€APIé…ç½®

**æ–‡ä»¶**: `frontend/src/config/api.ts`

```typescript
export const API_BASE_URL = import.meta.env.VITE_API_BASE_URL || 'http://localhost:8080'

export function getApiUrl(path: string): string {
  const cleanPath = path.startsWith('/') ? path : `/${path}`
  return `${API_BASE_URL}/api/v1${cleanPath}`
}
```

### 2. ä½¿ç”¨ç¤ºä¾‹

**ä¿®æ”¹å‰**:
```typescript
const url = `http://localhost:8000/api/v1/tenants/${id}/agencies`
```

**ä¿®æ”¹å**:
```typescript
import { getApiUrl } from '@/config/api'
const url = `${getApiUrl('tenants')}/${id}/agencies`
```

æˆ–è€…ï¼š
```typescript
import { API_BASE_URL } from '@/config/api'
const url = `${API_BASE_URL}/api/v1/tenants/${id}/agencies`
```

---

## ğŸ”§ æ‰¹é‡ä¿®å¤è„šæœ¬

æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ‰¹é‡æ›¿æ¢ï¼š

```bash
cd /Users/zhangyang/Documents/GitHub/CollectionONE/frontend/src

# æ–¹æ³•1: ä½¿ç”¨sedæ‰¹é‡æ›¿æ¢
find . -name "*.vue" -o -name "*.ts" | xargs sed -i '' 's|http://localhost:8000|http://localhost:8080|g'

# æ–¹æ³•2: æ‰‹åŠ¨ä½¿ç”¨VS Codeå…¨å±€æœç´¢æ›¿æ¢
# æœç´¢: http://localhost:8000
# æ›¿æ¢ä¸º: http://localhost:8080
```

---

## ğŸ“‹ è¯¦ç»†ä¿®å¤æ¸…å•

### AdminAccountManagement.vue (6å¤„)

```typescript
// ä¿®æ”¹å‰
const url = `http://localhost:8000/api/v1/tenants/${currentTenantId.value}/agencies`

// ä¿®æ”¹å
import { API_BASE_URL } from '@/config/api'
const url = `${API_BASE_URL}/api/v1/tenants/${currentTenantId.value}/agencies`
```

### å…¶ä»–æ–‡ä»¶ç±»ä¼¼ä¿®æ”¹

æ‰€æœ‰ `http://localhost:8000` éƒ½éœ€è¦æ›¿æ¢ä¸º `http://localhost:8080` æˆ–ä½¿ç”¨ `API_BASE_URL`ã€‚

---

## ğŸš€ å¿«é€Ÿä¿®å¤æ–¹æ¡ˆï¼ˆæ¨èï¼‰

**æœ€ç®€å•çš„æ–¹æ³•**ï¼š

```bash
cd /Users/zhangyang/Documents/GitHub/CollectionONE/frontend/src

# æ‰¹é‡æ›¿æ¢æ‰€æœ‰8000ä¸º8080
find . -type f \( -name "*.vue" -o -name "*.ts" \) -exec sed -i '' 's/localhost:8000/localhost:8080/g' {} +

# éªŒè¯ä¿®æ”¹
grep -r "localhost:8000" . --include="*.ts" --include="*.vue" | wc -l
# åº”è¯¥è¿”å› 0
```

---

## âš ï¸ ä¸´æ—¶è§£å†³æ–¹æ¡ˆ

å¦‚æœæ‚¨ç°åœ¨ä¸æƒ³æ‰¹é‡ä¿®æ”¹ï¼Œå¯ä»¥ä¸´æ—¶é‡å¯Pythonåç«¯åœ¨8000ç«¯å£ï¼š

```bash
cd /Users/zhangyang/Documents/GitHub/CollectionONE/backend
source venv/bin/activate
uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
```

ä½†è¿™**ä¸æ˜¯é•¿ä¹…ä¹‹è®¡**ï¼Œå› ä¸ºPythonåç«¯å·²ç»åºŸå¼ƒã€‚

---

## âœ… å»ºè®®çš„ä¿®å¤æ­¥éª¤

1. **ç«‹å³æ‰§è¡Œæ‰¹é‡æ›¿æ¢**ï¼ˆ5ç§’å®Œæˆï¼‰:
```bash
cd /Users/zhangyang/Documents/GitHub/CollectionONE/frontend/src
find . -type f \( -name "*.vue" -o -name "*.ts" \) -exec sed -i '' 's/localhost:8000/localhost:8080/g' {} +
```

2. **éªŒè¯ä¿®æ”¹**:
```bash
grep -r "localhost:8000" . --include="*.ts" --include="*.vue"
# åº”è¯¥æ²¡æœ‰è¾“å‡º
```

3. **é‡å¯å‰ç«¯**:
```bash
cd /Users/zhangyang/Documents/GitHub/CollectionONE/frontend
npm run dev
```

4. **åˆ·æ–°æµè§ˆå™¨é¡µé¢**

---

## ğŸ¯ é¢„æœŸç»“æœ

ä¿®å¤åï¼š
- âœ… æ‰€æœ‰APIè°ƒç”¨éƒ½æŒ‡å‘8080ç«¯å£ï¼ˆJavaåç«¯ï¼‰
- âœ… ä¸å†æœ‰404é”™è¯¯
- âœ… æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ

---

**çŠ¶æ€**: ğŸŸ¡ å·²åˆ›å»ºé…ç½®æ–‡ä»¶å’Œä¿®å¤æ–¹æ¡ˆï¼Œç­‰å¾…æ‰¹é‡æ‰§è¡Œ


