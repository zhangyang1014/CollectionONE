# ç”²æ–¹æ ¸å¿ƒç³»ç»Ÿ - åº”æä¾›æ¥å£æ–‡æ¡£

## ğŸ“‹ æ¥å£æ¦‚è¿°

æœ¬æ–‡æ¡£å®šä¹‰äº†ç”²æ–¹æ ¸å¿ƒç³»ç»Ÿï¼ˆè´·æ¬¾ç³»ç»Ÿ/ä¿¡è´·ç³»ç»Ÿï¼‰åº”æä¾›ç»™CCOå‚¬æ”¶ç³»ç»Ÿçš„æ¥å£è§„èŒƒã€‚è¿™äº›æ¥å£ç”¨äºæ•°æ®åŒæ­¥ã€çŠ¶æ€å›å†™ã€å®æ—¶æŸ¥è¯¢ç­‰åŠŸèƒ½ã€‚

**æ¥å£é›†æˆæ–¹å¼**: 
1. **æ¨é€æ¨¡å¼**: ç”²æ–¹ä¸»åŠ¨æ¨é€æ•°æ®åˆ°CCOï¼ˆæ¡ˆä»¶æ•°æ®ã€è¿˜æ¬¾æ•°æ®ï¼‰
2. **æ‹‰å–æ¨¡å¼**: CCOä¸»åŠ¨æŸ¥è¯¢ç”²æ–¹æ•°æ®ï¼ˆå®¢æˆ·è¯¦æƒ…ã€è´·æ¬¾è¯¦æƒ…ï¼‰
3. **å›è°ƒæ¨¡å¼**: CCOå›å†™å‚¬æ”¶ç»“æœåˆ°ç”²æ–¹

**å»ºè®®ä½¿ç”¨**: REST API + JSONæ ¼å¼

**è®¤è¯æ–¹å¼**: API Key + Secretç­¾åè®¤è¯

---

## ğŸ” 1. è®¤è¯é‰´æƒ

### 1.1 APIè®¤è¯æœºåˆ¶

**æ–¹å¼1: API Keyè®¤è¯**

è¯·æ±‚å¤´æºå¸¦:
```
X-Api-Key: {api_key}
X-Api-Secret: {api_secret}
X-Timestamp: {timestamp}
X-Signature: {signature}
```

ç­¾åç®—æ³•:
```
signature = HMAC-SHA256(api_secret, api_key + timestamp + request_body)
```

**æ–¹å¼2: OAuth 2.0**

ç”²æ–¹æä¾›OAuthæˆæƒæœåŠ¡ï¼ŒCCOé€šè¿‡Client Credentialsæ–¹å¼è·å–access_tokenã€‚

---

## ğŸ“¦ 2. æ¡ˆä»¶æ•°æ®æ¨é€ï¼ˆç”²æ–¹â†’CCOï¼‰

### 2.1 æ‰¹é‡æ¨é€é€¾æœŸæ¡ˆä»¶

**æ¥å£**: `POST {cco_base_url}/api/v1/webhook/cases/import`

**æè¿°**: ç”²æ–¹æ ¸å¿ƒç³»ç»Ÿæ¯æ—¥å®šæ—¶æ¨é€é€¾æœŸæ¡ˆä»¶æ•°æ®åˆ°CCO

**é¢‘ç‡**: å»ºè®®æ¯å¤©1-2æ¬¡ï¼ˆæ—©ä¸Š8ç‚¹ã€ä¸‹åˆ2ç‚¹ï¼‰

**è¯·æ±‚å¤´**:
```
Content-Type: application/json
X-Tenant-Code: TENANT_A
X-Api-Key: {api_key}
X-Signature: {signature}
```

**è¯·æ±‚Body**:
```json
{
  "push_time": "2025-11-20T08:00:00",
  "push_batch_no": "BATCH_20251120_001",
  "cases": [
    {
      "case_code": "CASE_001",
      "user_id": "USER_001",
      "user_name": "é™ˆå¤§æ˜",
      "mobile": "+63-917-111-1111",
      "id_number": "ID123456789",
      "email": "user001@example.com",
      "address": "é©¬å°¼æ‹‰å¸‚ä¸­å¿ƒåŒº",
      "gender": "M",
      "date_of_birth": "1990-05-15",
      
      "loan_id": "LOAN_001",
      "loan_product_name": "å¿«é€Ÿè´·",
      "loan_amount": 5000.00,
      "loan_date": "2025-10-01",
      "due_date": "2025-11-05",
      "loan_term": 30,
      "interest_rate": 0.15,
      
      "repaid_amount": 1000.00,
      "outstanding_principal": 4000.00,
      "outstanding_interest": 500.00,
      "outstanding_penalty": 200.00,
      "outstanding_amount": 4700.00,
      
      "overdue_days": 15,
      "overdue_amount": 4700.00,
      
      "case_status": "pending_repayment",
      "case_priority": "normal",
      "case_tags": ["é¦–é€¾", "å°é¢"],
      
      "contact_phones": [
        {
          "phone_number": "+63-917-111-1111",
          "phone_type": "mobile",
          "contact_name": "æœ¬äºº",
          "is_primary": true
        },
        {
          "phone_number": "+63-917-222-2222",
          "phone_type": "mobile",
          "contact_name": "ç´§æ€¥è”ç³»äºº",
          "relationship": "äº²å±",
          "is_primary": false
        }
      ],
      
      "repayment_history": [
        {
          "repayment_id": "PAY_001",
          "repayment_date": "2025-10-15",
          "repayment_amount": 1000.00,
          "repayment_channel": "bank_transfer"
        }
      ],
      
      "custom_fields": {
        "employer": "ABCå…¬å¸",
        "monthly_income": 15000.00,
        "credit_score": 650
      }
    }
  ]
}
```

**å­—æ®µè¯´æ˜**:

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| case_code | String | æ˜¯ | æ¡ˆä»¶ç¼–å·ï¼ˆç”²æ–¹ç³»ç»Ÿçš„å”¯ä¸€æ ‡è¯†ï¼‰ |
| user_id | String | æ˜¯ | ç”¨æˆ·ID |
| user_name | String | æ˜¯ | å®¢æˆ·å§“å |
| mobile | String | æ˜¯ | æ‰‹æœºå· |
| loan_amount | Decimal | æ˜¯ | è´·æ¬¾é‡‘é¢ |
| outstanding_amount | Decimal | æ˜¯ | é€¾æœŸæ€»é‡‘é¢ |
| overdue_days | Integer | æ˜¯ | é€¾æœŸå¤©æ•° |
| due_date | Date | æ˜¯ | åº”è¿˜æ¬¾æ—¥æœŸ |

**CCOå“åº”**:
```json
{
  "code": 200,
  "message": "æ¥æ”¶æˆåŠŸ",
  "data": {
    "push_batch_no": "BATCH_20251120_001",
    "received_time": "2025-11-20T08:00:05",
    "total": 100,
    "success": 98,
    "failed": 2,
    "errors": [
      {
        "case_code": "CASE_099",
        "error": "mobileæ ¼å¼é”™è¯¯"
      },
      {
        "case_code": "CASE_100",
        "error": "é‡å¤æ¡ˆä»¶ç¼–å·"
      }
    ]
  }
}
```

### 2.2 æ¡ˆä»¶çŠ¶æ€æ›´æ–°æ¨é€

**æ¥å£**: `POST {cco_base_url}/api/v1/webhook/cases/status-update`

**æè¿°**: å½“ç”²æ–¹ç³»ç»Ÿæ¡ˆä»¶çŠ¶æ€å˜åŒ–æ—¶ï¼ˆå¦‚å®¢æˆ·å·²è¿˜æ¬¾ï¼‰ï¼Œå®æ—¶æ¨é€åˆ°CCO

**è¯·æ±‚Body**:
```json
{
  "case_code": "CASE_001",
  "update_time": "2025-11-20T14:30:00",
  "case_status": "settled",
  "repaid_amount": 5000.00,
  "outstanding_amount": 0.00,
  "settlement_date": "2025-11-20",
  "notes": "å®¢æˆ·å·²å…¨é¢è¿˜æ¬¾"
}
```

**CCOå“åº”**:
```json
{
  "code": 200,
  "message": "çŠ¶æ€æ›´æ–°æˆåŠŸ",
  "data": {
    "case_code": "CASE_001",
    "old_status": "pending_repayment",
    "new_status": "settled",
    "updated_at": "2025-11-20T14:30:02"
  }
}
```

### 2.3 è¿˜æ¬¾è®°å½•æ¨é€

**æ¥å£**: `POST {cco_base_url}/api/v1/webhook/repayments`

**æè¿°**: å½“å®¢æˆ·äº§ç”Ÿè¿˜æ¬¾æ—¶ï¼Œç”²æ–¹å®æ—¶æ¨é€è¿˜æ¬¾è®°å½•

**è¯·æ±‚Body**:
```json
{
  "repayment_id": "PAY_002",
  "case_code": "CASE_001",
  "user_id": "USER_001",
  "repayment_amount": 2000.00,
  "repayment_date": "2025-11-20T15:00:00",
  "repayment_channel": "bank_transfer",
  "transaction_no": "TXN123456789",
  "notes": "é“¶è¡Œè½¬è´¦"
}
```

---

## ğŸ” 3. æ•°æ®æŸ¥è¯¢æ¥å£ï¼ˆCCOâ†’ç”²æ–¹ï¼‰

### 3.1 æŸ¥è¯¢å®¢æˆ·è¯¦ç»†ä¿¡æ¯

**æ¥å£**: `GET {tenant_base_url}/api/customers/{user_id}`

**æè¿°**: CCOæŸ¥è¯¢å®¢æˆ·çš„å®Œæ•´ä¸ªäººä¿¡æ¯ï¼ˆå®åè®¤è¯ã€ç´§æ€¥è”ç³»äººç­‰ï¼‰

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}
X-Tenant-Code: TENANT_A
```

**ç”²æ–¹å“åº”**:
```json
{
  "code": 200,
  "data": {
    "user_id": "USER_001",
    "user_name": "é™ˆå¤§æ˜",
    "mobile": "+63-917-111-1111",
    "email": "user001@example.com",
    "id_type": "èº«ä»½è¯",
    "id_number": "ID123456789",
    "gender": "M",
    "date_of_birth": "1990-05-15",
    "nationality": "PH",
    "address": "é©¬å°¼æ‹‰å¸‚ä¸­å¿ƒåŒº123å·",
    "postal_code": "1000",
    
    "kyc_info": {
      "kyc_status": "verified",
      "kyc_level": "2",
      "verified_date": "2025-09-15"
    },
    
    "employment_info": {
      "employer": "ABCå…¬å¸",
      "position": "è½¯ä»¶å·¥ç¨‹å¸ˆ",
      "monthly_income": 15000.00,
      "employment_status": "employed"
    },
    
    "emergency_contacts": [
      {
        "contact_name": "ç‹å°çº¢",
        "relationship": "é…å¶",
        "mobile": "+63-917-222-2222"
      },
      {
        "contact_name": "é™ˆå¤§å‹‡",
        "relationship": "å…„å¼Ÿ",
        "mobile": "+63-917-333-3333"
      }
    ],
    
    "bank_accounts": [
      {
        "bank_name": "BDO",
        "account_no": "****1234",
        "account_name": "é™ˆå¤§æ˜",
        "is_primary": true
      }
    ]
  }
}
```

### 3.2 æŸ¥è¯¢è´·æ¬¾è¯¦æƒ…

**æ¥å£**: `GET {tenant_base_url}/api/loans/{loan_id}`

**æè¿°**: CCOæŸ¥è¯¢è´·æ¬¾çš„è¯¦ç»†ä¿¡æ¯å’Œåˆ†æœŸè®¡åˆ’

**ç”²æ–¹å“åº”**:
```json
{
  "code": 200,
  "data": {
    "loan_id": "LOAN_001",
    "user_id": "USER_001",
    "loan_product_code": "QUICK_LOAN",
    "loan_product_name": "å¿«é€Ÿè´·",
    "loan_amount": 5000.00,
    "loan_date": "2025-10-01",
    "loan_term": 30,
    "interest_rate": 0.15,
    "loan_status": "overdue",
    
    "repayment_plan": [
      {
        "period": 1,
        "due_date": "2025-11-05",
        "principal_amount": 5000.00,
        "interest_amount": 750.00,
        "total_amount": 5750.00,
        "repaid_amount": 1000.00,
        "outstanding_amount": 4750.00,
        "status": "overdue"
      }
    ],
    
    "repayment_summary": {
      "total_repaid": 1000.00,
      "outstanding_principal": 4000.00,
      "outstanding_interest": 500.00,
      "outstanding_penalty": 200.00,
      "total_outstanding": 4700.00
    },
    
    "overdue_info": {
      "overdue_days": 15,
      "overdue_start_date": "2025-11-06",
      "penalty_rate": 0.05,
      "daily_penalty": 10.00
    }
  }
}
```

### 3.3 æŸ¥è¯¢è¿˜æ¬¾è®°å½•

**æ¥å£**: `GET {tenant_base_url}/api/loans/{loan_id}/repayments`

**æè¿°**: æŸ¥è¯¢è´·æ¬¾çš„æ‰€æœ‰è¿˜æ¬¾è®°å½•

**ç”²æ–¹å“åº”**:
```json
{
  "code": 200,
  "data": {
    "loan_id": "LOAN_001",
    "total_repayments": 2,
    "repayments": [
      {
        "repayment_id": "PAY_001",
        "repayment_date": "2025-10-15",
        "repayment_amount": 500.00,
        "principal_amount": 400.00,
        "interest_amount": 100.00,
        "repayment_channel": "bank_transfer",
        "transaction_no": "TXN111"
      },
      {
        "repayment_id": "PAY_002",
        "repayment_date": "2025-11-01",
        "repayment_amount": 500.00,
        "principal_amount": 400.00,
        "interest_amount": 100.00,
        "repayment_channel": "ewallet",
        "transaction_no": "TXN222"
      }
    ]
  }
}
```

### 3.4 æ‰¹é‡æŸ¥è¯¢æ¡ˆä»¶æœ€æ–°çŠ¶æ€

**æ¥å£**: `POST {tenant_base_url}/api/cases/batch-status`

**æè¿°**: CCOæ‰¹é‡æŸ¥è¯¢æ¡ˆä»¶åœ¨ç”²æ–¹ç³»ç»Ÿçš„æœ€æ–°çŠ¶æ€

**è¯·æ±‚Body**:
```json
{
  "case_codes": ["CASE_001", "CASE_002", "CASE_003"]
}
```

**ç”²æ–¹å“åº”**:
```json
{
  "code": 200,
  "data": [
    {
      "case_code": "CASE_001",
      "case_status": "settled",
      "outstanding_amount": 0.00,
      "last_repayment_date": "2025-11-20"
    },
    {
      "case_code": "CASE_002",
      "case_status": "pending_repayment",
      "outstanding_amount": 8000.00,
      "overdue_days": 25
    }
  ]
}
```

---

## ğŸ“ 4. å‚¬æ”¶ç»“æœå›å†™ï¼ˆCCOâ†’ç”²æ–¹ï¼‰

### 4.1 å›å†™æ²Ÿé€šè®°å½•

**æ¥å£**: `POST {tenant_base_url}/api/collection/communications`

**æè¿°**: CCOå°†å‚¬å‘˜çš„æ²Ÿé€šè®°å½•å›å†™åˆ°ç”²æ–¹ç³»ç»Ÿ

**è¯·æ±‚Body**:
```json
{
  "case_code": "CASE_001",
  "communication_id": "COMM_001",
  "collector_id": "COL_001",
  "collector_name": "ç‹å°æ˜",
  "contact_time": "2025-11-20T10:00:00",
  "contact_method": "phone",
  "contact_phone": "+63-917-111-1111",
  "contact_result": "æ¥é€š",
  "communication_content": "å®¢æˆ·è¡¨ç¤ºä¸‹å‘¨ä¸€è¿˜æ¬¾2000å…ƒ",
  "next_follow_up_time": "2025-11-25T10:00:00",
  "call_duration_seconds": 180
}
```

**ç”²æ–¹å“åº”**:
```json
{
  "code": 200,
  "message": "æ²Ÿé€šè®°å½•å·²ä¿å­˜",
  "data": {
    "communication_id": "COMM_001",
    "saved_at": "2025-11-20T10:00:05"
  }
}
```

### 4.2 å›å†™PTPæ‰¿è¯º

**æ¥å£**: `POST {tenant_base_url}/api/collection/ptp`

**æè¿°**: CCOå°†å‚¬å‘˜è·å–çš„PTPæ‰¿è¯ºè®°å½•å›å†™

**è¯·æ±‚Body**:
```json
{
  "case_code": "CASE_001",
  "ptp_id": "PTP_001",
  "collector_id": "COL_001",
  "collector_name": "ç‹å°æ˜",
  "promise_date": "2025-11-25",
  "promise_amount": 2000.00,
  "promise_method": "bank_transfer",
  "promise_time": "2025-11-20T10:05:00",
  "notes": "å®¢æˆ·æ‰¿è¯ºä¸‹å‘¨ä¸€è¿˜æ¬¾2000",
  "confidence_level": "high"
}
```

**ç”²æ–¹å“åº”**:
```json
{
  "code": 200,
  "message": "PTPè®°å½•å·²ä¿å­˜",
  "data": {
    "ptp_id": "PTP_001",
    "saved_at": "2025-11-20T10:05:02"
  }
}
```

### 4.3 å›å†™å‚¬æ”¶ç»“æœ

**æ¥å£**: `POST {tenant_base_url}/api/collection/results`

**æè¿°**: æ¡ˆä»¶å‚¬æ”¶å®Œæˆåå›å†™æœ€ç»ˆç»“æœ

**è¯·æ±‚Body**:
```json
{
  "case_code": "CASE_001",
  "collection_result": "settled",
  "collection_start_date": "2025-11-18",
  "collection_end_date": "2025-11-20",
  "total_collected_amount": 5000.00,
  "total_contact_count": 15,
  "effective_contact_count": 8,
  "collector_id": "COL_001",
  "collector_name": "ç‹å°æ˜",
  "agency_name": "å‚¬æ”¶æœºæ„1",
  "notes": "å®¢æˆ·å·²å…¨é¢è¿˜æ¬¾ï¼Œæ¡ˆä»¶ç»“æ¸…"
}
```

**å‚¬æ”¶ç»“æœæšä¸¾**:
- `settled`: å·²ç»“æ¸…
- `partial_settled`: éƒ¨åˆ†ç»“æ¸…
- `ptp_pending`: PTPå¾…å±¥è¡Œ
- `refused_to_pay`: æ‹’ç»è¿˜æ¬¾
- `unable_to_contact`: æ— æ³•è”ç³»
- `dispute`: æœ‰äº‰è®®
- `transferred`: è½¬å…¶ä»–æœºæ„

### 4.4 å›å†™æ¡ˆä»¶çŠ¶æ€å˜æ›´

**æ¥å£**: `POST {tenant_base_url}/api/collection/case-status`

**æè¿°**: CCOç³»ç»Ÿå†…æ¡ˆä»¶çŠ¶æ€å˜æ›´æ—¶åŒæ­¥åˆ°ç”²æ–¹

**è¯·æ±‚Body**:
```json
{
  "case_code": "CASE_001",
  "status_change_time": "2025-11-20T15:00:00",
  "old_status": "pending_repayment",
  "new_status": "partial_repayment",
  "change_reason": "å®¢æˆ·éƒ¨åˆ†è¿˜æ¬¾",
  "operator": "ç‹å°æ˜"
}
```

---

## ğŸ”„ 5. å®æ—¶é€šçŸ¥ï¼ˆç”²æ–¹â†’CCOï¼‰

### 5.1 è¿˜æ¬¾æˆåŠŸé€šçŸ¥ï¼ˆWebhookï¼‰

**æ¥å£**: `POST {cco_base_url}/api/v1/webhook/repayment-notify`

**æè¿°**: å®¢æˆ·è¿˜æ¬¾æˆåŠŸåï¼Œç”²æ–¹å®æ—¶é€šçŸ¥CCO

**è¯·æ±‚Body**:
```json
{
  "notify_type": "repayment_success",
  "notify_time": "2025-11-20T15:00:00",
  "case_code": "CASE_001",
  "user_id": "USER_001",
  "repayment_id": "PAY_002",
  "repayment_amount": 2000.00,
  "transaction_time": "2025-11-20T14:58:30",
  "repayment_channel": "bank_transfer"
}
```

### 5.2 æ¡ˆä»¶ç»“æ¸…é€šçŸ¥

**æ¥å£**: `POST {cco_base_url}/api/v1/webhook/case-settled`

**æè¿°**: æ¡ˆä»¶ç»“æ¸…åé€šçŸ¥CCOåœæ­¢å‚¬æ”¶

**è¯·æ±‚Body**:
```json
{
  "notify_type": "case_settled",
  "notify_time": "2025-11-20T15:05:00",
  "case_code": "CASE_001",
  "user_id": "USER_001",
  "settlement_date": "2025-11-20",
  "final_repayment_amount": 5000.00
}
```

### 5.3 æ¡ˆä»¶å¬å›é€šçŸ¥

**æ¥å£**: `POST {cco_base_url}/api/v1/webhook/case-recall`

**æè¿°**: ç”²æ–¹éœ€è¦å¬å›æ¡ˆä»¶ï¼ˆå¦‚å®¢æˆ·æŠ•è¯‰ã€ç³»ç»Ÿé”™è¯¯ç­‰ï¼‰

**è¯·æ±‚Body**:
```json
{
  "notify_type": "case_recall",
  "notify_time": "2025-11-20T16:00:00",
  "case_code": "CASE_001",
  "recall_reason": "å®¢æˆ·æŠ•è¯‰",
  "recall_notes": "å®¢æˆ·å·²é€šè¿‡å…¶ä»–æ¸ é“è¿˜æ¬¾ï¼Œæ•°æ®æœªåŒæ­¥"
}
```

---

## ğŸ“Š 6. æ•°æ®ç»Ÿè®¡æŸ¥è¯¢ï¼ˆCCOâ†’ç”²æ–¹ï¼‰

### 6.1 æŸ¥è¯¢æ¡ˆä»¶æ€»è§ˆ

**æ¥å£**: `GET {tenant_base_url}/api/statistics/case-overview`

**æè¿°**: CCOæŸ¥è¯¢ç”²æ–¹çš„é€¾æœŸæ¡ˆä»¶æ€»è§ˆç»Ÿè®¡

**æŸ¥è¯¢å‚æ•°**:
- `date`: ç»Ÿè®¡æ—¥æœŸ

**ç”²æ–¹å“åº”**:
```json
{
  "code": 200,
  "data": {
    "date": "2025-11-20",
    "total_overdue_cases": 500,
    "total_overdue_amount": 5000000.00,
    "by_dpd": {
      "dpd_1_30": {
        "case_count": 200,
        "amount": 1500000.00
      },
      "dpd_31_60": {
        "case_count": 150,
        "amount": 2000000.00
      },
      "dpd_61_90": {
        "case_count": 100,
        "amount": 1000000.00
      },
      "dpd_91_plus": {
        "case_count": 50,
        "amount": 500000.00
      }
    }
  }
}
```

### 6.2 æŸ¥è¯¢äº§å“ç»´åº¦ç»Ÿè®¡

**æ¥å£**: `GET {tenant_base_url}/api/statistics/by-product`

**æè¿°**: æŒ‰è´·æ¬¾äº§å“ç»Ÿè®¡é€¾æœŸæƒ…å†µ

---

## ğŸ”§ 7. é…ç½®ç®¡ç†ï¼ˆç”²æ–¹â†’CCOï¼‰

### 7.1 å­—æ®µæ˜ å°„é…ç½®

**æ¥å£**: `POST {cco_base_url}/api/v1/webhook/field-mapping`

**æè¿°**: ç”²æ–¹é…ç½®å…¶ä¸šåŠ¡å­—æ®µä¸CCOæ ‡å‡†å­—æ®µçš„æ˜ å°„å…³ç³»

**è¯·æ±‚Body**:
```json
{
  "tenant_code": "TENANT_A",
  "mapping_configs": [
    {
      "standard_field_key": "user_name",
      "tenant_field_key": "customer_name",
      "tenant_field_name": "å®¢æˆ·å§“å",
      "data_type": "String"
    },
    {
      "standard_field_key": "loan_amount",
      "tenant_field_key": "principal_amount",
      "tenant_field_name": "æœ¬é‡‘é‡‘é¢",
      "data_type": "Decimal"
    }
  ]
}
```

### 7.2 ä¸šåŠ¡è§„åˆ™é…ç½®

**æ¥å£**: `POST {cco_base_url}/api/v1/webhook/business-rules`

**æè¿°**: ç”²æ–¹é…ç½®ä¸šåŠ¡è§„åˆ™ï¼ˆå¦‚é˜Ÿåˆ—åˆ’åˆ†è§„åˆ™ï¼‰

**è¯·æ±‚Body**:
```json
{
  "tenant_code": "TENANT_A",
  "rule_type": "queue_assignment",
  "rules": [
    {
      "queue_code": "M1",
      "conditions": {
        "overdue_days_min": 1,
        "overdue_days_max": 30
      }
    }
  ]
}
```

---

## ğŸ” 8. æ•°æ®å®‰å…¨è¦æ±‚

### 8.1 æ•æ„Ÿä¿¡æ¯åŠ å¯†

**è¦æ±‚**: ä¼ è¾“æ•æ„Ÿä¿¡æ¯æ—¶å¿…é¡»åŠ å¯†

**æ•æ„Ÿå­—æ®µ**:
- èº«ä»½è¯å·ï¼ˆid_numberï¼‰
- æ‰‹æœºå·ï¼ˆmobileï¼‰
- é“¶è¡Œå¡å·ï¼ˆaccount_noï¼‰
- åœ°å€ï¼ˆaddressï¼‰

**åŠ å¯†æ–¹å¼**: RSAå…¬é’¥åŠ å¯†æˆ–AESå¯¹ç§°åŠ å¯†

**ç¤ºä¾‹**:
```json
{
  "user_name": "é™ˆå¤§æ˜",
  "mobile_encrypted": "U2FsdGVkX19...",
  "id_number_encrypted": "U2FsdGVkX19..."
}
```

### 8.2 æ•°æ®è„±æ•

**è¦æ±‚**: éå¿…è¦åœºæ™¯è¿”å›è„±æ•æ•°æ®

**è„±æ•è§„åˆ™**:
- æ‰‹æœºå·: `+63-917-***-**11`
- èº«ä»½è¯å·: `ID*****789`
- é“¶è¡Œå¡å·: `****1234`

### 8.3 IPç™½åå•

**è¦æ±‚**: ç”²æ–¹ç³»ç»Ÿä»…å…è®¸CCOæœåŠ¡å™¨IPè®¿é—®

### 8.4 è¯·æ±‚é¢‘ç‡é™åˆ¶

**å»ºè®®é™åˆ¶**:
- æŸ¥è¯¢æ¥å£: 100æ¬¡/åˆ†é’Ÿ
- æ¨é€æ¥å£: 1000æ¬¡/å°æ—¶

---

## ğŸ“‹ 9. æ¥å£è§„èŒƒæ€»ç»“

### 9.1 å¿…é¡»æä¾›çš„æ¥å£ï¼ˆæ ¸å¿ƒï¼‰

| æ¥å£ | ç±»å‹ | è¯´æ˜ | ä¼˜å…ˆçº§ |
|------|------|------|--------|
| æ‰¹é‡æ¨é€é€¾æœŸæ¡ˆä»¶ | Push | æ¯æ—¥æ¨é€é€¾æœŸæ¡ˆä»¶ | P0 |
| æ¡ˆä»¶çŠ¶æ€æ›´æ–°æ¨é€ | Push | å®æ—¶æ¨é€çŠ¶æ€å˜åŒ– | P0 |
| è¿˜æ¬¾è®°å½•æ¨é€ | Push | å®æ—¶æ¨é€è¿˜æ¬¾è®°å½• | P0 |
| æŸ¥è¯¢å®¢æˆ·è¯¦ç»†ä¿¡æ¯ | Pull | CCOæŸ¥è¯¢å®¢æˆ·ä¿¡æ¯ | P0 |
| æŸ¥è¯¢è´·æ¬¾è¯¦æƒ… | Pull | CCOæŸ¥è¯¢è´·æ¬¾ä¿¡æ¯ | P0 |
| è¿˜æ¬¾æˆåŠŸé€šçŸ¥ | Webhook | è¿˜æ¬¾æˆåŠŸå®æ—¶é€šçŸ¥CCO | P0 |

### 9.2 å»ºè®®æä¾›çš„æ¥å£ï¼ˆå¢å¼ºï¼‰

| æ¥å£ | ç±»å‹ | è¯´æ˜ | ä¼˜å…ˆçº§ |
|------|------|------|--------|
| æ‰¹é‡æŸ¥è¯¢æ¡ˆä»¶çŠ¶æ€ | Pull | æ‰¹é‡åŒæ­¥æ¡ˆä»¶çŠ¶æ€ | P1 |
| æŸ¥è¯¢è¿˜æ¬¾è®°å½• | Pull | æŸ¥è¯¢å†å²è¿˜æ¬¾ | P1 |
| æ¡ˆä»¶ç»“æ¸…é€šçŸ¥ | Webhook | ç»“æ¸…åé€šçŸ¥ | P1 |
| æ¡ˆä»¶å¬å›é€šçŸ¥ | Webhook | å¬å›æ¡ˆä»¶é€šçŸ¥ | P1 |
| æŸ¥è¯¢æ¡ˆä»¶æ€»è§ˆ | Pull | ç»Ÿè®¡æ•°æ®æŸ¥è¯¢ | P2 |

### 9.3 å¯é€‰æä¾›çš„æ¥å£ï¼ˆæ‰©å±•ï¼‰

| æ¥å£ | ç±»å‹ | è¯´æ˜ | ä¼˜å…ˆçº§ |
|------|------|------|--------|
| å­—æ®µæ˜ å°„é…ç½® | Push | åŠ¨æ€é…ç½®å­—æ®µæ˜ å°„ | P3 |
| ä¸šåŠ¡è§„åˆ™é…ç½® | Push | åŠ¨æ€é…ç½®ä¸šåŠ¡è§„åˆ™ | P3 |
| äº§å“ç»´åº¦ç»Ÿè®¡ | Pull | äº§å“ç»Ÿè®¡æ•°æ® | P3 |

---

## ğŸš€ 10. æ¥å£å¯¹æ¥æµç¨‹

### 10.1 å¯¹æ¥å‡†å¤‡

1. **ç¡®è®¤æ¥å£æ¸…å•**: ç”²æ–¹ç¡®è®¤éœ€è¦å®ç°çš„æ¥å£åˆ—è¡¨
2. **æä¾›æµ‹è¯•ç¯å¢ƒ**: ç”²æ–¹æä¾›æµ‹è¯•ç¯å¢ƒURLå’Œæµ‹è¯•è´¦å·
3. **äº¤æ¢è®¤è¯ä¿¡æ¯**: äº’ç›¸äº¤æ¢API Key/Secret
4. **é…ç½®IPç™½åå•**: ç”²æ–¹é…ç½®CCOæœåŠ¡å™¨IPç™½åå•
5. **æä¾›æµ‹è¯•æ•°æ®**: ç”²æ–¹å‡†å¤‡æµ‹è¯•ç”¨ä¾‹æ•°æ®

### 10.2 è”è°ƒæµ‹è¯•

1. **æ¥å£è¿é€šæ€§æµ‹è¯•**: æµ‹è¯•è®¤è¯å’Œç½‘ç»œè¿é€š
2. **å•æ¥å£åŠŸèƒ½æµ‹è¯•**: é€ä¸ªæ¥å£æµ‹è¯•åŠŸèƒ½
3. **ä¸šåŠ¡æµç¨‹æµ‹è¯•**: æµ‹è¯•å®Œæ•´ä¸šåŠ¡æµç¨‹
4. **å¼‚å¸¸åœºæ™¯æµ‹è¯•**: æµ‹è¯•å„ç§å¼‚å¸¸æƒ…å†µ
5. **æ€§èƒ½å‹åŠ›æµ‹è¯•**: æµ‹è¯•æ¥å£æ€§èƒ½

### 10.3 ä¸Šçº¿éƒ¨ç½²

1. **ç”Ÿäº§ç¯å¢ƒé…ç½®**: é…ç½®ç”Ÿäº§ç¯å¢ƒå‚æ•°
2. **å°æ‰¹é‡è¯•è¿è¡Œ**: å°æ‰¹é‡æ•°æ®è¯•è¿è¡Œ
3. **å…¨é‡æ•°æ®è¿ç§»**: å…¨é‡æ•°æ®æ­£å¼è¿ç§»
4. **ç›‘æ§å‘Šè­¦é…ç½®**: é…ç½®æ¥å£ç›‘æ§å’Œå‘Šè­¦

---

## ğŸ“ 11. æŠ€æœ¯æ”¯æŒ

### 11.1 è”è°ƒæ”¯æŒ

- **å¯¹æ¥çª—å£**: æŠ€æœ¯å¯¹æ¥è´Ÿè´£äºº
- **è”è°ƒæ—¶é—´**: å·¥ä½œæ—¥ 9:00-18:00
- **æ”¯æŒæ–¹å¼**: å¾®ä¿¡ç¾¤ã€é‚®ä»¶ã€ç”µè¯

### 11.2 ç”Ÿäº§æ”¯æŒ

- **æ”¯æŒæ—¶é—´**: 7x24å°æ—¶
- **ç´§æ€¥è”ç³»**: æä¾›ç´§æ€¥è”ç³»äººç”µè¯
- **æ•…éšœå“åº”**: 30åˆ†é’Ÿå†…å“åº”ï¼Œ2å°æ—¶å†…å¤„ç†

---

## ğŸ“ é™„å½•

### A. é”™è¯¯ç è§„èŒƒ

| é”™è¯¯ç  | è¯´æ˜ |
|-------|------|
| 200 | æˆåŠŸ |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 401 | è®¤è¯å¤±è´¥ |
| 403 | æ— æƒé™ |
| 404 | èµ„æºä¸å­˜åœ¨ |
| 429 | è¯·æ±‚é¢‘ç‡è¶…é™ |
| 500 | æœåŠ¡å™¨é”™è¯¯ |

### B. æ•°æ®ç±»å‹è§„èŒƒ

| ç±»å‹ | æ ¼å¼ | ç¤ºä¾‹ |
|------|------|------|
| æ—¥æœŸæ—¶é—´ | ISO 8601 | 2025-11-20T15:00:00 |
| æ—¥æœŸ | YYYY-MM-DD | 2025-11-20 |
| é‡‘é¢ | Decimal(18,2) | 5000.00 |
| æ‰‹æœºå· | E.164 | +63-917-123-4567 |

### C. æ¥å£ç‰ˆæœ¬ç®¡ç†

- æ¥å£URLåŒ…å«ç‰ˆæœ¬å·: `/api/v1/...`
- æ–°ç‰ˆæœ¬å‘ä¸‹å…¼å®¹è‡³å°‘1ä¸ªå¤§ç‰ˆæœ¬
- åºŸå¼ƒæ¥å£æå‰3ä¸ªæœˆé€šçŸ¥

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0  
**æœ€åæ›´æ–°**: 2025-11-20  
**ç»´æŠ¤å›¢é˜Ÿ**: CCOæŠ€æœ¯å›¢é˜Ÿ

