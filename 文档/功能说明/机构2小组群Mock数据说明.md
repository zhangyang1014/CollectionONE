# 机构2小组群Mock数据说明

## 🐛 问题背景

在编辑机构2的小组时，"所属小组群"下拉框无法选择，显示为空。

## 🔍 问题原因

机构2（百腾企业-机构2）没有创建小组群数据，导致下拉列表为空。

之前创建的2个小组群（高额案件组、普通案件组）都属于机构1。

## ✅ 解决方案

为机构2创建了2个小组群和对应的SPV管理员。

---

## 📊 创建的数据

### 机构信息
- **机构名称**: 百腾企业-机构2
- **机构ID**: 2
- **所属甲方**: 百腾企业

### 小组群信息

#### 小组群 1: 优质客户组
- **小组群编码**: `GROUP_VIP`
- **小组群名称**: 优质客户组
- **英文名称**: VIP Customers Group
- **描述**: 负责处理优质客户的催收业务
- **状态**: 启用
- **SPV管理员**: 王五

#### 小组群 2: 一般客户组
- **小组群编码**: `GROUP_REGULAR`
- **小组群名称**: 一般客户组
- **英文名称**: Regular Customers Group
- **描述**: 负责处理一般客户的催收业务
- **状态**: 启用
- **SPV管理员**: 赵六

---

## 👥 SPV管理员账号

### SPV管理员 1: 王五
- **登录ID**: `wangwu`
- **密码**: `password123`
- **账号编码**: `SPV_wangwu`
- **账号名称**: 王五
- **手机**: 13800138003
- **邮箱**: wangwu@example.com
- **所属小组群**: 优质客户组
- **角色**: SPV (小组群长)
- **状态**: 启用

### SPV管理员 2: 赵六
- **登录ID**: `zhaoliu`
- **密码**: `password123`
- **账号编码**: `SPV_zhaoliu`
- **账号名称**: 赵六
- **手机**: 13800138004
- **邮箱**: zhaoliu@example.com
- **所属小组群**: 一般客户组
- **角色**: SPV (小组群长)
- **状态**: 启用

---

## 🔄 小组关联更新

已将机构2的现有小组更新，关联到对应的小组群：

- **百腾企业-机构2-小组1** → **优质客户组**
- **百腾企业-机构2-小组2** → **一般客户组**

---

## 📈 数据统计

- **机构**: 百腾企业-机构2
- **小组群数量**: 2个
- **SPV管理员数量**: 2个
- **优质客户组**: 包含1个小组
- **一般客户组**: 包含1个小组

---

## 🎯 使用方法

### 1. 编辑机构2的小组
1. 进入"人员与机构管理 → 小组管理"
2. 找到机构2的小组，点击"编辑"
3. 现在"所属小组群"下拉框可以看到：
   - 优质客户组
   - 一般客户组

### 2. 选择小组群
- 点击"所属小组群"下拉框
- 选择合适的小组群
- 点击"保存"按钮
- ✅ 小组群关联成功保存

### 3. 使用SPV账号登录
- 登录ID: `wangwu` 或 `zhaoliu`
- 密码: `password123`
- 可以管理所属小组群下的所有小组

---

## 📊 完整组织架构

```
百腾企业 (甲方)
├─ 机构1: 百腾企业-机构1
│   ├─ 小组群1: 高额案件组 (SPV: 张三)
│   │   └─ 小组1: 百腾企业-机构1-小组1
│   └─ 小组群2: 普通案件组 (SPV: 李四)
│       └─ 小组2: 百腾企业-机构1-小组2
│
└─ 机构2: 百腾企业-机构2
    ├─ 小组群3: 优质客户组 (SPV: 王五) ✨新增
    │   └─ 小组1: 百腾企业-机构2-小组1
    └─ 小组群4: 一般客户组 (SPV: 赵六) ✨新增
        └─ 小组2: 百腾企业-机构2-小组2
```

---

## 🔐 所有SPV账号汇总

| 机构 | 小组群 | SPV姓名 | 登录ID | 密码 | 邮箱 |
|------|--------|---------|--------|------|------|
| 机构1 | 高额案件组 | 张三 | zhangsan | password123 | zhangsan@example.com |
| 机构1 | 普通案件组 | 李四 | lisi | password123 | lisi@example.com |
| 机构2 | 优质客户组 | 王五 | wangwu | password123 | wangwu@example.com |
| 机构2 | 一般客户组 | 赵六 | zhaoliu | password123 | zhaoliu@example.com |

---

## 📝 脚本说明

### 创建脚本
- **文件**: `backend/create_agency2_team_groups.py`
- **功能**:
  1. 为机构2创建2个小组群
  2. 为每个小组群创建SPV管理员
  3. 更新机构2的小组，关联到小组群
  4. 确保所有小组都关联到催收队列

### 运行命令
```bash
cd backend
source venv/bin/activate
python create_agency2_team_groups.py
```

---

## ⚠️ 注意事项

1. **小组群分布**: 每个机构都有自己的小组群，不能跨机构选择
2. **SPV权限**: SPV只能管理所属小组群下的小组
3. **密码安全**: 所有SPV的初始密码都是 `password123`，建议生产环境修改
4. **数据关联**: 删除小组群会同时删除关联的SPV管理员账号

---

## 🚀 验证步骤

1. ✅ 刷新前端页面
2. ✅ 编辑机构2的任意小组
3. ✅ 点击"所属小组群"下拉框
4. ✅ 可以看到"优质客户组"和"一般客户组"
5. ✅ 选择小组群并保存
6. ✅ 验证保存成功

---

## 📅 创建时间
2025年11月20日

## 🔗 相关文档
- [小组群Mock数据说明.md](./小组群Mock数据说明.md) - 机构1的小组群数据
- [小组管理员Mock数据说明.md](./小组管理员Mock数据说明.md) - 小组管理员数据
- [小组保存功能实现说明.md](./小组保存功能实现说明.md) - 小组保存功能说明

