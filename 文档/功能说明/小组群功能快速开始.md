# 小组群功能快速开始指南

## ✅ 已完成

数据库表结构已成功创建！

- ✓ `team_groups` 表已创建
- ✓ `collection_teams` 表已添加 `team_group_id` 字段
- ✓ 相关索引已创建

## 🚀 使用步骤

### 1. 重启后端服务

```bash
cd /Users/zhangyang/Documents/GitHub/CollectionONE/backend
./restart_backend.sh
```

### 2. 访问小组群管理页面

在浏览器中访问：

```
http://localhost:5173/organization/team-groups
```

或通过导航菜单：**组织管理 → 小组群管理**

### 3. 创建第一个小组群

1. 点击"创建小组群"按钮
2. 填写以下信息：
   - **小组群编码**：例如 `GROUP001`
   - **小组群名称**：例如 `高额案件组`
   - **所属机构**：选择一个机构
   - **小组群长SPV**：可选，从催员列表中选择
   - **备注**：可选
3. 点击"保存"

### 4. 将小组关联到小组群

1. 访问小组管理页面
2. 创建或编辑一个小组
3. 在"所属小组群"下拉框中选择刚创建的小组群
4. 保存

### 5. 查看小组群统计

在小组群列表中可以看到：
- 小组数量：该小组群下有多少个小组
- 催员数量：所有小组的催员总数

## 📋 功能说明

### 小组群管理

**功能：**
- 创建、编辑、删除小组群
- 设置小组群长SPV
- 按机构筛选小组群
- 查看小组群统计数据
- 启用/禁用小组群

**路径：** `/organization/team-groups`

### 小组管理更新

**新增功能：**
- 列表中显示"所属小组群"列
- 创建/编辑时可以选择所属小组群

**路径：** `/organization/teams`

## 🎯 使用场景示例

### 场景1：按案件类型分组

```
催收机构A
  └── 小组群：高额案件组（SPV：张三）
      ├── 小组：高额逾期组
      └── 小组：高额法务组
```

**创建步骤：**
1. 创建小组群"高额案件组"，选择张三为SPV
2. 创建或编辑"高额逾期组"，选择所属小组群为"高额案件组"
3. 创建或编辑"高额法务组"，选择所属小组群为"高额案件组"

### 场景2：按地区分组

```
催收机构B
  └── 小组群：华东区（SPV：李四）
      ├── 小组：上海组
      ├── 小组：杭州组
      └── 小组：南京组
```

**创建步骤：**
1. 创建小组群"华东区"，选择李四为SPV
2. 将上海组、杭州组、南京组的所属小组群都设置为"华东区"

## 📌 注意事项

1. **SPV选择**
   - SPV必须是已存在的催员
   - 建议在催员管理中将SPV的等级设置为"SPV"
   - 一个催员可以同时是SPV和普通催员

2. **小组群删除**
   - 删除小组群前，必须先解除其下所有小组的关联
   - 或者将小组移动到其他小组群

3. **可选关联**
   - 小组的小组群关联是可选的
   - 现有小组可以不设置小组群
   - 不影响现有功能

## 🔍 API接口

如果需要通过API操作小组群：

**基础路径：** `http://localhost:8000/api/v1/team-groups`

**主要接口：**
- `GET /` - 获取小组群列表
- `POST /` - 创建小组群
- `GET /{id}` - 获取小组群详情
- `PUT /{id}` - 更新小组群
- `DELETE /{id}` - 删除小组群
- `GET /{id}/teams` - 获取小组群下的小组列表

详细API文档请参考：[小组群功能实施完成报告.md](./小组群功能实施完成报告.md)

## 📚 相关文档

- [小组群功能说明.md](./小组群功能说明.md) - 详细功能说明
- [小组群功能实施完成报告.md](./小组群功能实施完成报告.md) - 完整实施报告

## ❓ 常见问题

### Q1: 如何设置SPV？

A: 在创建或编辑小组群时，在"小组群长SPV"下拉框中选择一个催员即可。

### Q2: SPV和组长有什么区别？

A: 
- **SPV（小组群长）**：管理多个小组，是小组群层级的管理者
- **组长**：管理单个小组，是小组层级的管理者

### Q3: 小组必须关联到小组群吗？

A: 不必须。小组群是可选的，小组可以不设置所属小组群。

### Q4: 可以将一个小组移动到另一个小组群吗？

A: 可以。编辑小组时，重新选择所属小组群即可。

### Q5: 删除小组群后，其下的小组会怎样？

A: 删除前系统会检查，如果小组群下还有小组，将无法删除。必须先解除所有小组的关联。

## 💡 提示

1. 建议先规划好组织架构，再创建小组群
2. 给小组群起一个有意义的名称，便于管理
3. 定期检查小组群的统计数据
4. 合理设置SPV，让每个小组群都有明确的负责人

## 🎉 开始使用

现在您可以开始使用小组群功能了！

1. 重启后端服务
2. 访问管理后台
3. 创建您的第一个小组群

祝使用愉快！

---

**更新日期**: 2025-11-20  
**版本**: v1.0.0

