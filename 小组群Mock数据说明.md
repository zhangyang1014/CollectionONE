# 小组群Mock数据说明

## 📊 创建的数据

### 1. 小组群信息

#### 小组群 1: 高额案件组
- **小组群编码**: `GROUP_HIGH_VALUE`
- **小组群名称**: 高额案件组
- **英文名称**: High Value Cases Group
- **描述**: 负责处理高额催收案件，包含高额逾期组和高额法务组
- **状态**: 启用
- **SPV管理员**: 张三

#### 小组群 2: 普通案件组
- **小组群编码**: `GROUP_NORMAL`
- **小组群名称**: 普通案件组
- **英文名称**: Normal Cases Group
- **描述**: 负责处理普通催收案件，包含短期、中期、长期逾期组
- **状态**: 启用
- **SPV管理员**: 李四

---

### 2. SPV管理员账号

#### SPV管理员 1: 张三
- **登录ID**: `zhangsan`
- **密码**: `password123`
- **账号编码**: `SPV_zhangsan`
- **账号名称**: 张三
- **手机**: 13800138001
- **邮箱**: zhangsan@example.com
- **所属小组群**: 高额案件组
- **角色**: SPV (小组群长)
- **状态**: 启用

#### SPV管理员 2: 李四
- **登录ID**: `lisi`
- **密码**: `password123`
- **账号编码**: `SPV_lisi`
- **账号名称**: 李四
- **手机**: 13800138002
- **邮箱**: lisi@example.com
- **所属小组群**: 普通案件组
- **角色**: SPV (小组群长)
- **状态**: 启用

---

### 3. 小组关联更新

已将现有小组更新，关联到对应的小组群：

- **小组1** (`百腾企业-机构1-小组1`) → **高额案件组**
- **小组2** (`百腾企业-机构1-小组2`) → **普通案件组**

所有小组都已关联到催收队列：**C队列** (ID: 1)

---

## 🔧 数据库结构修改

### 修改的表

#### 1. `team_admin_accounts` 表
- **修改**: `team_id` 字段改为可空 (NULL)
- **原因**: SPV管理员只关联 `team_group_id`，不需要关联 `team_id`
- **影响**: 允许创建不关联小组的管理员账号（SPV）

#### 2. `collection_teams` 表
- **新增字段**: 
  - `team_group_id` - 所属小组群ID (可空)
  - `queue_id` - 关联的催收队列ID (必填)

#### 3. `team_groups` 表
- **新建表**: 存储小组群信息
- **主要字段**:
  - `tenant_id` - 所属甲方ID
  - `agency_id` - 所属机构ID
  - `group_code` - 小组群编码
  - `group_name` - 小组群名称
  - `description` - 描述
  - `is_active` - 是否启用

---

## 📍 如何查看和使用

### 1. 查看小组群管理
1. 登录管理控台
2. 进入 **组织管理 → 小组群管理**
3. 可以看到两个小组群：
   - 高额案件组
   - 普通案件组

### 2. 查看更新后的小组
1. 进入 **组织管理 → 小组管理**
2. 可以看到小组列表中增加了"所属小组群"和"催收队列"列
3. 每个小组都已关联到对应的小组群和催收队列

### 3. 使用SPV管理员登录
1. 使用以下账号登录：
   - 登录ID: `zhangsan` 或 `lisi`
   - 密码: `password123`
2. SPV管理员可以管理所属小组群下的所有小组和催员

---

## 🎯 数据统计

- **小组群数量**: 2 个
- **SPV管理员数量**: 2 个
- **小组数量**: 2 个（已全部关联到小组群）
- **催收队列**: 1 个（已全部关联到小组）

---

## 📝 脚本说明

### 创建脚本
- **文件**: `backend/create_team_groups_mock_data.py`
- **功能**:
  1. 创建2个小组群
  2. 为每个小组群创建SPV管理员
  3. 更新现有小组，关联到小组群
  4. 确保所有小组都关联到催收队列

### 数据库结构修复脚本
- **文件**: `backend/fix_team_admin_accounts_nullable.sql` (已执行并删除)
- **功能**: 修改 `team_admin_accounts` 表，使 `team_id` 可为 NULL

---

## ⚠️ 注意事项

1. **SPV管理员密码**: 所有SPV管理员的初始密码都是 `password123`，建议在生产环境中修改
2. **队列关联**: 所有小组必须关联一个催收队列，这是必填项
3. **小组群关联**: 小组可以选择关联或不关联小组群（可选）
4. **数据关联**: 删除小组群会同时删除关联的SPV管理员账号

---

## 🚀 下一步建议

1. ✅ 数据已创建完成
2. ✅ 后端服务已重启
3. 📱 刷新前端页面查看效果
4. 🔐 使用SPV账号测试登录
5. 📊 在小组群管理页面查看和编辑小组群
6. 👥 在小组管理页面查看小组的小组群关联

---

## 📅 创建时间
2025年11月20日

## 🔄 更新记录
- 2025-11-20: 初始创建，添加2个小组群和SPV管理员
- 2025-11-20: 为每个小组创建了3个不同角色的管理员（详见[小组管理员Mock数据说明.md](./小组管理员Mock数据说明.md)）

