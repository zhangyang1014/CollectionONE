# æ•°æ®çœ‹æ¿404é”™è¯¯å®Œæ•´è¯Šæ–­å’Œä¿®å¤æŒ‡å—

## ğŸ” é—®é¢˜ç¡®è®¤

æ ¹æ®æµ‹è¯•ç»“æœï¼š
- âœ… åç«¯æœåŠ¡æ­£åœ¨è¿è¡Œï¼ˆç«¯å£8000ï¼‰
- âŒ APIè¿”å›404ï¼š`{"detail": "Not found"}`
- âŒ è¯´æ˜è·¯ç”±**æ²¡æœ‰æ³¨å†Œ**

## ğŸ¯ æ ¹æœ¬åŸå› 

**åç«¯æœåŠ¡æ²¡æœ‰é‡å¯**ï¼Œæˆ–è€…**å¯¼å…¥æ—¶å‡ºé”™**å¯¼è‡´è·¯ç”±æ³¨å†Œå¤±è´¥ã€‚

## âœ… å®Œæ•´ä¿®å¤æ­¥éª¤

### æ­¥éª¤1ï¼šåœæ­¢åç«¯æœåŠ¡

**æ–¹æ³•ä¸€ï¼šåœ¨è¿è¡Œåç«¯çš„ç»ˆç«¯çª—å£**
1. æ‰¾åˆ°è¿è¡Œ `uvicorn` çš„ç»ˆç«¯çª—å£
2. æŒ‰ `Ctrl + C` åœæ­¢æœåŠ¡

**æ–¹æ³•äºŒï¼šå¼ºåˆ¶åœæ­¢**
```bash
# æŸ¥æ‰¾è¿›ç¨‹
lsof -i :8000

# åœæ­¢è¿›ç¨‹ï¼ˆæ›¿æ¢PIDä¸ºå®é™…è¿›ç¨‹å·ï¼‰
kill 86651
```

### æ­¥éª¤2ï¼šæ£€æŸ¥å¯¼å…¥æ˜¯å¦æœ‰é”™è¯¯

åœ¨ç»ˆç«¯ä¸­æµ‹è¯•å¯¼å…¥ï¼š

```bash
cd "/Users/zhangyang/Library/Mobile Documents/com~apple~CloudDocs/2. é¢†åŸŸï¼ˆAreasï¼‰/17 å­¦ä¹ AI ä¸ ç¼–ç¨‹/Code/CloudunCollectionONE/backend"

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate

# æµ‹è¯•å¯¼å…¥
python3 -c "
try:
    from app.api import communications, ptp, quality_inspections, performance, analytics, alerts
    print('âœ… æ‰€æœ‰APIæ¨¡å—å¯¼å…¥æˆåŠŸ')
    print('âœ… performance.router.prefix:', performance.router.prefix)
except Exception as e:
    print('âŒ å¯¼å…¥å¤±è´¥:', e)
    import traceback
    traceback.print_exc()
"
```

**å¦‚æœå¯¼å…¥å¤±è´¥**ï¼Œè¯·æŠŠé”™è¯¯ä¿¡æ¯å‘ç»™æˆ‘ã€‚

### æ­¥éª¤3ï¼šé‡æ–°å¯åŠ¨åç«¯æœåŠ¡

```bash
cd "/Users/zhangyang/Library/Mobile Documents/com~apple~CloudDocs/2. é¢†åŸŸï¼ˆAreasï¼‰/17 å­¦ä¹ AI ä¸ ç¼–ç¨‹/Code/CloudunCollectionONE/backend"
source venv/bin/activate
python -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

**é‡è¦**ï¼šè§‚å¯Ÿå¯åŠ¨æ—¥å¿—ï¼Œçœ‹æ˜¯å¦æœ‰é”™è¯¯ï¼

åº”è¯¥çœ‹åˆ°ï¼š
```
INFO:     Started server process [xxxxx]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000
```

**å¦‚æœæœ‰é”™è¯¯**ï¼ˆå¦‚ ImportErrorï¼‰ï¼Œè¯·æŠŠå®Œæ•´çš„é”™è¯¯ä¿¡æ¯å‘ç»™æˆ‘ã€‚

### æ­¥éª¤4ï¼šéªŒè¯APIæ˜¯å¦æ³¨å†Œ

**æ–¹æ³•ä¸€ï¼šè®¿é—®APIæ–‡æ¡£**
æ‰“å¼€æµè§ˆå™¨ï¼š`http://localhost:8000/docs`

åœ¨æœç´¢æ¡†è¾“å…¥ `performance`ï¼Œåº”è¯¥èƒ½çœ‹åˆ°ï¼š
- `/api/v1/performance/collector/{collector_id}`

**æ–¹æ³•äºŒï¼šç›´æ¥æµ‹è¯•API**
```bash
curl "http://localhost:8000/api/v1/performance/collector/1?start_date=2025-01-01&end_date=2025-01-12&period=daily"
```

- âœ… å¦‚æœè¿”å›JSONæ•°æ® â†’ APIæ­£å¸¸
- âŒ å¦‚æœè¿”å› `{"detail": "Not found"}` â†’ è·¯ç”±ä»æœªæ³¨å†Œ

### æ­¥éª¤5ï¼šæ¸…é™¤æµè§ˆå™¨ç¼“å­˜å¹¶åˆ·æ–°å‰ç«¯

1. **æ¸…é™¤æµè§ˆå™¨ç¼“å­˜**ï¼š
   - Chrome: `Cmd + Shift + Delete`
   - æˆ–ä½¿ç”¨æ— ç—•æ¨¡å¼

2. **å¼ºåˆ¶åˆ·æ–°é¡µé¢**ï¼š
   - æŒ‰ `Cmd + Shift + R`

3. **æ£€æŸ¥ç½‘ç»œè¯·æ±‚**ï¼š
   - æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
   - æŸ¥çœ‹ Network æ ‡ç­¾
   - ç¡®è®¤è¯·æ±‚çš„URLæ˜¯ï¼š`/api/v1/performance/collector/1`
   - ä¸æ˜¯ï¼š`/api/v1/collector/performance/dashboard`

---

## ğŸ› å¦‚æœè¿˜æ˜¯404

### æ£€æŸ¥1ï¼šåç«¯å¯åŠ¨æ—¥å¿—

æŸ¥çœ‹åç«¯å¯åŠ¨æ—¶çš„æ—¥å¿—ï¼Œçœ‹æ˜¯å¦æœ‰ï¼š
```
ImportError: cannot import name 'communications' from 'app.api'
AttributeError: module 'app.api' has no attribute 'performance'
```

### æ£€æŸ¥2ï¼šAPIæ–‡ä»¶æ˜¯å¦å­˜åœ¨

```bash
ls -la backend/app/api/performance.py
ls -la backend/app/api/communications.py
ls -la backend/app/api/ptp.py
```

### æ£€æŸ¥3ï¼šæ£€æŸ¥__init__.py

```bash
cat backend/app/api/__init__.py
```

å¦‚æœæ–‡ä»¶æ˜¯ç©ºçš„ï¼Œå¯èƒ½éœ€è¦æ·»åŠ å¯¼å‡ºã€‚

---

## ğŸ“ å¿«é€ŸéªŒè¯æ¸…å•

- [ ] åç«¯æœåŠ¡å·²åœæ­¢
- [ ] åç«¯æœåŠ¡å·²é‡æ–°å¯åŠ¨
- [ ] å¯åŠ¨æ—¥å¿—æ²¡æœ‰é”™è¯¯
- [ ] è®¿é—® `http://localhost:8000/docs` èƒ½çœ‹åˆ°performanceç«¯ç‚¹
- [ ] curlæµ‹è¯•APIè¿”å›æ•°æ®ï¼ˆä¸æ˜¯404ï¼‰
- [ ] æµè§ˆå™¨å·²æ¸…é™¤ç¼“å­˜
- [ ] å‰ç«¯é¡µé¢å·²å¼ºåˆ¶åˆ·æ–°
- [ ] ç½‘ç»œè¯·æ±‚URLæ­£ç¡®

---

**è¯·æŒ‰ç…§ä»¥ä¸Šæ­¥éª¤æ“ä½œï¼Œå¹¶å‘Šè¯‰æˆ‘æ¯ä¸€æ­¥çš„ç»“æœï¼**

ç‰¹åˆ«æ˜¯ï¼š
1. åç«¯å¯åŠ¨æ—¶æ˜¯å¦æœ‰é”™è¯¯ï¼Ÿ
2. è®¿é—® `/docs` æ—¶èƒ½å¦çœ‹åˆ°performanceç«¯ç‚¹ï¼Ÿ
3. curlæµ‹è¯•çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ

