"""
ç®€å•çš„MockæœåŠ¡å™¨ - ç”¨äºæ¼”ç¤ºå‰ç«¯ç•Œé¢
æ— éœ€å®‰è£…å¤æ‚ä¾èµ–ï¼Œä½¿ç”¨Pythonå†…ç½®åº“
"""
from http.server import BaseHTTPRequestHandler, HTTPServer
import json
from urllib.parse import urlparse, parse_qs
from datetime import datetime
from mock_field_data import FIELD_GROUPS, STANDARD_FIELDS

# Mock æ•°æ® - ç”²æ–¹
TENANTS = [
    # åŸºç¡€èº«ä»½ä¿¡æ¯ (group_id=11)
    {"id": 1, "field_key": "user_id", "field_name": "ç”¨æˆ·ç¼–å·", "field_name_en": "user_id", "field_type": "String", "field_group_id": 11, "is_required": True, "is_extended": False, "sort_order": 1, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 2, "field_key": "user_name", "field_name": "ç”¨æˆ·å§“å", "field_name_en": "user_name", "field_type": "String", "field_group_id": 11, "is_required": True, "is_extended": False, "sort_order": 2, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 3, "field_key": "gender", "field_name": "æ€§åˆ«", "field_name_en": "gender", "field_type": "Enum", "field_group_id": 11, "is_required": False, "is_extended": False, "sort_order": 3, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 4, "field_key": "birth_date", "field_name": "å‡ºç”Ÿæ—¥æœŸ", "field_name_en": "birth_date", "field_type": "Date", "field_group_id": 11, "is_required": False, "is_extended": False, "sort_order": 4, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 5, "field_key": "nationality", "field_name": "å›½ç±", "field_name_en": "nationality", "field_type": "String", "field_group_id": 11, "is_required": False, "is_extended": True, "sort_order": 5, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 6, "field_key": "marital_status", "field_name": "å©šå§»çŠ¶å†µ", "field_name_en": "marital_status", "field_type": "Enum", "field_group_id": 11, "is_required": False, "is_extended": False, "sort_order": 6, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 7, "field_key": "id_type", "field_name": "è¯ä»¶ç±»å‹", "field_name_en": "id_type", "field_type": "Enum", "field_group_id": 11, "is_required": False, "is_extended": False, "sort_order": 7, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 8, "field_key": "id_number", "field_name": "è¯ä»¶å·ç ", "field_name_en": "id_number", "field_type": "String", "field_group_id": 11, "is_required": False, "is_extended": False, "sort_order": 8, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 9, "field_key": "address", "field_name": "å±…ä½åœ°å€", "field_name_en": "address", "field_type": "String", "field_group_id": 11, "is_required": False, "is_extended": False, "sort_order": 9, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 10, "field_key": "years_at_address", "field_name": "å±…ä½å¹´é™", "field_name_en": "years_at_address", "field_type": "Integer", "field_group_id": 11, "is_required": False, "is_extended": False, "sort_order": 10, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 11, "field_key": "housing_type", "field_name": "å±…ä½ç±»å‹", "field_name_en": "housing_type", "field_type": "Enum", "field_group_id": 11, "is_required": False, "is_extended": False, "sort_order": 11, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    
    # æ•™è‚²ä¿¡æ¯ (group_id=12)
    {"id": 12, "field_key": "education_level", "field_name": "æ•™è‚²ç¨‹åº¦", "field_name_en": "education_level", "field_type": "Enum", "field_group_id": 12, "is_required": False, "is_extended": False, "sort_order": 1, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 13, "field_key": "school_name", "field_name": "å­¦æ ¡åç§°", "field_name_en": "school_name", "field_type": "String", "field_group_id": 12, "is_required": False, "is_extended": False, "sort_order": 2, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 14, "field_key": "major", "field_name": "ä¸“ä¸š", "field_name_en": "major", "field_type": "String", "field_group_id": 12, "is_required": False, "is_extended": False, "sort_order": 3, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    
    # èŒä¸šä¿¡æ¯ (group_id=13)
    {"id": 15, "field_key": "employment_status", "field_name": "å·¥ä½œçŠ¶æ€", "field_name_en": "employment_status", "field_type": "Enum", "field_group_id": 13, "is_required": False, "is_extended": False, "sort_order": 1, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 16, "field_key": "company_name", "field_name": "å…¬å¸åç§°", "field_name_en": "company_name", "field_type": "String", "field_group_id": 13, "is_required": False, "is_extended": False, "sort_order": 2, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 17, "field_key": "job_title", "field_name": "èŒä½", "field_name_en": "job_title", "field_type": "String", "field_group_id": 13, "is_required": False, "is_extended": False, "sort_order": 3, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 18, "field_key": "industry", "field_name": "è¡Œä¸šç±»åˆ«", "field_name_en": "industry", "field_type": "String", "field_group_id": 13, "is_required": False, "is_extended": False, "sort_order": 4, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 19, "field_key": "years_of_employment", "field_name": "å·¥ä½œå¹´é™", "field_name_en": "years_of_employment", "field_type": "Integer", "field_group_id": 13, "is_required": False, "is_extended": False, "sort_order": 5, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 20, "field_key": "work_address", "field_name": "å·¥ä½œåœ°å€", "field_name_en": "work_address", "field_type": "String", "field_group_id": 13, "is_required": False, "is_extended": False, "sort_order": 6, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 21, "field_key": "company_phone", "field_name": "å…¬å¸è”ç³»ç”µè¯", "field_name_en": "company_phone", "field_type": "String", "field_group_id": 13, "is_required": False, "is_extended": False, "sort_order": 7, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 22, "field_key": "income_type", "field_name": "æ”¶å…¥ç±»å‹", "field_name_en": "income_type", "field_type": "Enum", "field_group_id": 13, "is_required": False, "is_extended": False, "sort_order": 8, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 23, "field_key": "payday", "field_name": "å‘è–ªæ—¥", "field_name_en": "payday", "field_type": "String", "field_group_id": 13, "is_required": False, "is_extended": False, "sort_order": 9, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 24, "field_key": "income_range", "field_name": "æ”¶å…¥", "field_name_en": "income_range", "field_type": "String", "field_group_id": 13, "is_required": False, "is_extended": False, "sort_order": 10, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 25, "field_key": "income_source", "field_name": "æ”¶å…¥æ¥æº", "field_name_en": "income_source", "field_type": "Enum", "field_group_id": 13, "is_required": False, "is_extended": False, "sort_order": 11, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 26, "field_key": "income_proof_files", "field_name": "æ”¶å…¥è¯æ˜æ–‡ä»¶", "field_name_en": "income_proof_files", "field_type": "FileList", "field_group_id": 13, "is_required": False, "is_extended": True, "sort_order": 12, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    
    # ç”¨æˆ·è¡Œä¸ºä¸ä¿¡ç”¨ (group_id=14)
    {"id": 27, "field_key": "last_app_open_time", "field_name": "æœ€è¿‘æ‰“å¼€æ—¶é—´", "field_name_en": "last_app_open_time", "field_type": "Datetime", "field_group_id": 14, "is_required": False, "is_extended": False, "sort_order": 1, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 28, "field_key": "last_repayment_page_visit_time", "field_name": "æœ€è¿‘è®¿é—®è¿˜æ¬¾é¡µæ—¶é—´", "field_name_en": "last_repayment_page_visit_time", "field_type": "Datetime", "field_group_id": 14, "is_required": False, "is_extended": False, "sort_order": 2, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 29, "field_key": "total_loan_count", "field_name": "å†å²å€Ÿæ¬¾æ€»ç¬”æ•°", "field_name_en": "total_loan_count", "field_type": "Integer", "field_group_id": 14, "is_required": False, "is_extended": False, "sort_order": 3, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 30, "field_key": "cleared_loan_count", "field_name": "å·²ç»“æ¸…ç¬”æ•°", "field_name_en": "cleared_loan_count", "field_type": "Integer", "field_group_id": 14, "is_required": False, "is_extended": False, "sort_order": 4, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 31, "field_key": "overdue_loan_count", "field_name": "å†å²é€¾æœŸç¬”æ•°", "field_name_en": "overdue_loan_count", "field_type": "Integer", "field_group_id": 14, "is_required": False, "is_extended": False, "sort_order": 5, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 32, "field_key": "max_overdue_days", "field_name": "å†å²æœ€å¤§é€¾æœŸå¤©æ•°", "field_name_en": "max_overdue_days", "field_type": "Integer", "field_group_id": 14, "is_required": False, "is_extended": False, "sort_order": 6, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 33, "field_key": "avg_loan_amount", "field_name": "å¹³å‡å€Ÿæ¬¾é‡‘é¢", "field_name_en": "avg_loan_amount", "field_type": "Decimal", "field_group_id": 14, "is_required": False, "is_extended": False, "sort_order": 7, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 34, "field_key": "credit_score_001", "field_name": "001ä¿¡ç”¨è¯„åˆ†", "field_name_en": "credit_score_001", "field_type": "Enum", "field_group_id": 14, "is_required": False, "is_extended": False, "sort_order": 8, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 35, "field_key": "credit_score_002", "field_name": "002ä¿¡ç”¨è¯„åˆ†", "field_name_en": "credit_score_002", "field_type": "Enum", "field_group_id": 14, "is_required": False, "is_extended": False, "sort_order": 9, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 36, "field_key": "credit_score_003", "field_name": "003ä¿¡ç”¨è¯„åˆ†", "field_name_en": "credit_score_003", "field_type": "Enum", "field_group_id": 14, "is_required": False, "is_extended": False, "sort_order": 10, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    
    # è´·æ¬¾è¯¦æƒ… (group_id=2)
    {"id": 37, "field_key": "loan_id", "field_name": "è´·æ¬¾ç¼–å·", "field_name_en": "loan_id", "field_type": "String", "field_group_id": 2, "is_required": True, "is_extended": False, "sort_order": 1, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 38, "field_key": "case_status", "field_name": "æ¡ˆä»¶çŠ¶æ€", "field_name_en": "case_status", "field_type": "Enum", "field_group_id": 2, "is_required": False, "is_extended": False, "sort_order": 2, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 39, "field_key": "product_type", "field_name": "äº§å“ç±»åˆ«", "field_name_en": "product_type", "field_type": "String", "field_group_id": 2, "is_required": False, "is_extended": False, "sort_order": 3, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 40, "field_key": "disbursement_time", "field_name": "æ”¾æ¬¾æ—¶é—´", "field_name_en": "disbursement_time", "field_type": "Datetime", "field_group_id": 2, "is_required": False, "is_extended": False, "sort_order": 4, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 41, "field_key": "total_due_amount", "field_name": "åº”è¿˜é‡‘é¢", "field_name_en": "total_due_amount", "field_type": "Decimal", "field_group_id": 2, "is_required": False, "is_extended": False, "sort_order": 5, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 42, "field_key": "total_paid_amount", "field_name": "å·²è¿˜é‡‘é¢", "field_name_en": "total_paid_amount", "field_type": "Decimal", "field_group_id": 2, "is_required": False, "is_extended": False, "sort_order": 6, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 43, "field_key": "outstanding_amount", "field_name": "åº”è¿˜æœªè¿˜é‡‘é¢", "field_name_en": "outstanding_amount", "field_type": "Decimal", "field_group_id": 2, "is_required": True, "is_extended": False, "sort_order": 7, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 44, "field_key": "principal_due", "field_name": "åº”æ”¶æœ¬é‡‘", "field_name_en": "principal_due", "field_type": "Decimal", "field_group_id": 2, "is_required": False, "is_extended": False, "sort_order": 8, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 45, "field_key": "interest_due", "field_name": "åº”æ”¶åˆ©æ¯", "field_name_en": "interest_due", "field_type": "Decimal", "field_group_id": 2, "is_required": False, "is_extended": False, "sort_order": 9, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 46, "field_key": "service_fee", "field_name": "æœåŠ¡è´¹", "field_name_en": "service_fee", "field_type": "Decimal", "field_group_id": 2, "is_required": False, "is_extended": False, "sort_order": 10, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 47, "field_key": "penalty_fee", "field_name": "åº”æ”¶ç½šæ¯", "field_name_en": "penalty_fee", "field_type": "Decimal", "field_group_id": 2, "is_required": False, "is_extended": False, "sort_order": 11, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 48, "field_key": "account_number", "field_name": "ä»£æ‰£è´¦å·", "field_name_en": "account_number", "field_type": "String", "field_group_id": 2, "is_required": False, "is_extended": False, "sort_order": 12, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 49, "field_key": "bank_name", "field_name": "å¼€æˆ·è¡Œ", "field_name_en": "bank_name", "field_type": "String", "field_group_id": 2, "is_required": False, "is_extended": False, "sort_order": 13, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 50, "field_key": "loan_app", "field_name": "å€Ÿæ¬¾App", "field_name_en": "loan_app", "field_type": "String", "field_group_id": 2, "is_required": False, "is_extended": False, "sort_order": 14, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 51, "field_key": "contract_no", "field_name": "åˆåŒç¼–å·", "field_name_en": "contract_no", "field_type": "String", "field_group_id": 2, "is_required": False, "is_extended": True, "sort_order": 15, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 52, "field_key": "disbursement_channel", "field_name": "æ”¾æ¬¾æ¸ é“", "field_name_en": "disbursement_channel", "field_type": "String", "field_group_id": 2, "is_required": False, "is_extended": True, "sort_order": 16, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 53, "field_key": "collection_entry_time", "field_name": "å…¥å‚¬æ—¶é—´", "field_name_en": "collection_entry_time", "field_type": "Datetime", "field_group_id": 2, "is_required": False, "is_extended": True, "sort_order": 17, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 54, "field_key": "overdue_days", "field_name": "å½“å‰é€¾æœŸå¤©æ•°", "field_name_en": "overdue_days", "field_type": "Integer", "field_group_id": 2, "is_required": False, "is_extended": True, "sort_order": 18, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 55, "field_key": "next_collection_time", "field_name": "ä¸‹æ¬¡å‚¬æ”¶æ—¶é—´", "field_name_en": "next_collection_time", "field_type": "Datetime", "field_group_id": 2, "is_required": False, "is_extended": True, "sort_order": 19, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 56, "field_key": "collection_status", "field_name": "å‚¬æ”¶çŠ¶æ€", "field_name_en": "collection_status", "field_type": "Enum", "field_group_id": 2, "is_required": False, "is_extended": True, "sort_order": 20, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 57, "field_key": "collection_stage", "field_name": "å‚¬æ”¶é˜¶æ®µ", "field_name_en": "collection_stage", "field_type": "Enum", "field_group_id": 2, "is_required": False, "is_extended": True, "sort_order": 21, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 58, "field_key": "repayment_method", "field_name": "è¿˜æ¬¾æ–¹å¼", "field_name_en": "repayment_method", "field_type": "Enum", "field_group_id": 2, "is_required": False, "is_extended": True, "sort_order": 22, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 59, "field_key": "last_payment_date", "field_name": "æœ€è¿‘è¿˜æ¬¾æ—¥æœŸ", "field_name_en": "last_payment_date", "field_type": "Datetime", "field_group_id": 2, "is_required": False, "is_extended": True, "sort_order": 23, "is_active": True, "is_deleted": False, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
]

TENANTS = [
    {"id": 1, "tenant_code": "TENANT001", "tenant_name": "ç¤ºä¾‹ç”²æ–¹A", "tenant_name_en": "Demo Tenant A", "country_code": "CN", "timezone": "Asia/Shanghai", "currency_code": "CNY", "is_active": True, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 2, "tenant_code": "TENANT002", "tenant_name": "ç¤ºä¾‹ç”²æ–¹B", "tenant_name_en": "Demo Tenant B", "country_code": "PH", "timezone": "Asia/Manila", "currency_code": "PHP", "is_active": True, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
]

CASES = [
    {"id": 1, "case_id": "CASE001", "tenant_id": 1, "loan_id": "LOAN001", "user_id": "USER001", "case_status": "è¿›è¡Œä¸­", "standard_fields": {"user_name": "å¼ ä¸‰", "mobile_number": "+86 13800138000", "outstanding_amount": "5000", "overdue_days": "15"}, "custom_fields": {}, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
    {"id": 2, "case_id": "CASE002", "tenant_id": 1, "loan_id": "LOAN002", "user_id": "USER002", "case_status": "å·²ç»“æ¸…", "standard_fields": {"user_name": "æå››", "mobile_number": "+86 13900139000", "outstanding_amount": "0", "overdue_days": "0"}, "custom_fields": {}, "created_at": "2025-01-01T00:00:00", "updated_at": "2025-01-01T00:00:00"},
]

class APIHandler(BaseHTTPRequestHandler):
    def _set_headers(self, status=200):
        self.send_response(status)
        self.send_header('Content-type', 'application/json')
        self.send_header('Access-Control-Allow-Origin', '*')
        self.send_header('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS')
        self.send_header('Access-Control-Allow-Headers', 'Content-Type, Authorization')
        self.end_headers()

    def do_OPTIONS(self):
        self._set_headers()

    def do_GET(self):
        parsed_path = urlparse(self.path)
        path = parsed_path.path
        
        if path == '/api/v1/field-groups':
            self._set_headers()
            self.wfile.write(json.dumps({"data": FIELD_GROUPS}).encode())
        elif path == '/api/v1/standard-fields':
            self._set_headers()
            self.wfile.write(json.dumps({"data": STANDARD_FIELDS}).encode())
        elif path == '/api/v1/tenants':
            self._set_headers()
            self.wfile.write(json.dumps({"data": TENANTS}).encode())
        elif path == '/api/v1/cases':
            self._set_headers()
            self.wfile.write(json.dumps({"data": CASES}).encode())
        elif path.startswith('/api/v1/cases/'):
            self._set_headers()
            case_id = int(path.split('/')[-1])
            case = next((c for c in CASES if c['id'] == case_id), None)
            if case:
                self.wfile.write(json.dumps({"data": case}).encode())
            else:
                self._set_headers(404)
                self.wfile.write(json.dumps({"detail": "æ¡ˆä»¶ä¸å­˜åœ¨"}).encode())
        elif path == '/api/v1/custom-fields':
            self._set_headers()
            self.wfile.write(json.dumps({"data": []}).encode())
        elif path == '/api/v1/field-dependencies':
            self._set_headers()
            self.wfile.write(json.dumps({"data": []}).encode())
        elif path.startswith('/api/v1/tenants/') and path.endswith('/field-configs'):
            self._set_headers()
            self.wfile.write(json.dumps({"data": []}).encode())
        else:
            self._set_headers(404)
            self.wfile.write(json.dumps({"detail": "Not found"}).encode())

    def log_message(self, format, *args):
        print(f"[{datetime.now().strftime('%Y-%m-%d %H:%M:%S')}] {format % args}")

def run(port=8000):
    server_address = ('', port)
    httpd = HTTPServer(server_address, APIHandler)
    print(f'âœ… Mock API æœåŠ¡å™¨å¯åŠ¨æˆåŠŸï¼')
    print(f'ğŸ“¡ ç›‘å¬åœ°å€: http://localhost:{port}')
    print(f'ğŸ“ APIæ–‡æ¡£: http://localhost:{port}/api/v1/')
    print(f'ğŸ”„ å‰ç«¯åœ°å€: http://localhost:5173')
    print(f'\næŒ‰ Ctrl+C åœæ­¢æœåŠ¡å™¨\n')
    httpd.serve_forever()

if __name__ == '__main__':
    run()

