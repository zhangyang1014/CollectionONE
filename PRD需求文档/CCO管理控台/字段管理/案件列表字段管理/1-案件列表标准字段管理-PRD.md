# 案件列表标准字段管理 PRD

## 版本记录

| 版本号 | 日期 | 作者 | 变更说明 |
|--------|------|------|---------|
| v1.1.0 | 2025-12-12 | 大象 | 优化字段定义：重命名2个字段，删除1个字段，新增6个字段（逾期期数+案件类型1-5） |
| v1.0.0 | 2025-12-08 | 产品大象 | 初始版本，定义15个标准字段 |

---

## 1. 背景与目标
- 提供统一的标准字段定义，所有甲方继承，避免各自维护导致的接口与展示差异。
- 来源：前端只读展示，后端统一下发，不允许新增、编辑、删除或排序。
- 用途：用于与甲方上传的字段做映射匹配，保证列表字段一致性。

## 2. 角色与范围
- 角色：CCO superadmin；甲方运营（只读）。
- 范围：控台“案件列表标准字段管理”页面，覆盖案件列表场景。

## 3. 需求概述
- 展示标准字段清单（当前 20 个），字段属性：名称、标识、数据类型、必填、来源、说明。
- 不展示可搜索/可筛选/范围检索/展示宽度等配置项（前端已去除）。


## 3.1 字段来源与映射用途
- 字段来源：系统统一配置，默认继承给所有甲方，甲方端仅可查看不可编辑/覆盖。
- 用途：用于与甲方上传的字段做映射匹配，保证列表字段一致性。
- 映射匹配逻辑：
  - 以标准字段标识 `field_key` 为唯一匹配主键。
  - 上传文件中的字段标识与标准 `field_key` 进行不区分大小写、下划线/中划线等分隔符的等价匹配；完全匹配则自动绑定。
  - 如未匹配到，再按预置同义别名表（如“mobile_number” ↔ “phone_number”）进行二级匹配。
  - 仍未匹配的字段标记为“待人工确认”，提示补充映射或新增甲方自定义字段（不影响标准字段只读）。

## 4. 字段清单（示例现状）
1) case_code / String / 必填 / 案件编号
2) user_name / String / 必填 / 客户
3) mobile_number / String / 必填 / 手机号
4) loan_amount / Decimal / 必填 / 贷款金额
5) outstanding_amount / Decimal / 必填 / 未还金额
6) overdue_days / Integer / 必填 / 逾期天数
7) overdue_installments / Integer / 必填 / 逾期期数
8) case_status / Enum / 必填 / 案件状态
9) expected_start_date / Date / 必填 / 预期开始日期
10) total_installments / Integer / 必填 / 总期数
11) system_name / String / 必填 / 所属系统
12) product_name / String / 必填 / 产品
13) app_name / String / 必填 / APP
14) merchant_name / String / 必填 / 商户
15) loan_id / String / 必填 / 关联借款ID（用于与借款主数据关联）
16) case_type_1 / Enum / 选填 / 案件类型1
17) case_type_2 / Enum / 选填 / 案件类型2
18) case_type_3 / Enum / 选填 / 案件类型3
19) case_type_4 / Enum / 选填 / 案件类型4
20) case_type_5 / Enum / 选填 / 案件类型5

## 5. 前端要求
- 路由：/field-config/standard（案件列表标准字段管理）。
- 表格列：#、字段名称、字段标识、数据类型、必填、来源、说明。
- 无任何编辑、拖拽、分组、搜索配置入口。

## 6. 后端要求
- 接口：GET /api/v1/standard-fields/case-list 返回标准字段数组。
- 返回字段：id, field_key, field_name, field_data_type, field_source, is_required, sort_order, description。
- field_source 固定为 system_unified（系统统一配置），不可被甲方覆盖。
- 映射逻辑：甲方上传字段时按“3.1 字段来源与映射用途”中的匹配规则返回匹配状态（自动匹配/别名匹配/待人工确认）。
- 只读：POST/PUT/DELETE/排序接口需返回错误提示“标准字段为统一定义，仅支持查看”。

## 7. 验收标准
- 页面展示 20 条标准字段，包含：基础信息字段、逾期期数、案件类型1-5等，顺序与案件列表一致。
- 字段命名准确：预期开始日期（非到期日期）、总期数（非期数）、逾期期数等。
- 不出现可搜索/可筛选/范围检索/展示宽度列。
- 所有操作按钮均禁用或不存在；接口只读。
